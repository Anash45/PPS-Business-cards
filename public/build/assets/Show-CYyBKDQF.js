import{r,j as s,u as H,a as b,H as L}from"./app-BqZJBwPa.js";import{m as E,C as R}from"./mapCompanyTemplateData-CiVqeA7W.js";import{C as S}from"./CardLayout-CPw9nU8k.js";import{u as $}from"./AutoTranslateProvider-63vNAuc2.js";import"./viteConfig-gEqUb4HH.js";function v({text:o}){const n=$()?.lang||null,[p,f]=r.useState(o),[j,g]=r.useState(!1),x=r.useRef(o),e=r.useRef({});r.useEffect(()=>{x.current=o,n||f(o)},[o,n]);const h=async t=>{try{return(await(await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=en&dt=t&q=${encodeURIComponent(t)}`)).json())[2]||"en"}catch{return"en"}},y=async(t,a,i)=>{const l=`${a}->${i}:${t}`;if(e.current[l])return e.current[l];try{const d=(await(await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${a}&tl=${i}&dt=t&q=${encodeURIComponent(t)}`)).json())[0][0][0];return e.current[l]=d,d}catch{return t}},c=async(t,a)=>{if(!/<[^>]+>/.test(t)){const d=await h(t);return d===a?t:await y(t,d,a)}const l=/>([^<]+)</g,_=[...t.matchAll(l)];let T=t;for(let d of _){const m=d[1].trim();if(!m)continue;const C=await h(m);let w=m;C!==a&&(w=await y(m,C,a)),T=T.replace(m,w)}return T};return r.useEffect(()=>{if(!n)return;(async()=>{g(!0);const a=await c(x.current,n);f(a),g(!1)})()},[n,o]),s.jsx("span",{style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:j?"...":p}})}function N(){const{setShowLanguageSelector:o}=$();o(!1);const{selectedCard:u,company:n,nfcCard:p,isSubscriptionActive:f,pageType:j="card"}=H().props,{setHeaderTitle:g,setHeaderText:x,cardFormData:e,setCardFormData:h,setIsCardReal:y}=b();return r.useEffect(()=>{g("Business Card"),x("")},[]),r.useEffect(()=>{if(n){const c=E(n,u);h(t=>({...t,...c}))}},[n,u]),r.useEffect(()=>{y(!0)}),console.log("Card F Data: ",e),s.jsxs(S,{children:[s.jsxs(L,{children:[s.jsx("title",{children:(()=>{const c=e||{},t=[c.title,c.first_name,c.last_name].filter(l=>l&&l.trim()).join(" "),a=c.company_name?.trim();let i="";return t&&(i+=t),a&&(i+=t?` | ${a}`:a),i})()}),s.jsx("link",{rel:"icon",type:"image/png",href:e.profile_image_url?`${e.profile_image_url}`:e.banner_image_url?`${e.banner_image_url}`:"/assets/images/profile-placeholder.png"}),s.jsx("meta",{property:"description",content:e?.meta_description??e?.description??(e?.position||e?.department?[e?.position,e?.department].filter(Boolean).join(" - "):"Get in touch via my digital business card.")})]}),s.jsx("div",{className:"py-4 md:px-6 px-4 flex flex-col gap-6",children:f?p===null&&u?.status==="active"||p!==null&&p?.status==="active"&&u?.status==="active"?s.jsx(R,{isReal:!0}):s.jsx("div",{className:"p-4 text-center bg-orange-100 text-orange-700 rounded-md",children:s.jsx(v,{text:`This card is currently inactive. Please contact the
                        administrator for more information.`})}):s.jsx("div",{className:"p-4 text-center bg-red-100 text-red-700 rounded-md",children:s.jsx(v,{text:"You can only access this page with a valid subscription. Contact administrator for more information."})})})]})}export{N as default};
