import{r,j as t,b as v,c as H,H as $}from"./app-EHE9T1PS.js";import{u as E,A as L,m as R,C as A}from"./mapCompanyTemplateData-CD09e_ua.js";import"./viteConfig-BIBuROsR.js";function b({text:s}){const o=E()?.lang||null,[y,p]=r.useState(s),[j,e]=r.useState(!1),f=r.useRef(s),c=r.useRef({});r.useEffect(()=>{f.current=s,o||p(s)},[s,o]);const m=async a=>{try{return(await(await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=en&dt=t&q=${encodeURIComponent(a)}`)).json())[2]||"en"}catch{return"en"}},x=async(a,n,g)=>{const l=`${n}->${g}:${a}`;if(c.current[l])return c.current[l];try{const i=(await(await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${n}&tl=${g}&dt=t&q=${encodeURIComponent(a)}`)).json())[0][0][0];return c.current[l]=i,i}catch{return a}},C=async(a,n)=>{if(!/<[^>]+>/.test(a)){const i=await m(a);return i===n?a:await x(a,i,n)}const l=/>([^<]+)</g,T=[...a.matchAll(l)];let h=a;for(let i of T){const d=i[1].trim();if(!d)continue;const _=await m(d);let w=d;_!==n&&(w=await x(d,_,n)),h=h.replace(d,w)}return h};return r.useEffect(()=>{if(!o)return;(async()=>{e(!0);const n=await C(f.current,o);p(n),e(!1)})()},[o,s]),t.jsx("span",{style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:j?"...":y}})}function M({children:s}){return t.jsx(L,{children:t.jsx("div",{className:"font-jakarta-sans bg-[#fbfbfb] min-h-screen",children:s})})}function I(){const{selectedCard:s,company:u,isSubscriptionActive:o,pageType:y="card"}=v().props,{setHeaderTitle:p,setHeaderText:j,cardFormData:e,setCardFormData:f,setIsCardReal:c}=H();return r.useEffect(()=>{p("Business Card"),j("")},[]),r.useEffect(()=>{if(u){const m=R(u,s);f(x=>({...x,...m}))}},[u,s]),r.useEffect(()=>{c(!0)}),t.jsxs(M,{children:[t.jsxs($,{children:[t.jsx("title",{children:e?.title||e?.first_name||e?.last_name?[e?.title,e?.first_name,e?.last_name].filter(Boolean).join(" "):"Great Guy To Know"}),t.jsx("link",{rel:"icon",type:"image/png",href:e.profile_image_url?`${e.profile_image_url}`:e.banner_image_url?`${e.banner_image_url}`:"/assets/images/profile-placeholder.png"}),t.jsx("meta",{property:"description",content:e?.meta_description??e?.description??(e?.position||e?.department?[e?.position,e?.department].filter(Boolean).join(" - "):"Get in touch via my digital business card.")})]}),t.jsx("div",{className:"py-4 md:px-6 px-4 flex flex-col gap-6",children:o?s?.status==="active"?t.jsx(A,{isReal:!0}):t.jsx("div",{className:"p-4 text-center bg-orange-100 text-orange-700 rounded-md",children:t.jsx(b,{text:`This card is currently inactive. Please contact the
                        administrator for more information.`})}):t.jsx("div",{className:"p-4 text-center bg-red-100 text-red-700 rounded-md",children:t.jsx(b,{text:"You can only access this page with a valid subscription. Contact administrator for more information."})})})]})}export{I as default};
