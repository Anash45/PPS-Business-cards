import{c as d,J as y,a as b,r as g,j as s,z as t,d as h}from"./app--JcDETcA.js";import{D as f,a as o,E as j}from"./DropdownUi-ZB9o0RZ4.js";import{C as k}from"./CustomDataTable-BoI33ZaV.js";import{S as N}from"./square-pen-CJqXaoW4.js";import{T as v}from"./trash-2-eJVFPFxW.js";import"./chevron-down-IfYr0Qrc.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],C=d("credit-card",M);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M18 11c-1.5 0-2.5.5-3 2",key:"1fod00"}],["path",{d:"M4 6a2 2 0 0 0-2 2v4a5 5 0 0 0 5 5 8 8 0 0 1 5 2 8 8 0 0 1 5-2 5 5 0 0 0 5-5V8a2 2 0 0 0-2-2h-3a8 8 0 0 0-5 2 8 8 0 0 0-5-2z",key:"d70hit"}],["path",{d:"M6 11c1.5 0 2.5.5 3 2",key:"136fht"}]],D=d("venetian-mask",_);function P({users:m,plans:i,companies:c,authUser:a}){const{openModal:l}=y(),{setIsPageLoading:n}=b(),p=async r=>{if(confirm("Are you sure you want to delete this user?"))try{const e=await axios.delete(route("users.destroy",r));e.data.success?(t.success(e.data.message),h.reload({only:["users"]})):t.error(e.data.message||"Failed to delete user.")}catch(e){t.error(e.response?.data?.message||"An error occurred.")}},u=async r=>{n(!0);try{const e=await axios.post(route("users.impersonate",r));e.data.success?(t.success(e.data.message),setTimeout(()=>{window.location.href=route(e.data.route)},1e3),n(!1)):(n(!1),t.error(e.data.message||"Failed to impersonate"))}catch(e){n(!1),t.error(e.response?.data?.message||"An error occurred")}},x=g.useMemo(()=>[{key:"id",label:"ID",sortable:!0},{key:"company",label:"Company",render:(r,e)=>e.role==="admin"?"-":s.jsxs("div",{className:"flex flex-col gap-1",children:[e.company?.name&&s.jsx("p",{className:"text-sm border-b border-b-gray-800 cursor-pointer inline-block w-fit",onClick:()=>a.role==="admin"&&l("ManageCompanyModal",{company:e.company}),children:e.company.name.charAt(0).toUpperCase()+e.company.name.slice(1)}),a.role==="admin"&&e.role==="company"&&s.jsx("span",{className:`text-xs font-semibold py-1 rounded-full ${e?.subscription?.is_active===!0?"text-green-700":e?.subscription?.is_active===!1?"text-orange-500":"text-red-700"}`,children:e?.subscription?.is_active?"Active":e?.subscription?.is_active===!1?"Expired":"No Subscribed"})]})},{key:"name",label:"Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"role",label:"Role",sortable:!0,render:(r,e)=>s.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${e.role==="admin"?"bg-green-100 text-green-700":e.role==="company"?"bg-blue-100 text-blue-700":e.role==="template_editor"?"bg-orange-100 text-orange-700":e.role==="editor"?"bg-purple-100 text-purple-700":e.role==="team"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:e.role_name})},{key:"actions",label:"Actions",render:(r,e)=>s.jsxs(f,{trigger:s.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",children:s.jsx(j,{className:"h-4 w-4"})}),children:[s.jsx(o,{onClick:()=>l("ManageUserModal",{user:e,authUser:a,companies:c}),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(N,{className:"h-4 w-4",strokeWidth:2}),s.jsx("span",{children:"Edit"})]})}),e.role==="company"&&a.role==="admin"&&s.jsx(o,{onClick:()=>l("ManageSubscriptionModal",{user:e,plans:i}),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(C,{className:"h-4 w-4"}),s.jsx("span",{children:"Subscription"})]})}),a.role==="admin"&&s.jsx(o,{onClick:()=>u(e.id),children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(D,{className:"h-4 w-4"}),s.jsx("span",{children:"Impersonate"})]})}),s.jsx(o,{onClick:()=>p(e.id),children:s.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[s.jsx(v,{className:"h-4 w-4",strokeWidth:2}),s.jsx("span",{children:"Delete"})]})})]})}],[a,c,i]);return s.jsx(k,{columns:x,data:m,endpoint:route("users.index"),tableKey:"users",searchable:!0,paginated:!0,perPageOptions:[10,25,50,100],emptyMessage:"No users found."})}export{P as default};
