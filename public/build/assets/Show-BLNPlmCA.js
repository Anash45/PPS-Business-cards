import{r,j as a,u as H,a as $,H as b}from"./app-CD7xEUUc.js";import{m as E,C as L}from"./mapCompanyTemplateData-DgO-MoRI.js";import{C as R}from"./CardLayout-DF6mEXj-.js";import{u as M}from"./AutoTranslateProvider-Bwvdz7D2.js";import"./viteConfig-BIBuROsR.js";function C({text:s}){const o=M()?.lang||null,[T,p]=r.useState(s),[y,t]=r.useState(!1),m=r.useRef(s),c=r.useRef({});r.useEffect(()=>{m.current=s,o||p(s)},[s,o]);const f=async e=>{try{return(await(await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=en&dt=t&q=${encodeURIComponent(e)}`)).json())[2]||"en"}catch{return"en"}},x=async(e,n,g)=>{const l=`${n}->${g}:${e}`;if(c.current[l])return c.current[l];try{const i=(await(await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${n}&tl=${g}&dt=t&q=${encodeURIComponent(e)}`)).json())[0][0][0];return c.current[l]=i,i}catch{return e}},v=async(e,n)=>{if(!/<[^>]+>/.test(e)){const i=await f(e);return i===n?e:await x(e,i,n)}const l=/>([^<]+)</g,j=[...e.matchAll(l)];let h=e;for(let i of j){const d=i[1].trim();if(!d)continue;const _=await f(d);let w=d;_!==n&&(w=await x(d,_,n)),h=h.replace(d,w)}return h};return r.useEffect(()=>{if(!o)return;(async()=>{t(!0);const n=await v(m.current,o);p(n),t(!1)})()},[o,s]),a.jsx("span",{style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:y?"...":T}})}function B(){const{selectedCard:s,company:u,isSubscriptionActive:o,pageType:T="card"}=H().props,{setHeaderTitle:p,setHeaderText:y,cardFormData:t,setCardFormData:m,setIsCardReal:c}=$();return r.useEffect(()=>{p("Business Card"),y("")},[]),r.useEffect(()=>{if(u){const f=E(u,s);m(x=>({...x,...f}))}},[u,s]),r.useEffect(()=>{c(!0)}),a.jsxs(R,{children:[a.jsxs(b,{children:[a.jsx("title",{children:t?.title||t?.first_name||t?.last_name?[t?.title,t?.first_name,t?.last_name].filter(Boolean).join(" "):"Great Guy To Know"}),a.jsx("link",{rel:"icon",type:"image/png",href:t.profile_image_url?`${t.profile_image_url}`:t.banner_image_url?`${t.banner_image_url}`:"/assets/images/profile-placeholder.png"}),a.jsx("meta",{property:"description",content:t?.meta_description??t?.description??(t?.position||t?.department?[t?.position,t?.department].filter(Boolean).join(" - "):"Get in touch via my digital business card.")})]}),a.jsx("div",{className:"py-4 md:px-6 px-4 flex flex-col gap-6",children:o?s?.status==="active"?a.jsx(L,{isReal:!0}):a.jsx("div",{className:"p-4 text-center bg-orange-100 text-orange-700 rounded-md",children:a.jsx(C,{text:`This card is currently inactive. Please contact the
                        administrator for more information.`})}):a.jsx("div",{className:"p-4 text-center bg-red-100 text-red-700 rounded-md",children:a.jsx(C,{text:"You can only access this page with a valid subscription. Contact administrator for more information."})})})]})}export{B as default};
