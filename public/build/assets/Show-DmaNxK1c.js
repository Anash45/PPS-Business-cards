import{r as c,j as s,u as $,a as H,H as b}from"./app-B8v70Kz_.js";import{m as E,C as L}from"./mapCompanyTemplateData-DuwxVoYf.js";import{C as R}from"./CardLayout-D2oHwWdx.js";import{u as D}from"./AutoTranslateProvider-B63kO4u0.js";import"./viteConfig-gEqUb4HH.js";function v({text:n}){const r=D()?.lang||null,[y,T]=c.useState(n),[j,x]=c.useState(!1),e=c.useRef(n),u=c.useRef({});c.useEffect(()=>{e.current=n,r||T(n)},[n,r]);const g=async t=>{try{return(await(await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=en&dt=t&q=${encodeURIComponent(t)}`)).json())[2]||"en"}catch{return"en"}},o=async(t,a,l)=>{const p=`${a}->${l}:${t}`;if(u.current[p])return u.current[p];try{const d=(await(await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${a}&tl=${l}&dt=t&q=${encodeURIComponent(t)}`)).json())[0][0][0];return u.current[p]=d,d}catch{return t}},i=async(t,a)=>{if(!/<[^>]+>/.test(t)){const d=await g(t);return d===a?t:await o(t,d,a)}const p=/>([^<]+)</g,_=[...t.matchAll(p)];let h=t;for(let d of _){const m=d[1].trim();if(!m)continue;const C=await g(m);let w=m;C!==a&&(w=await o(m,C,a)),h=h.replace(m,w)}return h};return c.useEffect(()=>{if(!r)return;(async()=>{x(!0);const a=await i(e.current,r);T(a),x(!1)})()},[r,n]),s.jsx("span",{style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:j?"...":y}})}function N(){const{selectedCard:n,company:f,nfcCard:r,isSubscriptionActive:y,pageType:T="card"}=$().props,{setHeaderTitle:j,setHeaderText:x,cardFormData:e,setCardFormData:u,setIsCardReal:g}=H();return c.useEffect(()=>{j("Business Card"),x("")},[]),c.useEffect(()=>{if(f){const o=E(f,n);u(i=>({...i,...o}))}},[f,n]),c.useEffect(()=>{g(!0)}),console.log("Card F Data: ",e),s.jsxs(R,{children:[s.jsxs(b,{children:[s.jsx("title",{children:(()=>{const o=e||{},i=[o.title,o.first_name,o.last_name].filter(l=>l&&l.trim()).join(" "),t=o.company_name?.trim();let a="";return i&&(a+=i),t&&(a+=i?` | ${t}`:t),a})()}),s.jsx("link",{rel:"icon",type:"image/png",href:e.profile_image_url?`${e.profile_image_url}`:e.banner_image_url?`${e.banner_image_url}`:"/assets/images/profile-placeholder.png"}),s.jsx("meta",{property:"description",content:e?.meta_description??e?.description??(e?.position||e?.department?[e?.position,e?.department].filter(Boolean).join(" - "):"Get in touch via my digital business card.")})]}),s.jsx("div",{className:"py-4 md:px-6 px-4 flex flex-col gap-6",children:y?r===null&&n?.status==="active"||r!==null&&r?.status==="active"&&n?.status==="active"?s.jsx(L,{isReal:!0}):s.jsx("div",{className:"p-4 text-center bg-orange-100 text-orange-700 rounded-md",children:s.jsx(v,{text:`This card is currently inactive. Please contact the
                        administrator for more information.`})}):s.jsx("div",{className:"p-4 text-center bg-red-100 text-red-700 rounded-md",children:s.jsx(v,{text:"You can only access this page with a valid subscription. Contact administrator for more information."})})})]})}export{N as default};
