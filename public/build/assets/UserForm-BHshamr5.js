import{a as h,r as x,u as w,j as a,z as d,d as N}from"./app-CuDq6AIR.js";import{I as t}from"./InputLabel-BIqI0i-y.js";import{T as n}from"./TextInput-CVFfh-ev.js";import{I as i}from"./InputError-BnCApVei.js";import{S as _}from"./SelectInput-CUll6jZD.js";import{B as b}from"./Button-g1ocwbaa.js";import"./createLucideIcon-CrJqq0G0.js";function A({user:r=null}){const{flash:C}=h().props,[f,c]=x.useState(!1),[m,p]=x.useState({}),{data:o,setData:u,post:k,put:E,processing:g,clearErrors:v}=w({company_name:r?.company?.name||"",name:r?.name||"",email:r?.email||"",password:"",password_confirmation:"",role:r?.role||"company"}),l=(e,s)=>{u(e,s),m[e]&&p(j=>({...j,[e]:null})),v(e)},y=async e=>{e.preventDefault(),c(!0),p({});try{let s;r?s=await axios.put(route("users.update",r.id),o):s=await axios.post(route("users.store"),o),s.data.success?(c(!1),d.success(s.data.message),r||(u({company_name:"",name:"",email:"",password:"",password_confirmation:"",role:"company"}),setTimeout(()=>{N.visit(route("users.index"))},2e3))):(c(!1),d.error(s.data.message||"Something went wrong"))}catch(s){c(!1),s.response?.status===422?(p(s.response.data.errors||{}),d.error("Please fix validation errors.")):d.error(s.response?.data?.message||"An error occurred.")}};return a.jsxs("form",{onSubmit:y,className:"space-y-5 bg-white p-6 rounded-lg shadow",children:[a.jsxs("div",{className:"grid md:grid-cols-2 grid-cols-1 gap-5",children:[a.jsx("div",{children:o.role==="company"&&a.jsxs("div",{className:"space-y-1",children:[a.jsx(t,{htmlFor:"company_name",value:"Company Name",className:"text-[#344054] font-medium"}),a.jsx(n,{id:"company_name",name:"company_name",value:o.company_name,onChange:e=>l("company_name",e.target.value),className:"block w-full"}),a.jsx(i,{message:m.company_name,className:"mt-1"})]})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx(t,{htmlFor:"name",value:"Name",className:"text-[#344054] font-medium"}),a.jsx(n,{id:"name",name:"name",value:o.name,onChange:e=>l("name",e.target.value),className:"block w-full"}),a.jsx(i,{message:m.name,className:"mt-1"})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 grid-cols-1 gap-5",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(t,{htmlFor:"email",value:"Email",className:"text-[#344054] font-medium"}),a.jsx(n,{id:"email",name:"email",type:"text",value:o.email,onChange:e=>l("email",e.target.value),className:"block w-full"}),a.jsx(i,{message:m.email,className:"mt-1"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx(t,{htmlFor:"role",value:"Role",className:"text-[#344054] font-medium"}),r?a.jsx(n,{id:"role",readOnly:!0,type:"role",defaultValue:o.role,className:"block w-full capitalize"}):a.jsx(_,{id:"role",name:"role",value:o.role,onChange:e=>{l("role",e.target.value),e.target.value!=="company"&&(l("company_name",""),clearErrors("company_name"))},className:"w-full block",options:[{value:"admin",label:"Admin"},{value:"company",label:"Company"}]}),a.jsx(i,{message:m.role,className:"mt-1"})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 grid-cols-1 gap-5",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(t,{htmlFor:"password",value:`Password${r?" (leave blank to keep current)":""}`,className:"text-[#344054] font-medium"}),a.jsx(n,{id:"password",name:"password",type:"password",value:o.password,onChange:e=>l("password",e.target.value),className:"block w-full"}),a.jsx(i,{message:m.password,className:"mt-1"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx(t,{htmlFor:"password_confirmation",value:"Confirm Password",className:"text-[#344054] font-medium"}),a.jsx(n,{id:"password_confirmation",name:"password_confirmation",type:"password",value:o.password_confirmation,onChange:e=>l("password_confirmation",e.target.value),className:"block w-full"})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(b,{variant:"primary",type:"submit",disabled:g,children:f?"Saving...":r?"Update User":"Create User"})})]})}export{A as default};
