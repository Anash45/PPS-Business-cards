import{g as c,r as d,k as u,f as x,j as e,L as j,z as t}from"./app-Cdf_aaIR.js";import{D as f,a as l}from"./DropdownUi-jewlpBcm.js";import{T as N}from"./trash-2-DOwQIaLg.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],b=c("credit-card",v);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],k=c("search",w);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],M=c("square-pen",_);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M18 11c-1.5 0-2.5.5-3 2",key:"1fod00"}],["path",{d:"M4 6a2 2 0 0 0-2 2v4a5 5 0 0 0 5 5 8 8 0 0 1 5 2 8 8 0 0 1 5-2 5 5 0 0 0 5-5V8a2 2 0 0 0-2-2h-3a8 8 0 0 0-5 2 8 8 0 0 0-5-2z",key:"d70hit"}],["path",{d:"M6 11c1.5 0 2.5.5 3 2",key:"136fht"}]],C=c("venetian-mask",S);function I({users:n,plans:m,companies:p,authUser:r}){const[i,h]=d.useState(""),{openModal:o}=u();d.useEffect(()=>{const s=setTimeout(()=>{x.get(route("users.index"),{search:i},{preserveState:!0,replace:!0})},100);return()=>clearTimeout(s)},[i]);const g=async s=>{if(confirm("Are you sure you want to delete this user?"))try{const a=await axios.delete(route("users.destroy",s));a.data.success?(t.success(a.data.message),x.reload()):t.error(a.data.message||"Failed to delete user.")}catch(a){t.error(a.response?.data?.message||"An error occurred.")}},y=async s=>{try{const a=await axios.post(route("users.impersonate",s));a.data.success?(t.success(a.data.message),setTimeout(()=>{window.location.href=route(a.data.route)},1e3)):t.error(a.data.message||"Failed to impersonate")}catch(a){t.error(a.response?.data?.message||"An error occurred")}};return console.log(r),e.jsxs("div",{className:"py-6 px-4 rounded-[14px] main-box bg-white flex flex-col gap-6 overflow-x-auto",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"relative w-full sm:w-1/3",children:[e.jsx(k,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",value:i,onChange:s=>h(s.target.value),placeholder:"Search users...",className:"w-full border border-gray-300 rounded-md py-2 pl-9 pr-3 text-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"hidden xl:flex border-b border-gray-200 pb-2 px-4 text-sm font-semibold text-[#263238]",children:[e.jsx("div",{className:"xl:pr-2 px-2 w-[5%]",children:"ID"}),e.jsx("div",{className:"px-2 w-[30%]",children:"Name"}),e.jsx("div",{className:"px-2 w-[30%]",children:"Email"}),e.jsx("div",{className:"px-2 w-[30%]",children:"Role"}),e.jsx("div",{className:"pl-2 w-[5%] text-right",children:"Actions"})]}),n.data.length>0?n.data.map(s=>e.jsxs("div",{className:"border border-gray-300 rounded-lg py-3 px-4 flex flex-col xl:flex-row xl:items-center xl:justify-between hover:bg-gray-50 transition",children:[e.jsxs("div",{className:"xl:pr-2 px-2 xl:w-[5%]",children:[e.jsxs("span",{className:"xl:hidden text-xs text-gray-500",children:["ID:"," "]}),e.jsx("span",{className:"text-sm text-gray-800",children:s.id})]}),e.jsxs("div",{className:"px-2 xl:w-[30%]",children:[e.jsxs("span",{className:"xl:hidden text-xs text-gray-500",children:["Name:"," "]}),e.jsx("span",{className:"text-sm text-gray-800",children:s.name})]}),e.jsxs("div",{className:"px-2 xl:w-[30%]",children:[e.jsxs("span",{className:"xl:hidden text-xs text-gray-500",children:["Email:"," "]}),e.jsx("span",{className:"text-sm text-gray-800",children:s.email})]}),e.jsxs("div",{className:"pl-2 xl:w-[30%]",children:[e.jsxs("span",{className:"xl:hidden text-xs text-gray-500",children:["Role:"," "]}),e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full 
                                    ${s.role==="admin"?"bg-green-100 text-green-700":s.role==="company"?"bg-blue-100 text-blue-700":s.role==="editor"?"bg-purple-100 text-purple-700":s.role==="team"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:s.role.charAt(0).toUpperCase()+s.role.slice(1)}),s.role!=="admin"&&e.jsxs("div",{className:"flex gap-1 items-center flex-wrap mt-1",children:[e.jsx("p",{className:"text-sm",children:s.company.name.charAt(0).toUpperCase()+s.company.name.slice(1)}),r.role==="admin"&&s.role=="company"?e.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full 
                                    ${s?.subscription?.is_active==!0?"text-green-700":s?.subscription?.is_active==!1?"text-orange-500":"text-red-700"}`,children:s?.subscription?.is_active?"Active":s?.subscription?.is_active===!1?"Expired":"No Subscribed"}):null]})]}),e.jsx("div",{className:"mt-3 sm:mt-0 flex gap-3 justify-end sm:w-[5%] flex-wrap",children:e.jsxs(f,{children:[e.jsx(l,{onClick:()=>o("ManageUserModal",{user:s,authUser:r,companies:p}),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4",strokeWidth:2}),e.jsx("span",{children:"Edit"})]})}),s.role=="company"?e.jsx(l,{onClick:()=>o("ManageSubscriptionModal",{user:s,plans:m}),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4"})," ",e.jsx("span",{children:"Subscription"})]})}):null,r.role=="admin"?e.jsx(l,{onClick:()=>y(s.id),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"})," ",e.jsx("span",{children:"Impersonate"})]})}):null,e.jsx(l,{onClick:()=>g(s.id),children:e.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[e.jsx(N,{className:"h-4 w-4",strokeWidth:2}),e.jsx("span",{children:"Delete"})]})})]})})]},s.id)):e.jsx("p",{className:"text-center text-gray-500 py-4",children:"No users found."})]}),e.jsx("div",{className:"p-4 flex flex-wrap gap-2 justify-center",children:n.links.map((s,a)=>e.jsx(j,{href:s.url||"#",className:`px-3 py-1 text-sm rounded ${s.active?"bg-primary hover:bg-[#60ae68] text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"} ${s.url?"":"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},a))})]})}export{I as default};
