import{g as ke,c as me,j as e,h as Le,r as Y,z as W,B as fe,i as we,k as Te,f as Me,H as Pe}from"./app-226nCS_N.js";import{X as Ie,A as $e}from"./AuthenticatedLayout-C-3IM-_8.js";import{u as Ue,U as ze,r as ve,C as Re}from"./index-DurDurMk.js";import{c as pe}from"./csvFieldDefinitions-CmBVwms9.js";import"./ApplicationLogo-rt5XG_8h.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Oe=ke("arrow-left",qe);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ne=ke("arrow-right",Be);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],He=ke("check",Ve);function We(){const{csvImportProgress:m,progressSteps:b}=me();return e.jsx("div",{className:"p-5 flex flex-col gap-4 font-public-sans bg-white border border-[#EAECF0] rounded-xl sticky top-4",children:b.map((p,u)=>{const E=p.number===m,O=p.number<m,k=u===b.length-1;return e.jsxs("div",{className:`flex gap-3 csv-progress-item transition-all cursor-pointer ${E?"cpi-active":""}`,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`h-6 w-6 relative rounded-full flex items-center justify-center 
                                    ${E||O?"bg-primary":"bg-[#F2F4F7]"} 
                                    cpi-circle transition-colors`,children:O?e.jsx(He,{className:"h-5 w-5 text-white"}):e.jsx("div",{className:"h-2 w-2 rounded-full bg-white"})}),!k&&e.jsx("div",{className:`cpi-line w-0.5 rounded-full h-9 my-1 transition-colors ${O||E?"bg-primary":"bg-[#F2F4F7]"}`})]}),e.jsxs("div",{className:"flex flex-col pt-1",children:[e.jsxs("p",{className:`text-xs leading-[18px] ${E||O?"text-primary":"text-[#667085]"}`,children:["Step ",p.number]}),e.jsx("p",{className:"font-semibold text-base text-black",children:p.label})]})]},p.number)})})}var je={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var Ke=je.exports,Fe;function Qe(){return Fe||(Fe=1,(function(m,b){((p,u)=>{m.exports=u()})(Ke,function p(){var u=typeof self<"u"?self:typeof window<"u"?window:u!==void 0?u:{},E,O=!u.document&&!!u.postMessage,k=u.IS_PAPA_WORKER||!1,f={},_=0,i={};function l(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(s){var r=oe(s);r.chunkSize=parseInt(r.chunkSize),s.step||s.chunk||(r.chunkSize=null),this._handle=new c(r),(this._handle.streamer=this)._config=r}).call(this,t),this.parseChunk=function(s,r){var a=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<a){let w=this._config.newline;w||(n=this._config.quoteChar||'"',w=this._handle.guessLineEndings(s,n)),s=[...s.split(w).slice(a)].join(w)}this.isFirstChunk&&F(this._config.beforeFirstChunk)&&(n=this._config.beforeFirstChunk(s))!==void 0&&(s=n),this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+s,n=(this._partialLine="",this._handle.parse(a,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(s=n.meta.cursor,a=(this._finished||(this._partialLine=a.substring(s-this._baseIndex),this._baseIndex=s),n&&n.data&&(this._rowCount+=n.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),k)u.postMessage({results:n,workerId:i.WORKER_ID,finished:a});else if(F(this._config.chunk)&&!r){if(this._config.chunk(n,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=n=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),this._completed||!a||!F(this._config.complete)||n&&n.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),a||n&&n.meta.paused||this._nextChunk(),n}this._halted=!0},this._sendError=function(s){F(this._config.error)?this._config.error(s):k&&this._config.error&&u.postMessage({workerId:i.WORKER_ID,error:s,finished:!1})}}function A(t){var s;(t=t||{}).chunkSize||(t.chunkSize=i.RemoteChunkSize),l.call(this,t),this._nextChunk=O?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(s=new XMLHttpRequest,this._config.withCredentials&&(s.withCredentials=this._config.withCredentials),O||(s.onload=Z(this._chunkLoaded,this),s.onerror=Z(this._chunkError,this)),s.open(this._config.downloadRequestBody?"POST":"GET",this._input,!O),this._config.downloadRequestHeaders){var r,a=this._config.downloadRequestHeaders;for(r in a)s.setRequestHeader(r,a[r])}var n;this._config.chunkSize&&(n=this._start+this._config.chunkSize-1,s.setRequestHeader("Range","bytes="+this._start+"-"+n));try{s.send(this._config.downloadRequestBody)}catch(w){this._chunkError(w.message)}O&&s.status===0&&this._chunkError()}},this._chunkLoaded=function(){s.readyState===4&&(s.status<200||400<=s.status?this._chunkError():(this._start+=this._config.chunkSize||s.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(s),this.parseChunk(s.responseText)))},this._chunkError=function(r){r=s.statusText||r,this._sendError(new Error(r))}}function Q(t){(t=t||{}).chunkSize||(t.chunkSize=i.LocalChunkSize),l.call(this,t);var s,r,a=typeof FileReader<"u";this.stream=function(n){this._input=n,r=n.slice||n.webkitSlice||n.mozSlice,a?((s=new FileReader).onload=Z(this._chunkLoaded,this),s.onerror=Z(this._chunkError,this)):s=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var n=this._input,w=(this._config.chunkSize&&(w=Math.min(this._start+this._config.chunkSize,this._input.size),n=r.call(n,this._start,w)),s.readAsText(n,this._config.encoding));a||this._chunkLoaded({target:{result:w}})},this._chunkLoaded=function(n){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(n.target.result)},this._chunkError=function(){this._sendError(s.error)}}function v(t){var s;l.call(this,t=t||{}),this.stream=function(r){return s=r,this._nextChunk()},this._nextChunk=function(){var r,a;if(!this._finished)return r=this._config.chunkSize,s=r?(a=s.substring(0,r),s.substring(r)):(a=s,""),this._finished=!s,this.parseChunk(a)}}function R(t){l.call(this,t=t||{});var s=[],r=!0,a=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(n){this._input=n,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){a&&s.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),s.length?this.parseChunk(s.shift()):r=!0},this._streamData=Z(function(n){try{s.push(typeof n=="string"?n:n.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(s.shift()))}catch(w){this._streamError(w)}},this),this._streamError=Z(function(n){this._streamCleanUp(),this._sendError(n)},this),this._streamEnd=Z(function(){this._streamCleanUp(),a=!0,this._streamData("")},this),this._streamCleanUp=Z(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function c(t){var s,r,a,n,w=Math.pow(2,53),B=-w,te=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,se=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,y=this,$=0,d=0,G=!1,g=!1,j=[],o={data:[],errors:[],meta:{}};function V(N){return t.skipEmptyLines==="greedy"?N.join("").trim()==="":N.length===1&&N[0].length===0}function q(){if(o&&a&&(re("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+i.DefaultDelimiter+"'"),a=!1),t.skipEmptyLines&&(o.data=o.data.filter(function(h){return!V(h)})),J()){let h=function(z,H){F(t.transformHeader)&&(z=t.transformHeader(z,H)),j.push(z)};if(o)if(Array.isArray(o.data[0])){for(var N=0;J()&&N<o.data.length;N++)o.data[N].forEach(h);o.data.splice(0,1)}else o.data.forEach(h)}function S(h,z){for(var H=t.header?{}:[],I=0;I<h.length;I++){var L=I,C=h[I],C=((ie,x)=>(M=>(t.dynamicTypingFunction&&t.dynamicTyping[M]===void 0&&(t.dynamicTyping[M]=t.dynamicTypingFunction(M)),(t.dynamicTyping[M]||t.dynamicTyping)===!0))(ie)?x==="true"||x==="TRUE"||x!=="false"&&x!=="FALSE"&&((M=>{if(te.test(M)&&(M=parseFloat(M),B<M&&M<w))return 1})(x)?parseFloat(x):se.test(x)?new Date(x):x===""?null:x):x)(L=t.header?I>=j.length?"__parsed_extra":j[I]:L,C=t.transform?t.transform(C,L):C);L==="__parsed_extra"?(H[L]=H[L]||[],H[L].push(C)):H[L]=C}return t.header&&(I>j.length?re("FieldMismatch","TooManyFields","Too many fields: expected "+j.length+" fields but parsed "+I,d+z):I<j.length&&re("FieldMismatch","TooFewFields","Too few fields: expected "+j.length+" fields but parsed "+I,d+z)),H}var U;o&&(t.header||t.dynamicTyping||t.transform)&&(U=1,!o.data.length||Array.isArray(o.data[0])?(o.data=o.data.map(S),U=o.data.length):o.data=S(o.data,0),t.header&&o.meta&&(o.meta.fields=j),d+=U)}function J(){return t.header&&j.length===0}function re(N,S,U,h){N={type:N,code:S,message:U},h!==void 0&&(N.row=h),o.errors.push(N)}F(t.step)&&(n=t.step,t.step=function(N){o=N,J()?q():(q(),o.data.length!==0&&($+=N.data.length,t.preview&&$>t.preview?r.abort():(o.data=o.data[0],n(o,y))))}),this.parse=function(N,S,U){var h=t.quoteChar||'"',h=(t.newline||(t.newline=this.guessLineEndings(N,h)),a=!1,t.delimiter?F(t.delimiter)&&(t.delimiter=t.delimiter(N),o.meta.delimiter=t.delimiter):((h=((z,H,I,L,C)=>{var ie,x,M,ue;C=C||[",","	","|",";",i.RECORD_SEP,i.UNIT_SEP];for(var ge=0;ge<C.length;ge++){for(var le,be=C[ge],X=0,ce=0,K=0,ee=(M=void 0,new P({comments:L,delimiter:be,newline:H,preview:10}).parse(z)),he=0;he<ee.data.length;he++)I&&V(ee.data[he])?K++:(le=ee.data[he].length,ce+=le,M===void 0?M=le:0<le&&(X+=Math.abs(le-M),M=le));0<ee.data.length&&(ce/=ee.data.length-K),(x===void 0||X<=x)&&(ue===void 0||ue<ce)&&1.99<ce&&(x=X,ie=be,ue=ce)}return{successful:!!(t.delimiter=ie),bestDelimiter:ie}})(N,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=h.bestDelimiter:(a=!0,t.delimiter=i.DefaultDelimiter),o.meta.delimiter=t.delimiter),oe(t));return t.preview&&t.header&&h.preview++,s=N,r=new P(h),o=r.parse(s,S,U),q(),G?{meta:{paused:!0}}:o||{meta:{paused:!1}}},this.paused=function(){return G},this.pause=function(){G=!0,r.abort(),s=F(t.chunk)?"":s.substring(r.getCharIndex())},this.resume=function(){y.streamer._halted?(G=!1,y.streamer.parseChunk(s,!0)):setTimeout(y.resume,3)},this.aborted=function(){return g},this.abort=function(){g=!0,r.abort(),o.meta.aborted=!0,F(t.complete)&&t.complete(o),s=""},this.guessLineEndings=function(z,h){z=z.substring(0,1048576);var h=new RegExp(D(h)+"([^]*?)"+D(h),"gm"),U=(z=z.replace(h,"")).split("\r"),h=z.split(`
`),z=1<h.length&&h[0].length<U[0].length;if(U.length===1||z)return`
`;for(var H=0,I=0;I<U.length;I++)U[I][0]===`
`&&H++;return H>=U.length/2?`\r
`:"\r"}}function D(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function P(t){var s=(t=t||{}).delimiter,r=t.newline,a=t.comments,n=t.step,w=t.preview,B=t.fastMode,te=null,se=!1,y=t.quoteChar==null?'"':t.quoteChar,$=y;if(t.escapeChar!==void 0&&($=t.escapeChar),(typeof s!="string"||-1<i.BAD_DELIMITERS.indexOf(s))&&(s=","),a===s)throw new Error("Comment character same as delimiter");a===!0?a="#":(typeof a!="string"||-1<i.BAD_DELIMITERS.indexOf(a))&&(a=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var d=0,G=!1;this.parse=function(g,j,o){if(typeof g!="string")throw new Error("Input must be a string");var V=g.length,q=s.length,J=r.length,re=a.length,N=F(n),S=[],U=[],h=[],z=d=0;if(!g)return X();if(B||B!==!1&&g.indexOf(y)===-1){for(var H=g.split(r),I=0;I<H.length;I++){if(h=H[I],d+=h.length,I!==H.length-1)d+=r.length;else if(o)return X();if(!a||h.substring(0,re)!==a){if(N){if(S=[],ue(h.split(s)),ce(),G)return X()}else ue(h.split(s));if(w&&w<=I)return S=S.slice(0,w),X(!0)}}return X()}for(var L=g.indexOf(s,d),C=g.indexOf(r,d),ie=new RegExp(D($)+D(y),"g"),x=g.indexOf(y,d);;)if(g[d]===y)for(x=d,d++;;){if((x=g.indexOf(y,x+1))===-1)return o||U.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:S.length,index:d}),le();if(x===V-1)return le(g.substring(d,x).replace(ie,y));if(y===$&&g[x+1]===$)x++;else if(y===$||x===0||g[x-1]!==$){L!==-1&&L<x+1&&(L=g.indexOf(s,x+1));var M=ge((C=C!==-1&&C<x+1?g.indexOf(r,x+1):C)===-1?L:Math.min(L,C));if(g.substr(x+1+M,q)===s){h.push(g.substring(d,x).replace(ie,y)),g[d=x+1+M+q]!==y&&(x=g.indexOf(y,d)),L=g.indexOf(s,d),C=g.indexOf(r,d);break}if(M=ge(C),g.substring(x+1+M,x+1+M+J)===r){if(h.push(g.substring(d,x).replace(ie,y)),be(x+1+M+J),L=g.indexOf(s,d),x=g.indexOf(y,d),N&&(ce(),G))return X();if(w&&S.length>=w)return X(!0);break}U.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:S.length,index:d}),x++}}else if(a&&h.length===0&&g.substring(d,d+re)===a){if(C===-1)return X();d=C+J,C=g.indexOf(r,d),L=g.indexOf(s,d)}else if(L!==-1&&(L<C||C===-1))h.push(g.substring(d,L)),d=L+q,L=g.indexOf(s,d);else{if(C===-1)break;if(h.push(g.substring(d,C)),be(C+J),N&&(ce(),G))return X();if(w&&S.length>=w)return X(!0)}return le();function ue(K){S.push(K),z=d}function ge(K){var ee=0;return ee=K!==-1&&(K=g.substring(x+1,K))&&K.trim()===""?K.length:ee}function le(K){return o||(K===void 0&&(K=g.substring(d)),h.push(K),d=V,ue(h),N&&ce()),X()}function be(K){d=K,ue(h),h=[],C=g.indexOf(r,d)}function X(K){if(t.header&&!j&&S.length&&!se){var ee=S[0],he=Object.create(null),Ce=new Set(ee);let Ee=!1;for(let xe=0;xe<ee.length;xe++){let de=ee[xe];if(he[de=F(t.transformHeader)?t.transformHeader(de,xe):de]){let _e,Se=he[de];for(;_e=de+"_"+Se,Se++,Ce.has(_e););Ce.add(_e),ee[xe]=_e,he[de]++,Ee=!0,(te=te===null?{}:te)[_e]=de}else he[de]=1,ee[xe]=de;Ce.add(de)}Ee&&console.warn("Duplicate headers found and renamed."),se=!0}return{data:S,errors:U,meta:{delimiter:s,linebreak:r,aborted:G,truncated:!!K,cursor:z+(j||0),renamedHeaders:te}}}function ce(){n(X()),S=[],U=[]}},this.abort=function(){G=!0},this.getCharIndex=function(){return d}}function ne(t){var s=t.data,r=f[s.workerId],a=!1;if(s.error)r.userError(s.error,s.file);else if(s.results&&s.results.data){var n={abort:function(){a=!0,T(s.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ae,resume:ae};if(F(r.userStep)){for(var w=0;w<s.results.data.length&&(r.userStep({data:s.results.data[w],errors:s.results.errors,meta:s.results.meta},n),!a);w++);delete s.results}else F(r.userChunk)&&(r.userChunk(s.results,n,s.file),delete s.results)}s.finished&&!a&&T(s.workerId,s.results)}function T(t,s){var r=f[t];F(r.userComplete)&&r.userComplete(s),r.terminate(),delete f[t]}function ae(){throw new Error("Not implemented.")}function oe(t){if(typeof t!="object"||t===null)return t;var s,r=Array.isArray(t)?[]:{};for(s in t)r[s]=oe(t[s]);return r}function Z(t,s){return function(){t.apply(s,arguments)}}function F(t){return typeof t=="function"}return i.parse=function(t,s){var r=(s=s||{}).dynamicTyping||!1;if(F(r)&&(s.dynamicTypingFunction=r,r={}),s.dynamicTyping=r,s.transform=!!F(s.transform)&&s.transform,!s.worker||!i.WORKERS_SUPPORTED)return r=null,i.NODE_STREAM_INPUT,typeof t=="string"?(t=(a=>a.charCodeAt(0)!==65279?a:a.slice(1))(t),r=new(s.download?A:v)(s)):t.readable===!0&&F(t.read)&&F(t.on)?r=new R(s):(u.File&&t instanceof File||t instanceof Object)&&(r=new Q(s)),r.stream(t);(r=(()=>{var a;return!!i.WORKERS_SUPPORTED&&(a=(()=>{var n=u.URL||u.webkitURL||null,w=p.toString();return i.BLOB_URL||(i.BLOB_URL=n.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",w,")();"],{type:"text/javascript"})))})(),(a=new u.Worker(a)).onmessage=ne,a.id=_++,f[a.id]=a)})()).userStep=s.step,r.userChunk=s.chunk,r.userComplete=s.complete,r.userError=s.error,s.step=F(s.step),s.chunk=F(s.chunk),s.complete=F(s.complete),s.error=F(s.error),delete s.worker,r.postMessage({input:t,config:s,workerId:r.id})},i.unparse=function(t,s){var r=!1,a=!0,n=",",w=`\r
`,B='"',te=B+B,se=!1,y=null,$=!1,d=((()=>{if(typeof s=="object"){if(typeof s.delimiter!="string"||i.BAD_DELIMITERS.filter(function(j){return s.delimiter.indexOf(j)!==-1}).length||(n=s.delimiter),typeof s.quotes!="boolean"&&typeof s.quotes!="function"&&!Array.isArray(s.quotes)||(r=s.quotes),typeof s.skipEmptyLines!="boolean"&&typeof s.skipEmptyLines!="string"||(se=s.skipEmptyLines),typeof s.newline=="string"&&(w=s.newline),typeof s.quoteChar=="string"&&(B=s.quoteChar),typeof s.header=="boolean"&&(a=s.header),Array.isArray(s.columns)){if(s.columns.length===0)throw new Error("Option columns is empty");y=s.columns}s.escapeChar!==void 0&&(te=s.escapeChar+B),s.escapeFormulae instanceof RegExp?$=s.escapeFormulae:typeof s.escapeFormulae=="boolean"&&s.escapeFormulae&&($=/^[=+\-@\t\r].*$/)}})(),new RegExp(D(B),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return G(null,t,se);if(typeof t[0]=="object")return G(y||Object.keys(t[0]),t,se)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||y),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),G(t.fields||[],t.data||[],se);throw new Error("Unable to serialize unrecognized input");function G(j,o,V){var q="",J=(typeof j=="string"&&(j=JSON.parse(j)),typeof o=="string"&&(o=JSON.parse(o)),Array.isArray(j)&&0<j.length),re=!Array.isArray(o[0]);if(J&&a){for(var N=0;N<j.length;N++)0<N&&(q+=n),q+=g(j[N],N);0<o.length&&(q+=w)}for(var S=0;S<o.length;S++){var U=(J?j:o[S]).length,h=!1,z=J?Object.keys(o[S]).length===0:o[S].length===0;if(V&&!J&&(h=V==="greedy"?o[S].join("").trim()==="":o[S].length===1&&o[S][0].length===0),V==="greedy"&&J){for(var H=[],I=0;I<U;I++){var L=re?j[I]:I;H.push(o[S][L])}h=H.join("").trim()===""}if(!h){for(var C=0;C<U;C++){0<C&&!z&&(q+=n);var ie=J&&re?j[C]:C;q+=g(o[S][ie],C)}S<o.length-1&&(!V||0<U&&!z)&&(q+=w)}}return q}function g(j,o){var V,q;return j==null?"":j.constructor===Date?JSON.stringify(j).slice(1,25):(q=!1,$&&typeof j=="string"&&$.test(j)&&(j="'"+j,q=!0),V=j.toString().replace(d,te),(q=q||r===!0||typeof r=="function"&&r(j,o)||Array.isArray(r)&&r[o]||((J,re)=>{for(var N=0;N<re.length;N++)if(-1<J.indexOf(re[N]))return!0;return!1})(V,i.BAD_DELIMITERS)||-1<V.indexOf(n)||V.charAt(0)===" "||V.charAt(V.length-1)===" ")?B+V+B:V)}},i.RECORD_SEP="",i.UNIT_SEP="",i.BYTE_ORDER_MARK="\uFEFF",i.BAD_DELIMITERS=["\r",`
`,'"',i.BYTE_ORDER_MARK],i.WORKERS_SUPPORTED=!O&&!!u.Worker,i.NODE_STREAM_INPUT=1,i.LocalChunkSize=10485760,i.RemoteChunkSize=5242880,i.DefaultDelimiter=",",i.Parser=P,i.ParserHandle=c,i.NetworkStreamer=A,i.FileStreamer=Q,i.StringStreamer=v,i.ReadableStreamStreamer=R,u.jQuery&&((E=u.jQuery).fn.parse=function(t){var s=t.config||{},r=[];return this.each(function(w){if(!(E(this).prop("tagName").toUpperCase()==="INPUT"&&E(this).attr("type").toLowerCase()==="file"&&u.FileReader)||!this.files||this.files.length===0)return!0;for(var B=0;B<this.files.length;B++)r.push({file:this.files[B],inputElem:this,instanceConfig:E.extend({},s)})}),a(),this;function a(){if(r.length===0)F(t.complete)&&t.complete();else{var w,B,te,se,y=r[0];if(F(t.before)){var $=t.before(y.file,y.inputElem);if(typeof $=="object"){if($.action==="abort")return w="AbortError",B=y.file,te=y.inputElem,se=$.reason,void(F(t.error)&&t.error({name:w},B,te,se));if($.action==="skip")return void n();typeof $.config=="object"&&(y.instanceConfig=E.extend(y.instanceConfig,$.config))}else if($==="skip")return void n()}var d=y.instanceConfig.complete;y.instanceConfig.complete=function(G){F(d)&&d(G,y.file,y.inputElem),n()},i.parse(y.file,y.instanceConfig)}}function n(){r.splice(0,1),a()}}),k&&(u.onmessage=function(t){t=t.data,i.WORKER_ID===void 0&&t&&(i.WORKER_ID=t.workerId),typeof t.input=="string"?u.postMessage({workerId:i.WORKER_ID,results:i.parse(t.input,t.config),finished:!0}):(u.File&&t.input instanceof File||t.input instanceof Object)&&(t=i.parse(t.input,t.config))&&u.postMessage({workerId:i.WORKER_ID,results:t,finished:!0})}),(A.prototype=Object.create(l.prototype)).constructor=A,(Q.prototype=Object.create(l.prototype)).constructor=Q,(v.prototype=Object.create(v.prototype)).constructor=v,(R.prototype=Object.create(l.prototype)).constructor=R,i})})(je)),je.exports}var Ze=Qe();const Ae=Le(Ze);function De({type:m="csv",files:b=[],setFiles:p,title:u="Upload Files",subtitle:E="Drag and drop or click to upload"}){const O=Y.useCallback(i=>{if(!Array.isArray(i)||i.length===0){W.error("No valid file uploaded.");return}if(m==="csv"){const l=i[0];if(!(!!l&&(l.type==="text/csv"||l.name?.toLowerCase().endsWith(".csv")))){W.error("Please upload a valid CSV file."),p([]);return}l.key=`${l.name}-${l.lastModified}-${Math.random()}`,p([l]),W.success("CSV file uploaded successfully!")}else{const l=i.filter(c=>c.size>5242880?(W.error(`${c.name} exceeds 5 MB limit.`),!1):!0);if(l.length===0){W.error("No valid images uploaded.");return}const A=new Set(b.map(c=>c.name.toLowerCase())),Q=l.filter(c=>A.has(c.name.toLowerCase()));Q.length>0&&W.error(`${Q.length} duplicate image${Q.length>1?"s":""} skipped: ${Q.map(c=>c.name).join(", ")}`);const v=l.filter(c=>!A.has(c.name.toLowerCase()));if(v.length===0)return;v.forEach(c=>{c.key=`${c.name}-${c.lastModified}-${Math.random()}`});const R=[...b,...v];p(R),W.success(`${v.length} image(s) added!`)}},[m,b,p]),{getRootProps:k,getInputProps:f,isDragActive:_}=Ue({onDrop:O,multiple:m==="images",accept:m==="csv"?{"text/csv":[".csv"]}:{"image/*":[".jpg",".jpeg",".png",".webp",".svg"]}});return e.jsx("div",{className:"flex flex-col gap-3 w-full",children:e.jsxs("div",{...k(),className:`border-2 border-dashed rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all
                    ${_?"border-primary bg-[#F9FAFB]":"border-[#D0D5DD]"}
                    w-full h-48 text-center p-3
                `,children:[e.jsx("input",{...f()}),e.jsxs("div",{className:"flex flex-col gap-1 items-center justify-center font-public-sans max-w-[420px]",children:[e.jsx(ze,{className:"h-5 w-5 text-[#27272A]"}),e.jsx("p",{className:"text-sm font-semibold text-black",children:u}),e.jsx("p",{className:"text-sm text-[#667085]",children:E})]})]})})}function ye({title:m="",description:b=""}){return e.jsxs("div",{className:"space-y-2 font-jakarta-sans",children:[m&&e.jsx("h2",{className:"text-xl font-semibold text-black leading-[120%]",children:m}),b&&e.jsx("p",{className:"text-base text-[#667085] leading-[22px]",children:b})]})}function Je(){const{setCsvFile:m,setCsvData:b}=me(),[p,u]=Y.useState([]),[E,O]=Y.useState(null),k=pe.filter(l=>l.required).map(l=>l.name);console.log("Required CSV Fields:",k);const f=Y.useCallback(()=>{u([]),m(null),b([])},[m,b]),_=Y.useCallback(l=>{const A=k.filter(Q=>!l.includes(Q));return console.log("CSV Headers:",l,k,A),A.length>0?(O(`Missing required fields: ${A.join(", ")}`),W.error("Some required fields are missing in the CSV."),!1):(O(null),!0)},[k]),i=Y.useCallback(l=>{if(!l||l.length===0){f();return}const A=l[0];if(!(A&&(A.type==="text/csv"||A.name?.toLowerCase().endsWith(".csv")))){W.error("Please upload a valid CSV file."),f();return}u([A]),m(A),Ae.parse(A,{header:!0,skipEmptyLines:!0,preview:2,complete:v=>{const R=v.meta.fields||[];if(!_(R)){f();return}Ae.parse(A,{header:!0,skipEmptyLines:!0,complete:c=>{const D=c.data||[];if(D.length===0){W.error("The CSV file appears to be empty."),b([]);return}b(D),console.log("Parsed CSV Data:",D.length)},error:c=>{console.error("CSV Parse Error:",c),W.error("Error parsing CSV file.")}})},error:v=>{console.error("CSV Header Parse Error:",v),W.error("Unable to read CSV headers.")}})},[f,m,b,_]);return e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-xl border border-[#EAECF0]",children:[E&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm px-4 py-2 rounded-md",children:E}),e.jsx(ye,{title:"Import Employee Data",description:"Follow these steps to import employee data via CSV file"}),e.jsx(De,{title:"Drag CSV here or click to select a file.",subtitle:"UTF-8, with header. Example: salutation, title, first_name, last_name, position, department, profile_image_name etc",type:"csv",files:p,setFiles:i}),p.length>0&&e.jsxs("div",{className:"border border-[#EAECF0] bg-white rounded-md p-3 text-sm text-[#101828] flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Uploaded file:"})," ",e.jsx("span",{className:"text-[#475467]",children:p[0].name})]}),e.jsx(Ie,{onClick:f,className:"h-4 w-4 text-[#98A2B3] cursor-pointer hover:text-red-500 transition-colors"})]})]})}function Ge(){const{setCsvImages:m,csvData:b}=me(),[p,u]=Y.useState([]),[E,O]=Y.useState(0);Y.useEffect(()=>{m(p)},[p,m]),Y.useEffect(()=>{if(!b?.length||!p.length){O(0);return}const f=b.map(l=>(l.profile_image_name||"").trim().toLowerCase()).filter(Boolean),i=p.map(l=>l.name.trim().toLowerCase()).filter(l=>f.includes(l));O(i.length)},[b,p]);const k=Y.useCallback(f=>{u(_=>{const i=_.filter(l=>l.key!==f);return W.success("Image removed"),i})},[u]);return console.log("📁 Current CSV Images:",p),console.log("📊 CSV Data:",b),console.log("✅ Matched Count:",E),e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-xl border border-[#EAECF0]",children:[b?.length>0&&e.jsxs("div",{className:"text-sm font-medium text-green-600",children:["Matched Images: ",E," / ",b.length," ",e.jsx("span",{className:"text-[10px] italic text-gray-500",children:"(Unmatched images will be ignored)"})]}),e.jsx(ye,{title:"Upload Photos",description:'Upload multiple images matching the names listed in your CSV under the "profile_image_name" column.'}),e.jsx(De,{title:"Drag and drop images here or click to select.",subtitle:"Max size 5 MB each. Accepted formats: jpg, jpeg, png, webp, svg.",type:"images",files:p,setFiles:u}),p.length>0&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 mt-3",children:p.map(f=>{const _=f.name.trim().toLowerCase(),l=(b?.map(A=>(A.profile_image_name||"").trim().toLowerCase()).filter(Boolean)||[]).includes(_);return e.jsxs("div",{className:`relative border rounded-lg overflow-hidden group transition
                        ${l?"bg-green-50 border-green-400":"bg-white border-gray-200"}`,children:[e.jsx("img",{src:URL.createObjectURL(f),alt:f.name,className:"object-cover w-full h-32"}),e.jsx("button",{type:"button",onClick:()=>k(f.key),className:"absolute top-1 right-1 bg-white/80 hover:bg-red-500 hover:text-white rounded-full p-1 transition",children:e.jsx(Ie,{className:"w-4 h-4"})}),e.jsx("p",{className:`text-xs text-center truncate px-1 py-1 border-t transition
                            ${l?"bg-green-100 text-green-700 border-green-300":"bg-gray-50 text-gray-600 border-gray-200"}`,children:f.name})]},f.key)})})]})}function Xe(){const{setCsvImportProgress:m,csvData:b}=me();return e.jsxs("div",{className:"flex flex-col lg:gap-6 gap-5",children:[e.jsx(Je,{}),e.jsx(Ge,{}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs(fe,{variant:"light",disabled:b.length===0,onClick:()=>m(2),children:["Next ",e.jsx(Ne,{className:"inline-block w-4 h-4 ml-1"})]})})]})}function Ye(){const{csvData:m,setCsvImportProgress:b,mapping:p,setMapping:u}=me(),E=m?.length>0?Object.keys(m[0]):[];Y.useEffect(()=>{!m?.length||!pe?.length||u(k=>{if(Object.keys(k).length>0)return k;const f={};return Object.keys(m[0]).forEach(_=>{const i=pe.find(l=>l.name.toLowerCase()===_.toLowerCase());f[_]=i?i.name:""}),f})},[m,pe]);const O=(k,f)=>{u(_=>({..._,[k]:f}))};return m?.length?e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-xl border border-[#EAECF0]",children:[e.jsx(ye,{title:"Mapping Employee Data",description:"Map your CSV columns to the appropriate fields in our system."}),e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg overflow-hidden text-sm bg-gray-50",children:[e.jsx("thead",{className:"bg-primary border-b border-primary",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-medium  text-white w-1/4",children:"CSV Column"}),e.jsx("th",{className:"text-left p-3 font-medium  text-white w-1/3",children:"Map To"}),e.jsx("th",{className:"text-left p-3 font-medium  text-white",children:"Sample Data"})]})}),e.jsx("tbody",{children:E.map(k=>{const f=Array.from({length:5},(_,i)=>m[i]?.[k]||"");return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-green-50 transition-colors",children:[e.jsx("td",{className:"p-3 font-medium text-gray-800",children:we(k)}),e.jsx("td",{className:"p-3",children:e.jsxs("select",{value:p[k]||"",onChange:_=>O(k,_.target.value),className:"border border-gray-300 rounded-md p-2 text-sm w-full focus:ring-2 focus:ring-primary focus:outline-none",children:[e.jsx("option",{value:"",children:"-- Select Field --"}),pe.map(_=>e.jsxs("option",{value:_.name,children:[we(_.name),_.required?" *":""]},_.name))]})}),e.jsx("td",{className:"p-3 text-gray-600 text-xs",children:e.jsx("div",{className:"flex flex-col gap-0.5",children:f.map((_,i)=>e.jsx("div",{className:"truncate max-w-[250px]",children:_?.toString().trim()?_:"-"},i))})})]},k)})})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(fe,{onClick:()=>{const k=Object.values(p).filter(Boolean),f=k.filter((i,l)=>k.indexOf(i)!==l);if(f.length>0){W.error(`Duplicate mapping detected: "${[...new Set(f)].join('", "')}" are assigned to multiple CSV columns.`),console.log("❌ Duplicate mappings:",f);return}const _=pe.filter(i=>i.required).filter(i=>!k.includes(i.name));if(_.length>0){W.error(`Required fields missing: ${_.map(i=>we(i.name)).join(", ")}`),console.log("❌ Missing required fields:",_);return}b(3),console.log("✅ Final Mapping:",p)},variant:"light",children:["Next ",e.jsx(Ne,{className:"inline-block w-4 h-4 ml-1"})]})})]}):e.jsx("div",{className:"text-center text-gray-500 p-5",children:"⚠️ Please upload a CSV file first."})}function et(){const[m,b]=Y.useState(1),p=v=>b(m===v?0:v),{openModal:u}=Te(),{csvData:E,mapping:O,loadingImport:k,warnings:f,setWarnings:_,errors:i,setErrors:l,setCsvImportProgress:A}=me();Y.useEffect(()=>{if(!E||E.length===0){_([]),l([]);return}const v=[],R=[];E.forEach((c,D)=>{pe.forEach(P=>{const ne=O[P.name],T=ne?c[ne]:"";P.required&&(T===void 0||T==="")&&v.push({row:D+1,name:`${c.first_name||""} ${c.last_name||""}`,field:P.name,issue:"Missing value",value:T||""}),T&&(P.validate==="nonEmpty"&&T.trim()===""&&R.push({row:D+1,name:`${c.first_name||""} ${c.last_name||""}`,field:P.name,issue:"Value required",value:T}),P.validate==="email"&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(T)||R.push({row:D+1,name:`${c.first_name||""} ${c.last_name||""}`,field:P.name,issue:"Invalid email",value:T})),P.validate==="phone"&&(/^\+?[0-9\s\-()]{6,20}$/.test(T)||R.push({row:D+1,name:`${c.first_name||""} ${c.last_name||""}`,field:P.name,issue:"Invalid phone",value:T})),P.validate==="url"&&(/^(https?:\/\/)[^\s/$.?#].[^\s]*$/i.test(T)||R.push({row:D+1,name:`${c.first_name||""} ${c.last_name||""}`,field:P.name,issue:"Invalid URL",value:T})))})}),_(v),l(R)},[E,O]);function Q(v){if(!E||E.length===0)return null;const R=v-1;if(R<0||R>=E.length)return null;const c=E[R];return{rowNumber:R+1,data:c}}return e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-xl border border-[#EAECF0]",children:[e.jsx(ye,{title:"Validation Employee Data",description:"Validating the fields in your CSV file to ensure data integrity before import."}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs(ve.Accordion,{className:"border-0 rounded-0",open:m===1,icon:e.jsx(Re,{className:`${m===1?"rotate-180":""} transition text-[#71717A]`}),children:[e.jsx(ve.AccordionHeader,{className:"rounded-lg p-3 border border-[#F2F4F7] bg-white transition duration-500",onClick:()=>p(1),children:e.jsx("div",{className:"flex flex-col gap-1.5 font-public-sans",children:e.jsxs("h5",{className:"font-semibold text-sm text-[#3F3F46] flex items-center",children:[e.jsx("img",{src:"/assets/images/warning-icon.svg",alt:"Icon",className:"h-6 w-6 mr-2"}),e.jsxs("span",{children:[f.length," record",f.length>1?"s":""," with warnings"]})]})})}),e.jsx(ve.AccordionBody,{className:"overflow-visible p-0",children:e.jsx("div",{className:"py-5",children:e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg overflow-hidden text-sm bg-gray-50",children:[e.jsx("thead",{className:"bg-primary border-b border-primary",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Row#"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Employee"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Field"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Issue"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Action"})]})}),e.jsx("tbody",{children:f.length>0?f.map((v,R)=>e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"p-3",children:v.row}),e.jsx("td",{className:"p-3",children:v.name||"-"}),e.jsx("td",{className:"p-3",children:we(v.field)}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"py-1 px-2 w-fit font-medium rounded-md bg-orange-100 text-orange-800",children:v.issue}),e.jsx("div",{className:"text-sm text-gray-500",children:v.value})]}),e.jsx("td",{className:"p-3",children:e.jsx(fe,{variant:"primary",onClick:()=>{const c=Q(v.row);console.log("CSV Row Data:",c),u("UpdateCsvRecordModal",{rowNumber:c?.rowNumber??null,rowData:c?.data??{}})},children:"Update"})})]},R)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-3 text-gray-400 italic text-center",children:"No warnings"})})})]})})})})]}),e.jsxs(ve.Accordion,{className:"border-0 rounded-0",open:m===2,icon:e.jsx(Re,{className:`${m===2?"rotate-180":""} transition text-[#71717A]`}),children:[e.jsx(ve.AccordionHeader,{className:"rounded-lg p-3 border border-[#F2F4F7] bg-white transition duration-500",onClick:()=>p(2),children:e.jsx("div",{className:"flex flex-col gap-1.5 font-public-sans",children:e.jsxs("h5",{className:"font-semibold text-sm text-[#3F3F46] flex items-center",children:[e.jsx("img",{src:"/assets/images/danger-icon.svg",alt:"Icon",className:"h-6 w-6 mr-2"}),e.jsxs("span",{children:[i.length," record",i.length>1?"s":""," with errors"]})]})})}),e.jsx(ve.AccordionBody,{className:"overflow-visible p-0",children:e.jsx("div",{className:"py-5",children:e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg overflow-hidden text-sm bg-gray-50",children:[e.jsx("thead",{className:"bg-primary border-b border-primary",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Row#"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Employee"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Field"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Issue"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Action"})]})}),e.jsx("tbody",{children:i.length>0?i.map((v,R)=>e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"p-3",children:v.row}),e.jsx("td",{className:"p-3",children:v.name||"-"}),e.jsx("td",{className:"p-3",children:we(v.field)}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"py-1 px-2 w-fit font-medium rounded-md bg-red-100 text-red-800",children:v.issue}),e.jsx("div",{className:"text-sm text-gray-500",children:v.value})]}),e.jsx("td",{className:"p-3",children:e.jsx(fe,{variant:"primary",onClick:()=>{const c=Q(v.row);console.log("CSV Row Data:",c),u("UpdateCsvRecordModal",{rowNumber:c?.rowNumber??null,rowData:c?.data??{}})},children:"Update"})})]},R)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-3 text-gray-400 italic text-center",children:"No errors"})})})]})})})})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(fe,{onClick:()=>{A(2)},variant:"light",children:[e.jsx(Oe,{className:"inline-block w-4 h-4 mr-1"}),"Previous"]}),e.jsxs(fe,{onClick:()=>{A(4)},variant:"light",children:["Next ",e.jsx(Ne,{className:"inline-block w-4 h-4 ml-1"})]})]})]})}function tt(){const{csvData:m,csvImages:b,mapping:p,warnings:u,errors:E,setCsvImportProgress:O}=me(),[k,f]=Y.useState(!1),_=E.map(D=>D.row),i=u.map(D=>D.row),A=(m?.length||0)-new Set([..._,...i]).size,Q=u.length,v=E.length,R=m.map((D,P)=>{const ne=P+1;if(_.includes(ne))return null;const T={};Object.entries(p||{}).forEach(([oe,Z])=>{T[oe]=D[Z]??""});const ae=T.profile_image_name;if(ae&&b&&b.length>0){const oe=b.find(Z=>Z.name===ae);oe&&(T.profile_image_file=oe)}return T}).filter(Boolean);console.log("✅ Records ready to send to backend:",R,b);const c=async()=>{if(!R||R.length===0){W.error("No data to submit.");return}f(!0);try{const D=await Promise.all(R.map(async ne=>{let T=null;return ne.profile_image_file instanceof File&&(T=await new Promise((ae,oe)=>{const Z=new FileReader;Z.readAsDataURL(ne.profile_image_file),Z.onload=()=>ae(Z.result),Z.onerror=F=>oe(F)})),{...ne,profile_image_base64:T}}));console.log("📤 Data to send to backend:",D);const P=await axios.post("/cards/bulk-update",{cards:D});console.log("📦 Backend Response:",P.data),P.data.success?(W.success(P.data.message||"Cards updated successfully!"),O(1),setTimeout(()=>{Me.reload()},1e3)):W.error(P.data.message||"Something went wrong.")}catch(D){console.error("❌ Axios Error:",D),W.error("Failed to submit card updates.")}finally{f(!1)}};return e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-xl border border-[#EAECF0]",children:[e.jsx(ye,{title:"Confirm Employee Data",description:"Once confirmed the validated records will be inserted in the database."}),e.jsxs("div",{className:"flex flex-col gap-5 mb-1",children:[e.jsx("div",{className:"rounded-lg p-3 bg-[#F9FAFB]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/assets/images/success-icon.svg",alt:"Success",className:"h-6 w-6"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h4",{className:"font-semibold text-sm text-[#3F3F46]",children:[A," records validated successfully"]}),e.jsx("p",{className:"text-sm text-[#667085]",children:"These records are ready for import"})]})]})}),e.jsx("div",{className:"rounded-lg p-3 bg-[#F9FAFB]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/assets/images/warning-icon.svg",alt:"Warning",className:"h-6 w-6"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h4",{className:"font-semibold text-sm text-[#3F3F46]",children:[Q," records with warnings"]}),e.jsx("p",{className:"text-sm text-[#667085]",children:"These records have issues but can still be imported."})]})]})}),e.jsx("div",{className:"rounded-lg p-3 bg-[#F9FAFB]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/assets/images/danger-icon.svg",alt:"danger",className:"h-6 w-6"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h4",{className:"font-semibold text-sm text-[#3F3F46]",children:[v," records with errors"]}),e.jsx("p",{className:"text-sm text-[#667085]",children:"These records will be ignored while importing."})]})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(fe,{onClick:()=>O(3),variant:"light",children:[e.jsx(Oe,{className:"inline-block w-4 h-4 mr-1"}),"Previous"]}),e.jsxs(fe,{onClick:c,variant:"primary",disabled:k,children:[k?"Submitting...":"Complete Import",e.jsx(Ne,{className:"inline-block w-4 h-4 ml-1"})]})]})]})}function ot(){const{setHeaderTitle:m,setHeaderText:b,csvImportProgress:p,progressSteps:u}=me();return Y.useEffect(()=>{m("Bulk Import"),b("")},[]),e.jsxs($e,{children:[e.jsx(Pe,{title:"Bulk Import"}),e.jsx("div",{className:"py-4 md:px-6 px-4 flex flex-col gap-6",children:e.jsx("div",{className:"md:p-6 p-4 rounded-xl bg-white border border-[#EAECF0]",children:e.jsxs("div",{className:"flex xl:flex-row flex-col md:gap-6 gap-4",children:[e.jsx("div",{className:"xl:w-[236px] w-full shrink-0",children:e.jsx(We,{})}),e.jsx("div",{className:"grow",children:p===1?e.jsx(Xe,{}):p===2?e.jsx(Ye,{}):p===3?e.jsx(et,{}):p===4?e.jsx(tt,{}):e.jsx("div",{children:"Refresh Page"})})]})})})]})}export{ot as default};
