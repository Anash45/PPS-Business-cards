import{g as Ce,c as me,j as e,h as qe,r as Y,z as W,B as fe,i as ye,k as Le,H as Te}from"./app-571qQf3A.js";import{X as Ie,A as Me}from"./AuthenticatedLayout-Co8XJb9F.js";import{u as Pe,U as $e,r as _e,C as Re}from"./index-B-zXYuw3.js";import"./ApplicationLogo-Bveg2Iib.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Oe=Ce("arrow-left",Ue);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ne=Ce("arrow-right",ze);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ve=Ce("check",Be);function He(){const{csvImportProgress:m,progressSteps:v}=me();return e.jsx("div",{className:"p-5 flex flex-col gap-4 font-public-sans bg-white border border-[#EAECF0] rounded-xl sticky top-4",children:v.map((p,h)=>{const E=p.number===m,q=p.number<m,C=h===v.length-1;return e.jsxs("div",{className:`flex gap-3 csv-progress-item transition-all cursor-pointer ${E?"cpi-active":""}`,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`h-6 w-6 relative rounded-full flex items-center justify-center 
                                    ${E||q?"bg-primary":"bg-[#F2F4F7]"} 
                                    cpi-circle transition-colors`,children:q?e.jsx(Ve,{className:"h-5 w-5 text-white"}):e.jsx("div",{className:"h-2 w-2 rounded-full bg-white"})}),!C&&e.jsx("div",{className:`cpi-line w-0.5 rounded-full h-9 my-1 transition-colors ${q||E?"bg-primary":"bg-[#F2F4F7]"}`})]}),e.jsxs("div",{className:"flex flex-col pt-1",children:[e.jsxs("p",{className:`text-xs leading-[18px] ${E||q?"text-primary":"text-[#667085]"}`,children:["Step ",p.number]}),e.jsx("p",{className:"font-semibold text-base text-black",children:p.label})]})]},p.number)})})}var je={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var We=je.exports,Fe;function Ke(){return Fe||(Fe=1,(function(m,v){((p,h)=>{m.exports=h()})(We,function p(){var h=typeof self<"u"?self:typeof window<"u"?window:h!==void 0?h:{},E,q=!h.document&&!!h.postMessage,C=h.IS_PAPA_WORKER||!1,f={},b=0,a={};function o(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(s){var r=le(s);r.chunkSize=parseInt(r.chunkSize),s.step||s.chunk||(r.chunkSize=null),this._handle=new d(r),(this._handle.streamer=this)._config=r}).call(this,t),this.parseChunk=function(s,r){var n=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<n){let y=this._config.newline;y||(i=this._config.quoteChar||'"',y=this._handle.guessLineEndings(s,i)),s=[...s.split(y).slice(n)].join(y)}this.isFirstChunk&&F(this._config.beforeFirstChunk)&&(i=this._config.beforeFirstChunk(s))!==void 0&&(s=i),this.isFirstChunk=!1,this._halted=!1;var n=this._partialLine+s,i=(this._partialLine="",this._handle.parse(n,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(s=i.meta.cursor,n=(this._finished||(this._partialLine=n.substring(s-this._baseIndex),this._baseIndex=s),i&&i.data&&(this._rowCount+=i.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),C)h.postMessage({results:i,workerId:a.WORKER_ID,finished:n});else if(F(this._config.chunk)&&!r){if(this._config.chunk(i,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=i=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(i.data),this._completeResults.errors=this._completeResults.errors.concat(i.errors),this._completeResults.meta=i.meta),this._completed||!n||!F(this._config.complete)||i&&i.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),n||i&&i.meta.paused||this._nextChunk(),i}this._halted=!0},this._sendError=function(s){F(this._config.error)?this._config.error(s):C&&this._config.error&&h.postMessage({workerId:a.WORKER_ID,error:s,finished:!1})}}function A(t){var s;(t=t||{}).chunkSize||(t.chunkSize=a.RemoteChunkSize),o.call(this,t),this._nextChunk=q?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(s=new XMLHttpRequest,this._config.withCredentials&&(s.withCredentials=this._config.withCredentials),q||(s.onload=Z(this._chunkLoaded,this),s.onerror=Z(this._chunkError,this)),s.open(this._config.downloadRequestBody?"POST":"GET",this._input,!q),this._config.downloadRequestHeaders){var r,n=this._config.downloadRequestHeaders;for(r in n)s.setRequestHeader(r,n[r])}var i;this._config.chunkSize&&(i=this._start+this._config.chunkSize-1,s.setRequestHeader("Range","bytes="+this._start+"-"+i));try{s.send(this._config.downloadRequestBody)}catch(y){this._chunkError(y.message)}q&&s.status===0&&this._chunkError()}},this._chunkLoaded=function(){s.readyState===4&&(s.status<200||400<=s.status?this._chunkError():(this._start+=this._config.chunkSize||s.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(s),this.parseChunk(s.responseText)))},this._chunkError=function(r){r=s.statusText||r,this._sendError(new Error(r))}}function Q(t){(t=t||{}).chunkSize||(t.chunkSize=a.LocalChunkSize),o.call(this,t);var s,r,n=typeof FileReader<"u";this.stream=function(i){this._input=i,r=i.slice||i.webkitSlice||i.mozSlice,n?((s=new FileReader).onload=Z(this._chunkLoaded,this),s.onerror=Z(this._chunkError,this)):s=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var i=this._input,y=(this._config.chunkSize&&(y=Math.min(this._start+this._config.chunkSize,this._input.size),i=r.call(i,this._start,y)),s.readAsText(i,this._config.encoding));n||this._chunkLoaded({target:{result:y}})},this._chunkLoaded=function(i){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(i.target.result)},this._chunkError=function(){this._sendError(s.error)}}function _(t){var s;o.call(this,t=t||{}),this.stream=function(r){return s=r,this._nextChunk()},this._nextChunk=function(){var r,n;if(!this._finished)return r=this._config.chunkSize,s=r?(n=s.substring(0,r),s.substring(r)):(n=s,""),this._finished=!s,this.parseChunk(n)}}function R(t){o.call(this,t=t||{});var s=[],r=!0,n=!1;this.pause=function(){o.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){o.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(i){this._input=i,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&s.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),s.length?this.parseChunk(s.shift()):r=!0},this._streamData=Z(function(i){try{s.push(typeof i=="string"?i:i.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(s.shift()))}catch(y){this._streamError(y)}},this),this._streamError=Z(function(i){this._streamCleanUp(),this._sendError(i)},this),this._streamEnd=Z(function(){this._streamCleanUp(),n=!0,this._streamData("")},this),this._streamCleanUp=Z(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function d(t){var s,r,n,i,y=Math.pow(2,53),B=-y,te=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,se=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,w=this,P=0,c=0,G=!1,g=!1,j=[],l={data:[],errors:[],meta:{}};function V(N){return t.skipEmptyLines==="greedy"?N.join("").trim()==="":N.length===1&&N[0].length===0}function z(){if(l&&n&&(re("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),n=!1),t.skipEmptyLines&&(l.data=l.data.filter(function(u){return!V(u)})),J()){let u=function(U,H){F(t.transformHeader)&&(U=t.transformHeader(U,H)),j.push(U)};if(l)if(Array.isArray(l.data[0])){for(var N=0;J()&&N<l.data.length;N++)l.data[N].forEach(u);l.data.splice(0,1)}else l.data.forEach(u)}function S(u,U){for(var H=t.header?{}:[],I=0;I<u.length;I++){var D=I,k=u[I],k=((ae,x)=>(T=>(t.dynamicTypingFunction&&t.dynamicTyping[T]===void 0&&(t.dynamicTyping[T]=t.dynamicTypingFunction(T)),(t.dynamicTyping[T]||t.dynamicTyping)===!0))(ae)?x==="true"||x==="TRUE"||x!=="false"&&x!=="FALSE"&&((T=>{if(te.test(T)&&(T=parseFloat(T),B<T&&T<y))return 1})(x)?parseFloat(x):se.test(x)?new Date(x):x===""?null:x):x)(D=t.header?I>=j.length?"__parsed_extra":j[I]:D,k=t.transform?t.transform(k,D):k);D==="__parsed_extra"?(H[D]=H[D]||[],H[D].push(k)):H[D]=k}return t.header&&(I>j.length?re("FieldMismatch","TooManyFields","Too many fields: expected "+j.length+" fields but parsed "+I,c+U):I<j.length&&re("FieldMismatch","TooFewFields","Too few fields: expected "+j.length+" fields but parsed "+I,c+U)),H}var $;l&&(t.header||t.dynamicTyping||t.transform)&&($=1,!l.data.length||Array.isArray(l.data[0])?(l.data=l.data.map(S),$=l.data.length):l.data=S(l.data,0),t.header&&l.meta&&(l.meta.fields=j),c+=$)}function J(){return t.header&&j.length===0}function re(N,S,$,u){N={type:N,code:S,message:$},u!==void 0&&(N.row=u),l.errors.push(N)}F(t.step)&&(i=t.step,t.step=function(N){l=N,J()?z():(z(),l.data.length!==0&&(P+=N.data.length,t.preview&&P>t.preview?r.abort():(l.data=l.data[0],i(l,w))))}),this.parse=function(N,S,$){var u=t.quoteChar||'"',u=(t.newline||(t.newline=this.guessLineEndings(N,u)),n=!1,t.delimiter?F(t.delimiter)&&(t.delimiter=t.delimiter(N),l.meta.delimiter=t.delimiter):((u=((U,H,I,D,k)=>{var ae,x,T,he;k=k||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var ge=0;ge<k.length;ge++){for(var oe,ve=k[ge],X=0,de=0,K=0,ee=(T=void 0,new M({comments:D,delimiter:ve,newline:H,preview:10}).parse(U)),ue=0;ue<ee.data.length;ue++)I&&V(ee.data[ue])?K++:(oe=ee.data[ue].length,de+=oe,T===void 0?T=oe:0<oe&&(X+=Math.abs(oe-T),T=oe));0<ee.data.length&&(de/=ee.data.length-K),(x===void 0||X<=x)&&(he===void 0||he<de)&&1.99<de&&(x=X,ae=ve,he=de)}return{successful:!!(t.delimiter=ae),bestDelimiter:ae}})(N,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=u.bestDelimiter:(n=!0,t.delimiter=a.DefaultDelimiter),l.meta.delimiter=t.delimiter),le(t));return t.preview&&t.header&&u.preview++,s=N,r=new M(u),l=r.parse(s,S,$),z(),G?{meta:{paused:!0}}:l||{meta:{paused:!1}}},this.paused=function(){return G},this.pause=function(){G=!0,r.abort(),s=F(t.chunk)?"":s.substring(r.getCharIndex())},this.resume=function(){w.streamer._halted?(G=!1,w.streamer.parseChunk(s,!0)):setTimeout(w.resume,3)},this.aborted=function(){return g},this.abort=function(){g=!0,r.abort(),l.meta.aborted=!0,F(t.complete)&&t.complete(l),s=""},this.guessLineEndings=function(U,u){U=U.substring(0,1048576);var u=new RegExp(O(u)+"([^]*?)"+O(u),"gm"),$=(U=U.replace(u,"")).split("\r"),u=U.split(`
`),U=1<u.length&&u[0].length<$[0].length;if($.length===1||U)return`
`;for(var H=0,I=0;I<$.length;I++)$[I][0]===`
`&&H++;return H>=$.length/2?`\r
`:"\r"}}function O(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function M(t){var s=(t=t||{}).delimiter,r=t.newline,n=t.comments,i=t.step,y=t.preview,B=t.fastMode,te=null,se=!1,w=t.quoteChar==null?'"':t.quoteChar,P=w;if(t.escapeChar!==void 0&&(P=t.escapeChar),(typeof s!="string"||-1<a.BAD_DELIMITERS.indexOf(s))&&(s=","),n===s)throw new Error("Comment character same as delimiter");n===!0?n="#":(typeof n!="string"||-1<a.BAD_DELIMITERS.indexOf(n))&&(n=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var c=0,G=!1;this.parse=function(g,j,l){if(typeof g!="string")throw new Error("Input must be a string");var V=g.length,z=s.length,J=r.length,re=n.length,N=F(i),S=[],$=[],u=[],U=c=0;if(!g)return X();if(B||B!==!1&&g.indexOf(w)===-1){for(var H=g.split(r),I=0;I<H.length;I++){if(u=H[I],c+=u.length,I!==H.length-1)c+=r.length;else if(l)return X();if(!n||u.substring(0,re)!==n){if(N){if(S=[],he(u.split(s)),de(),G)return X()}else he(u.split(s));if(y&&y<=I)return S=S.slice(0,y),X(!0)}}return X()}for(var D=g.indexOf(s,c),k=g.indexOf(r,c),ae=new RegExp(O(P)+O(w),"g"),x=g.indexOf(w,c);;)if(g[c]===w)for(x=c,c++;;){if((x=g.indexOf(w,x+1))===-1)return l||$.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:S.length,index:c}),oe();if(x===V-1)return oe(g.substring(c,x).replace(ae,w));if(w===P&&g[x+1]===P)x++;else if(w===P||x===0||g[x-1]!==P){D!==-1&&D<x+1&&(D=g.indexOf(s,x+1));var T=ge((k=k!==-1&&k<x+1?g.indexOf(r,x+1):k)===-1?D:Math.min(D,k));if(g.substr(x+1+T,z)===s){u.push(g.substring(c,x).replace(ae,w)),g[c=x+1+T+z]!==w&&(x=g.indexOf(w,c)),D=g.indexOf(s,c),k=g.indexOf(r,c);break}if(T=ge(k),g.substring(x+1+T,x+1+T+J)===r){if(u.push(g.substring(c,x).replace(ae,w)),ve(x+1+T+J),D=g.indexOf(s,c),x=g.indexOf(w,c),N&&(de(),G))return X();if(y&&S.length>=y)return X(!0);break}$.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:S.length,index:c}),x++}}else if(n&&u.length===0&&g.substring(c,c+re)===n){if(k===-1)return X();c=k+J,k=g.indexOf(r,c),D=g.indexOf(s,c)}else if(D!==-1&&(D<k||k===-1))u.push(g.substring(c,D)),c=D+z,D=g.indexOf(s,c);else{if(k===-1)break;if(u.push(g.substring(c,k)),ve(k+J),N&&(de(),G))return X();if(y&&S.length>=y)return X(!0)}return oe();function he(K){S.push(K),U=c}function ge(K){var ee=0;return ee=K!==-1&&(K=g.substring(x+1,K))&&K.trim()===""?K.length:ee}function oe(K){return l||(K===void 0&&(K=g.substring(c)),u.push(K),c=V,he(u),N&&de()),X()}function ve(K){c=K,he(u),u=[],k=g.indexOf(r,c)}function X(K){if(t.header&&!j&&S.length&&!se){var ee=S[0],ue=Object.create(null),ke=new Set(ee);let Ee=!1;for(let xe=0;xe<ee.length;xe++){let ce=ee[xe];if(ue[ce=F(t.transformHeader)?t.transformHeader(ce,xe):ce]){let be,Se=ue[ce];for(;be=ce+"_"+Se,Se++,ke.has(be););ke.add(be),ee[xe]=be,ue[ce]++,Ee=!0,(te=te===null?{}:te)[be]=ce}else ue[ce]=1,ee[xe]=ce;ke.add(ce)}Ee&&console.warn("Duplicate headers found and renamed."),se=!0}return{data:S,errors:$,meta:{delimiter:s,linebreak:r,aborted:G,truncated:!!K,cursor:U+(j||0),renamedHeaders:te}}}function de(){i(X()),S=[],$=[]}},this.abort=function(){G=!0},this.getCharIndex=function(){return c}}function ie(t){var s=t.data,r=f[s.workerId],n=!1;if(s.error)r.userError(s.error,s.file);else if(s.results&&s.results.data){var i={abort:function(){n=!0,L(s.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ne,resume:ne};if(F(r.userStep)){for(var y=0;y<s.results.data.length&&(r.userStep({data:s.results.data[y],errors:s.results.errors,meta:s.results.meta},i),!n);y++);delete s.results}else F(r.userChunk)&&(r.userChunk(s.results,i,s.file),delete s.results)}s.finished&&!n&&L(s.workerId,s.results)}function L(t,s){var r=f[t];F(r.userComplete)&&r.userComplete(s),r.terminate(),delete f[t]}function ne(){throw new Error("Not implemented.")}function le(t){if(typeof t!="object"||t===null)return t;var s,r=Array.isArray(t)?[]:{};for(s in t)r[s]=le(t[s]);return r}function Z(t,s){return function(){t.apply(s,arguments)}}function F(t){return typeof t=="function"}return a.parse=function(t,s){var r=(s=s||{}).dynamicTyping||!1;if(F(r)&&(s.dynamicTypingFunction=r,r={}),s.dynamicTyping=r,s.transform=!!F(s.transform)&&s.transform,!s.worker||!a.WORKERS_SUPPORTED)return r=null,a.NODE_STREAM_INPUT,typeof t=="string"?(t=(n=>n.charCodeAt(0)!==65279?n:n.slice(1))(t),r=new(s.download?A:_)(s)):t.readable===!0&&F(t.read)&&F(t.on)?r=new R(s):(h.File&&t instanceof File||t instanceof Object)&&(r=new Q(s)),r.stream(t);(r=(()=>{var n;return!!a.WORKERS_SUPPORTED&&(n=(()=>{var i=h.URL||h.webkitURL||null,y=p.toString();return a.BLOB_URL||(a.BLOB_URL=i.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",y,")();"],{type:"text/javascript"})))})(),(n=new h.Worker(n)).onmessage=ie,n.id=b++,f[n.id]=n)})()).userStep=s.step,r.userChunk=s.chunk,r.userComplete=s.complete,r.userError=s.error,s.step=F(s.step),s.chunk=F(s.chunk),s.complete=F(s.complete),s.error=F(s.error),delete s.worker,r.postMessage({input:t,config:s,workerId:r.id})},a.unparse=function(t,s){var r=!1,n=!0,i=",",y=`\r
`,B='"',te=B+B,se=!1,w=null,P=!1,c=((()=>{if(typeof s=="object"){if(typeof s.delimiter!="string"||a.BAD_DELIMITERS.filter(function(j){return s.delimiter.indexOf(j)!==-1}).length||(i=s.delimiter),typeof s.quotes!="boolean"&&typeof s.quotes!="function"&&!Array.isArray(s.quotes)||(r=s.quotes),typeof s.skipEmptyLines!="boolean"&&typeof s.skipEmptyLines!="string"||(se=s.skipEmptyLines),typeof s.newline=="string"&&(y=s.newline),typeof s.quoteChar=="string"&&(B=s.quoteChar),typeof s.header=="boolean"&&(n=s.header),Array.isArray(s.columns)){if(s.columns.length===0)throw new Error("Option columns is empty");w=s.columns}s.escapeChar!==void 0&&(te=s.escapeChar+B),s.escapeFormulae instanceof RegExp?P=s.escapeFormulae:typeof s.escapeFormulae=="boolean"&&s.escapeFormulae&&(P=/^[=+\-@\t\r].*$/)}})(),new RegExp(O(B),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return G(null,t,se);if(typeof t[0]=="object")return G(w||Object.keys(t[0]),t,se)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||w),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),G(t.fields||[],t.data||[],se);throw new Error("Unable to serialize unrecognized input");function G(j,l,V){var z="",J=(typeof j=="string"&&(j=JSON.parse(j)),typeof l=="string"&&(l=JSON.parse(l)),Array.isArray(j)&&0<j.length),re=!Array.isArray(l[0]);if(J&&n){for(var N=0;N<j.length;N++)0<N&&(z+=i),z+=g(j[N],N);0<l.length&&(z+=y)}for(var S=0;S<l.length;S++){var $=(J?j:l[S]).length,u=!1,U=J?Object.keys(l[S]).length===0:l[S].length===0;if(V&&!J&&(u=V==="greedy"?l[S].join("").trim()==="":l[S].length===1&&l[S][0].length===0),V==="greedy"&&J){for(var H=[],I=0;I<$;I++){var D=re?j[I]:I;H.push(l[S][D])}u=H.join("").trim()===""}if(!u){for(var k=0;k<$;k++){0<k&&!U&&(z+=i);var ae=J&&re?j[k]:k;z+=g(l[S][ae],k)}S<l.length-1&&(!V||0<$&&!U)&&(z+=y)}}return z}function g(j,l){var V,z;return j==null?"":j.constructor===Date?JSON.stringify(j).slice(1,25):(z=!1,P&&typeof j=="string"&&P.test(j)&&(j="'"+j,z=!0),V=j.toString().replace(c,te),(z=z||r===!0||typeof r=="function"&&r(j,l)||Array.isArray(r)&&r[l]||((J,re)=>{for(var N=0;N<re.length;N++)if(-1<J.indexOf(re[N]))return!0;return!1})(V,a.BAD_DELIMITERS)||-1<V.indexOf(i)||V.charAt(0)===" "||V.charAt(V.length-1)===" ")?B+V+B:V)}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!q&&!!h.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=M,a.ParserHandle=d,a.NetworkStreamer=A,a.FileStreamer=Q,a.StringStreamer=_,a.ReadableStreamStreamer=R,h.jQuery&&((E=h.jQuery).fn.parse=function(t){var s=t.config||{},r=[];return this.each(function(y){if(!(E(this).prop("tagName").toUpperCase()==="INPUT"&&E(this).attr("type").toLowerCase()==="file"&&h.FileReader)||!this.files||this.files.length===0)return!0;for(var B=0;B<this.files.length;B++)r.push({file:this.files[B],inputElem:this,instanceConfig:E.extend({},s)})}),n(),this;function n(){if(r.length===0)F(t.complete)&&t.complete();else{var y,B,te,se,w=r[0];if(F(t.before)){var P=t.before(w.file,w.inputElem);if(typeof P=="object"){if(P.action==="abort")return y="AbortError",B=w.file,te=w.inputElem,se=P.reason,void(F(t.error)&&t.error({name:y},B,te,se));if(P.action==="skip")return void i();typeof P.config=="object"&&(w.instanceConfig=E.extend(w.instanceConfig,P.config))}else if(P==="skip")return void i()}var c=w.instanceConfig.complete;w.instanceConfig.complete=function(G){F(c)&&c(G,w.file,w.inputElem),i()},a.parse(w.file,w.instanceConfig)}}function i(){r.splice(0,1),n()}}),C&&(h.onmessage=function(t){t=t.data,a.WORKER_ID===void 0&&t&&(a.WORKER_ID=t.workerId),typeof t.input=="string"?h.postMessage({workerId:a.WORKER_ID,results:a.parse(t.input,t.config),finished:!0}):(h.File&&t.input instanceof File||t.input instanceof Object)&&(t=a.parse(t.input,t.config))&&h.postMessage({workerId:a.WORKER_ID,results:t,finished:!0})}),(A.prototype=Object.create(o.prototype)).constructor=A,(Q.prototype=Object.create(o.prototype)).constructor=Q,(_.prototype=Object.create(_.prototype)).constructor=_,(R.prototype=Object.create(o.prototype)).constructor=R,a})})(je)),je.exports}var Qe=Ke();const Ae=qe(Qe);function De({type:m="csv",files:v=[],setFiles:p,title:h="Upload Files",subtitle:E="Drag and drop or click to upload"}){const q=Y.useCallback(a=>{if(!Array.isArray(a)||a.length===0){W.error("No valid file uploaded.");return}if(m==="csv"){const o=a[0];if(!(!!o&&(o.type==="text/csv"||o.name?.toLowerCase().endsWith(".csv")))){W.error("Please upload a valid CSV file."),p([]);return}o.key=`${o.name}-${o.lastModified}-${Math.random()}`,p([o]),W.success("CSV file uploaded successfully!")}else{const o=a.filter(d=>d.size>5242880?(W.error(`${d.name} exceeds 5 MB limit.`),!1):!0);if(o.length===0){W.error("No valid images uploaded.");return}const A=new Set(v.map(d=>d.name.toLowerCase())),Q=o.filter(d=>A.has(d.name.toLowerCase()));Q.length>0&&W.error(`${Q.length} duplicate image${Q.length>1?"s":""} skipped: ${Q.map(d=>d.name).join(", ")}`);const _=o.filter(d=>!A.has(d.name.toLowerCase()));if(_.length===0)return;_.forEach(d=>{d.key=`${d.name}-${d.lastModified}-${Math.random()}`});const R=[...v,..._];p(R),W.success(`${_.length} image(s) added!`)}},[m,v,p]),{getRootProps:C,getInputProps:f,isDragActive:b}=Pe({onDrop:q,multiple:m==="images",accept:m==="csv"?{"text/csv":[".csv"]}:{"image/*":[".jpg",".jpeg",".png",".webp",".svg"]}});return e.jsx("div",{className:"flex flex-col gap-3 w-full",children:e.jsxs("div",{...C(),className:`border-2 border-dashed rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all
                    ${b?"border-primary bg-[#F9FAFB]":"border-[#D0D5DD]"}
                    w-full h-48 text-center p-3
                `,children:[e.jsx("input",{...f()}),e.jsxs("div",{className:"flex flex-col gap-1 items-center justify-center font-public-sans max-w-[420px]",children:[e.jsx($e,{className:"h-5 w-5 text-[#27272A]"}),e.jsx("p",{className:"text-sm font-semibold text-black",children:h}),e.jsx("p",{className:"text-sm text-[#667085]",children:E})]})]})})}function we({title:m="",description:v=""}){return e.jsxs("div",{className:"space-y-2 font-jakarta-sans",children:[m&&e.jsx("h2",{className:"text-xl font-semibold text-black leading-[120%]",children:m}),v&&e.jsx("p",{className:"text-base text-[#667085] leading-[22px]",children:v})]})}const pe=[{name:"card_code",required:!0},{name:"salutation",required:!0},{name:"title",required:!1},{name:"first_name",required:!0,validate:"nonEmpty"},{name:"last_name",required:!0,validate:"nonEmpty"},{name:"position",required:!0},{name:"department",required:!0},{name:"profile_image_name",required:!1},{name:"card_email_1",required:!1,validate:"email"},{name:"card_email_2",required:!1,validate:"email"},{name:"card_email_3",required:!1,validate:"email"},{name:"card_email_4",required:!1,validate:"email"},{name:"card_phone_1",required:!1,validate:"phone"},{name:"card_phone_2",required:!1,validate:"phone"},{name:"card_phone_3",required:!1,validate:"phone"},{name:"card_phone_4",required:!1,validate:"phone"},{name:"card_address_1",required:!1},{name:"card_address_2",required:!1},{name:"card_address_3",required:!1},{name:"card_address_4",required:!1},{name:"card_button_text_1",required:!1},{name:"card_button_link_1",required:!1,validate:"url"},{name:"card_button_text_2",required:!1},{name:"card_button_link_2",required:!1,validate:"url"},{name:"card_button_text_3",required:!1},{name:"card_button_link_3",required:!1,validate:"url"},{name:"card_button_text_4",required:!1},{name:"card_button_link_4",required:!1,validate:"url"},{name:"social_link_1",required:!1,validate:"url"},{name:"social_link_2",required:!1,validate:"url"},{name:"social_link_3",required:!1,validate:"url"},{name:"social_link_4",required:!1,validate:"url"},{name:"social_link_5",required:!1,validate:"url"}];function Ze(){const{setCsvFile:m,setCsvData:v}=me(),[p,h]=Y.useState([]),[E,q]=Y.useState(null),C=pe.filter(o=>o.required).map(o=>o.name);console.log("Required CSV Fields:",C);const f=Y.useCallback(()=>{h([]),m(null),v([])},[m,v]),b=Y.useCallback(o=>{const A=C.filter(Q=>!o.includes(Q));return console.log("CSV Headers:",o,C,A),A.length>0?(q(`Missing required fields: ${A.join(", ")}`),W.error("Some required fields are missing in the CSV."),!1):(q(null),!0)},[C]),a=Y.useCallback(o=>{if(!o||o.length===0){f();return}const A=o[0];if(!(A&&(A.type==="text/csv"||A.name?.toLowerCase().endsWith(".csv")))){W.error("Please upload a valid CSV file."),f();return}h([A]),m(A),Ae.parse(A,{header:!0,skipEmptyLines:!0,preview:2,complete:_=>{const R=_.meta.fields||[];if(!b(R)){f();return}Ae.parse(A,{header:!0,skipEmptyLines:!0,complete:d=>{const O=d.data||[];if(O.length===0){W.error("The CSV file appears to be empty."),v([]);return}v(O),console.log("Parsed CSV Data:",O.length)},error:d=>{console.error("CSV Parse Error:",d),W.error("Error parsing CSV file.")}})},error:_=>{console.error("CSV Header Parse Error:",_),W.error("Unable to read CSV headers.")}})},[f,m,v,b]);return e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-xl border border-[#EAECF0]",children:[E&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm px-4 py-2 rounded-md",children:E}),e.jsx(we,{title:"Import Employee Data",description:"Follow these steps to import employee data via CSV file"}),e.jsx(De,{title:"Drag CSV here or click to select a file.",subtitle:"UTF-8, with header. Example: salutation, title, first_name, last_name, position, department, profile_image_name etc",type:"csv",files:p,setFiles:a}),p.length>0&&e.jsxs("div",{className:"border border-[#EAECF0] bg-white rounded-md p-3 text-sm text-[#101828] flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Uploaded file:"})," ",e.jsx("span",{className:"text-[#475467]",children:p[0].name})]}),e.jsx(Ie,{onClick:f,className:"h-4 w-4 text-[#98A2B3] cursor-pointer hover:text-red-500 transition-colors"})]})]})}function Je(){const{setCsvImages:m,csvData:v}=me(),[p,h]=Y.useState([]),[E,q]=Y.useState(0);Y.useEffect(()=>{m(p)},[p,m]),Y.useEffect(()=>{if(!v?.length||!p.length){q(0);return}const f=v.map(o=>(o.profile_image_name||"").trim().toLowerCase()).filter(Boolean),a=p.map(o=>o.name.trim().toLowerCase()).filter(o=>f.includes(o));q(a.length)},[v,p]);const C=Y.useCallback(f=>{h(b=>{const a=b.filter(o=>o.key!==f);return W.success("Image removed"),a})},[h]);return console.log("📁 Current CSV Images:",p),console.log("📊 CSV Data:",v),console.log("✅ Matched Count:",E),e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-xl border border-[#EAECF0]",children:[v?.length>0&&e.jsxs("div",{className:"text-sm font-medium text-green-600",children:["Matched Images: ",E," / ",v.length," ",e.jsx("span",{className:"text-[10px] italic text-gray-500",children:"(Unmatched images will be ignored)"})]}),e.jsx(we,{title:"Upload Photos",description:'Upload multiple images matching the names listed in your CSV under the "profile_image_name" column.'}),e.jsx(De,{title:"Drag and drop images here or click to select.",subtitle:"Max size 5 MB each. Accepted formats: jpg, jpeg, png, webp, svg.",type:"images",files:p,setFiles:h}),p.length>0&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 mt-3",children:p.map(f=>{const b=f.name.trim().toLowerCase(),o=(v?.map(A=>(A.profile_image_name||"").trim().toLowerCase()).filter(Boolean)||[]).includes(b);return e.jsxs("div",{className:`relative border rounded-lg overflow-hidden group transition
                        ${o?"bg-green-50 border-green-400":"bg-white border-gray-200"}`,children:[e.jsx("img",{src:URL.createObjectURL(f),alt:f.name,className:"object-cover w-full h-32"}),e.jsx("button",{type:"button",onClick:()=>C(f.key),className:"absolute top-1 right-1 bg-white/80 hover:bg-red-500 hover:text-white rounded-full p-1 transition",children:e.jsx(Ie,{className:"w-4 h-4"})}),e.jsx("p",{className:`text-xs text-center truncate px-1 py-1 border-t transition
                            ${o?"bg-green-100 text-green-700 border-green-300":"bg-gray-50 text-gray-600 border-gray-200"}`,children:f.name})]},f.key)})})]})}function Ge(){const{setCsvImportProgress:m,csvData:v}=me();return e.jsxs("div",{className:"flex flex-col lg:gap-6 gap-5",children:[e.jsx(Ze,{}),e.jsx(Je,{}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs(fe,{variant:"light",disabled:v.length===0,onClick:()=>m(2),children:["Next ",e.jsx(Ne,{className:"inline-block w-4 h-4 ml-1"})]})})]})}function Xe(){const{csvData:m,setCsvImportProgress:v,mapping:p,setMapping:h}=me(),E=m?.length>0?Object.keys(m[0]):[];Y.useEffect(()=>{!m?.length||!pe?.length||h(C=>{if(Object.keys(C).length>0)return C;const f={};return Object.keys(m[0]).forEach(b=>{const a=pe.find(o=>o.name.toLowerCase()===b.toLowerCase());f[b]=a?a.name:""}),f})},[m,pe]);const q=(C,f)=>{h(b=>({...b,[C]:f}))};return m?.length?e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-xl border border-[#EAECF0]",children:[e.jsx(we,{title:"Mapping Employee Data",description:"Map your CSV columns to the appropriate fields in our system."}),e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg overflow-hidden text-sm bg-gray-50",children:[e.jsx("thead",{className:"bg-primary border-b border-primary",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-medium  text-white w-1/4",children:"CSV Column"}),e.jsx("th",{className:"text-left p-3 font-medium  text-white w-1/3",children:"Map To"}),e.jsx("th",{className:"text-left p-3 font-medium  text-white",children:"Sample Data"})]})}),e.jsx("tbody",{children:E.map(C=>{const f=Array.from({length:5},(b,a)=>m[a]?.[C]||"");return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-green-50 transition-colors",children:[e.jsx("td",{className:"p-3 font-medium text-gray-800",children:ye(C)}),e.jsx("td",{className:"p-3",children:e.jsxs("select",{value:p[C]||"",onChange:b=>q(C,b.target.value),className:"border border-gray-300 rounded-md p-2 text-sm w-full focus:ring-2 focus:ring-primary focus:outline-none",children:[e.jsx("option",{value:"",children:"-- Select Field --"}),pe.map(b=>e.jsxs("option",{value:b.name,children:[ye(b.name),b.required?" *":""]},b.name))]})}),e.jsx("td",{className:"p-3 text-gray-600 text-xs",children:e.jsx("div",{className:"flex flex-col gap-0.5",children:f.map((b,a)=>e.jsx("div",{className:"truncate max-w-[250px]",children:b?.toString().trim()?b:"-"},a))})})]},C)})})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(fe,{onClick:()=>{const C=Object.values(p).filter(Boolean),f=C.filter((a,o)=>C.indexOf(a)!==o);if(f.length>0){W.error(`Duplicate mapping detected: "${[...new Set(f)].join('", "')}" are assigned to multiple CSV columns.`),console.log("❌ Duplicate mappings:",f);return}const b=pe.filter(a=>a.required).filter(a=>!C.includes(a.name));if(b.length>0){W.error(`Required fields missing: ${b.map(a=>ye(a.name)).join(", ")}`),console.log("❌ Missing required fields:",b);return}v(3),console.log("✅ Final Mapping:",p)},variant:"light",children:["Next ",e.jsx(Ne,{className:"inline-block w-4 h-4 ml-1"})]})})]}):e.jsx("div",{className:"text-center text-gray-500 p-5",children:"⚠️ Please upload a CSV file first."})}function Ye(){const[m,v]=Y.useState(1),p=_=>v(m===_?0:_),{openModal:h}=Le(),{csvData:E,mapping:q,loadingImport:C,warnings:f,setWarnings:b,errors:a,setErrors:o,setCsvImportProgress:A}=me();Y.useEffect(()=>{if(!E||E.length===0){b([]),o([]);return}const _=[],R=[];E.forEach((d,O)=>{pe.forEach(M=>{const ie=q[M.name],L=ie?d[ie]:"";M.required&&(L===void 0||L==="")&&_.push({row:O+1,name:`${d.first_name||""} ${d.last_name||""}`,field:M.name,issue:"Missing value",value:L||""}),L&&(M.validate==="nonEmpty"&&L.trim()===""&&R.push({row:O+1,name:`${d.first_name||""} ${d.last_name||""}`,field:M.name,issue:"Value required",value:L}),M.validate==="email"&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(L)||R.push({row:O+1,name:`${d.first_name||""} ${d.last_name||""}`,field:M.name,issue:"Invalid email",value:L})),M.validate==="phone"&&(/^\+?[0-9\s\-()]{6,20}$/.test(L)||R.push({row:O+1,name:`${d.first_name||""} ${d.last_name||""}`,field:M.name,issue:"Invalid phone",value:L})),M.validate==="url"&&(/^(https?:\/\/)[^\s/$.?#].[^\s]*$/i.test(L)||R.push({row:O+1,name:`${d.first_name||""} ${d.last_name||""}`,field:M.name,issue:"Invalid URL",value:L})))})}),b(_),o(R)},[E,q]);function Q(_){if(!E||E.length===0)return null;const R=_-1;if(R<0||R>=E.length)return null;const d=E[R];return{rowNumber:R+1,data:d}}return e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-xl border border-[#EAECF0]",children:[e.jsx(we,{title:"Validation Employee Data",description:"Validating the fields in your CSV file to ensure data integrity before import."}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs(_e.Accordion,{className:"border-0 rounded-0",open:m===1,icon:e.jsx(Re,{className:`${m===1?"rotate-180":""} transition text-[#71717A]`}),children:[e.jsx(_e.AccordionHeader,{className:"rounded-lg p-3 border border-[#F2F4F7] bg-white transition duration-500",onClick:()=>p(1),children:e.jsx("div",{className:"flex flex-col gap-1.5 font-public-sans",children:e.jsxs("h5",{className:"font-semibold text-sm text-[#3F3F46] flex items-center",children:[e.jsx("img",{src:"/assets/images/warning-icon.svg",alt:"Icon",className:"h-6 w-6 mr-2"}),e.jsxs("span",{children:[f.length," record",f.length>1?"s":""," with warnings"]})]})})}),e.jsx(_e.AccordionBody,{className:"overflow-visible p-0",children:e.jsx("div",{className:"py-5",children:e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg overflow-hidden text-sm bg-gray-50",children:[e.jsx("thead",{className:"bg-primary border-b border-primary",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Row#"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Employee"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Field"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Issue"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Action"})]})}),e.jsx("tbody",{children:f.length>0?f.map((_,R)=>e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"p-3",children:_.row}),e.jsx("td",{className:"p-3",children:_.name||"-"}),e.jsx("td",{className:"p-3",children:ye(_.field)}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"py-1 px-2 w-fit font-medium rounded-md bg-orange-100 text-orange-800",children:_.issue}),e.jsx("div",{className:"text-sm text-gray-500",children:_.value})]}),e.jsx("td",{className:"p-3",children:e.jsx(fe,{variant:"primary",onClick:()=>{const d=Q(_.row);console.log("CSV Row Data:",d),h("UpdateCsvRecordModal",{rowNumber:d?.rowNumber??null,rowData:d?.data??{}})},children:"Update"})})]},R)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-3 text-gray-400 italic text-center",children:"No warnings"})})})]})})})})]}),e.jsxs(_e.Accordion,{className:"border-0 rounded-0",open:m===2,icon:e.jsx(Re,{className:`${m===2?"rotate-180":""} transition text-[#71717A]`}),children:[e.jsx(_e.AccordionHeader,{className:"rounded-lg p-3 border border-[#F2F4F7] bg-white transition duration-500",onClick:()=>p(2),children:e.jsx("div",{className:"flex flex-col gap-1.5 font-public-sans",children:e.jsxs("h5",{className:"font-semibold text-sm text-[#3F3F46] flex items-center",children:[e.jsx("img",{src:"/assets/images/danger-icon.svg",alt:"Icon",className:"h-6 w-6 mr-2"}),e.jsxs("span",{children:[a.length," record",a.length>1?"s":""," with errors"]})]})})}),e.jsx(_e.AccordionBody,{className:"overflow-visible p-0",children:e.jsx("div",{className:"py-5",children:e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg overflow-hidden text-sm bg-gray-50",children:[e.jsx("thead",{className:"bg-primary border-b border-primary",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Row#"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Employee"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Field"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Issue"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Action"})]})}),e.jsx("tbody",{children:a.length>0?a.map((_,R)=>e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"p-3",children:_.row}),e.jsx("td",{className:"p-3",children:_.name||"-"}),e.jsx("td",{className:"p-3",children:ye(_.field)}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"py-1 px-2 w-fit font-medium rounded-md bg-red-100 text-red-800",children:_.issue}),e.jsx("div",{className:"text-sm text-gray-500",children:_.value})]}),e.jsx("td",{className:"p-3",children:e.jsx(fe,{variant:"primary",onClick:()=>{const d=Q(_.row);console.log("CSV Row Data:",d),h("UpdateCsvRecordModal",{rowNumber:d?.rowNumber??null,rowData:d?.data??{}})},children:"Update"})})]},R)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-3 text-gray-400 italic text-center",children:"No errors"})})})]})})})})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(fe,{onClick:()=>{A(2)},variant:"light",children:[e.jsx(Oe,{className:"inline-block w-4 h-4 mr-1"}),"Previous"]}),e.jsxs(fe,{onClick:()=>{A(4)},variant:"light",children:["Next ",e.jsx(Ne,{className:"inline-block w-4 h-4 ml-1"})]})]})]})}function et(){const{csvData:m,csvImages:v,mapping:p,warnings:h,errors:E,setCsvImportProgress:q}=me(),[C,f]=Y.useState(!1),b=E.map(O=>O.row),a=h.map(O=>O.row),A=(m?.length||0)-new Set([...b,...a]).size,Q=h.length,_=E.length,R=m.map((O,M)=>{const ie=M+1;if(b.includes(ie))return null;const L={};Object.entries(p||{}).forEach(([le,Z])=>{L[le]=O[Z]??""});const ne=L.profile_image_name;if(ne&&v&&v.length>0){const le=v.find(Z=>Z.name===ne);le&&(L.profile_image_file=le)}return L}).filter(Boolean);console.log("✅ Records ready to send to backend:",R,v);const d=async()=>{if(!R||R.length===0){W.error("No data to submit.");return}f(!0);try{const O=await Promise.all(R.map(async ie=>{let L=null;return ie.profile_image_file instanceof File&&(L=await new Promise((ne,le)=>{const Z=new FileReader;Z.readAsDataURL(ie.profile_image_file),Z.onload=()=>ne(Z.result),Z.onerror=F=>le(F)})),{...ie,profile_image_base64:L}}));console.log("📤 Data to send to backend:",O);const M=await axios.post("/cards/bulk-update",{cards:O});console.log("📦 Backend Response:",M.data),M.data.success?W.success(M.data.message||"Cards updated successfully!"):W.error(M.data.message||"Something went wrong.")}catch(O){console.error("❌ Axios Error:",O),W.error("Failed to submit card updates.")}finally{f(!1)}};return e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-xl border border-[#EAECF0]",children:[e.jsx(we,{title:"Confirm Employee Data",description:"Once confirmed the validated records will be inserted in the database."}),e.jsxs("div",{className:"flex flex-col gap-5 mb-1",children:[e.jsx("div",{className:"rounded-lg p-3 bg-[#F9FAFB]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/assets/images/success-icon.svg",alt:"Success",className:"h-6 w-6"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h4",{className:"font-semibold text-sm text-[#3F3F46]",children:[A," records validated successfully"]}),e.jsx("p",{className:"text-sm text-[#667085]",children:"These records are ready for import"})]})]})}),e.jsx("div",{className:"rounded-lg p-3 bg-[#F9FAFB]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/assets/images/warning-icon.svg",alt:"Warning",className:"h-6 w-6"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h4",{className:"font-semibold text-sm text-[#3F3F46]",children:[Q," records with warnings"]}),e.jsx("p",{className:"text-sm text-[#667085]",children:"These records have issues but can still be imported."})]})]})}),e.jsx("div",{className:"rounded-lg p-3 bg-[#F9FAFB]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/assets/images/danger-icon.svg",alt:"danger",className:"h-6 w-6"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h4",{className:"font-semibold text-sm text-[#3F3F46]",children:[_," records with errors"]}),e.jsx("p",{className:"text-sm text-[#667085]",children:"These records will be ignored while importing."})]})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(fe,{onClick:()=>q(3),variant:"light",children:[e.jsx(Oe,{className:"inline-block w-4 h-4 mr-1"}),"Previous"]}),e.jsxs(fe,{onClick:d,variant:"primary",disabled:C,children:[C?"Submitting...":"Complete Import",e.jsx(Ne,{className:"inline-block w-4 h-4 ml-1"})]})]})]})}function it(){const{setHeaderTitle:m,setHeaderText:v,csvImportProgress:p,progressSteps:h}=me();return Y.useEffect(()=>{m("Bulk Import"),v("")},[]),e.jsxs(Me,{children:[e.jsx(Te,{title:"Bulk Import"}),e.jsx("div",{className:"py-4 md:px-6 px-4 flex flex-col gap-6",children:e.jsx("div",{className:"md:p-6 p-4 rounded-xl bg-white border border-[#EAECF0]",children:e.jsxs("div",{className:"flex xl:flex-row flex-col md:gap-6 gap-4",children:[e.jsx("div",{className:"xl:w-[236px] w-full shrink-0",children:e.jsx(He,{})}),e.jsx("div",{className:"grow",children:p===1?e.jsx(Ge,{}):p===2?e.jsx(Xe,{}):p===3?e.jsx(Ye,{}):p===4?e.jsx(et,{}):e.jsx("div",{children:"Refresh Page"})})]})})})]})}export{it as default};
