import{j as e,a as N,r,c as b,n as m,d as v}from"./app-CuDq6AIR.js";import{I as u}from"./InputLabel-BIqI0i-y.js";import{S as q}from"./SelectInput-CUll6jZD.js";import{T as x}from"./TextInput-CVFfh-ev.js";import L from"./CardsPreview-DqOOL2c0.js";import{B as g}from"./Button-g1ocwbaa.js";import"./createLucideIcon-CrJqq0G0.js";import"./dayjs.min-DuGlbgIO.js";let o=null;async function _(){if(o)return o;try{return o=await fetch("/vite.config.json").then(a=>a.json()),o}catch(a){return console.warn("Could not load config.json, using defaults",a),o={LINK_URL:"https://app.ppsbusinesscards.de"},o}}async function F(){return(await _()).LINK_URL}function S({className:a=""}){return e.jsx("div",{className:`border-b border-b-[#EAECF0] ${a}`})}function G({previewCards:a,setPreviewCards:i}){const{companies:l}=N().props,[c,y]=r.useState("https://app.ppsbusinesscards.de"),[p,f]=r.useState(!1),[n,d]=r.useState({company_id:l.length>0?l[0].id:"",quantity:10,domain:c});r.useEffect(()=>{(async()=>{const t=await F();y(t),d(s=>({...s,domain:t}))})()},[]);const h=()=>i([]),j=async t=>{t.preventDefault(),f(!0),i([]);try{const s=await b.post("/cards",{company_id:n.company_id,quantity:n.quantity});s.data.success?(i(s.data.createdCards),console.log(s.data),m.success(`${s.data.cards_created} cards generated successfully!`),v.reload({only:["cardsGroups"]})):m.error(s.data.message||"Failed to generate cards")}catch(s){console.error(s),m.error(s.response?.data?.message||"Failed to generate cards")}finally{f(!1)}};return console.log(a),e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:j,className:"grid gap-3 md:grid-cols-2 grid-cols-1",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(u,{htmlFor:"company",value:"Company",className:"text-[#344054] font-medium"}),e.jsx(q,{id:"company",name:"company_id",value:n.company_id,onChange:t=>d({...n,company_id:t.target.value}),className:"w-full block",options:l.map(t=>({value:t.id,label:t.name}))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(u,{htmlFor:"quantity",value:"Number of cards",className:"text-[#344054] font-medium"}),e.jsx(x,{id:"quantity",name:"quantity",type:"number",value:n.quantity,onChange:t=>d({...n,quantity:t.target.value}),className:"block w-full",required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(u,{htmlFor:"domain",value:"Domain (read-only)",className:"text-[#344054] font-medium"}),e.jsx(x,{id:"domain",name:"domain",value:c,readOnly:!0,className:"block w-full"})]}),e.jsxs("div",{className:"flex-wrap gap-1 items-center md:col-span-2 flex mt-3",children:[e.jsx(g,{type:"submit",disabled:p,children:p?"Generating...":"Generate Cards"}),e.jsx(g,{variant:"light",type:"button",onClick:h,children:"Clear Preview"})]})]}),a.length>0&&e.jsxs("div",{className:"flex flex-col gap-3 py-3",children:[e.jsxs("p",{className:"text-[#079E04] text-xs font-medium",children:[a.length," URLs generated."]}),e.jsx("p",{className:"text-xs leading-5 font-medium text-[#475569]",children:"Once generated, the URLs are immediately active. The CSV is automatically downloaded and stored in the History."}),e.jsx(S,{className:"mt-3"})]}),a.length>0&&e.jsx(L,{domain:c,previewCards:a})]})}export{G as default};
