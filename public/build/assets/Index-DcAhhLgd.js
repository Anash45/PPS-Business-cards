import{a as M,r as i,d as h,j as r,H as Y}from"./app-CMVWRIzf.js";import{A as D}from"./AuthenticatedLayout-nkxSy9Os.js";import{C as f}from"./CustomDataTable-Bo7eAKaT.js";import{r as j,d as u}from"./dayjs.min-BY4kGCqd.js";import"./ApplicationLogo-DmZJiltu.js";import"./chevron-down-yNiWZNlT.js";var p={exports:{}},k=p.exports,y;function w(){return y||(y=1,(function(l,g){(function(m,d){l.exports=d(j())})(k,(function(m){function d(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var o=d(m),b={s:"ein paar Sekunden",m:["eine Minute","einer Minute"],mm:"%d Minuten",h:["eine Stunde","einer Stunde"],hh:"%d Stunden",d:["ein Tag","einem Tag"],dd:["%d Tage","%d Tagen"],M:["ein Monat","einem Monat"],MM:["%d Monate","%d Monaten"],y:["ein Jahr","einem Jahr"],yy:["%d Jahre","%d Jahren"]};function a(e,t,n){var s=b[n];return Array.isArray(s)&&(s=s[t?0:1]),s.replace("%d",e)}var c={name:"de",weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sept._Okt._Nov._Dez.".split("_"),ordinal:function(e){return e+"."},weekStart:1,yearStart:4,formats:{LTS:"HH:mm:ss",LT:"HH:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"vor %s",s:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a}};return o.default.locale(c,null,!0),c}))})(p)),p.exports}w();function _(l){return!l||typeof l!="string"?"":l.charAt(0).toUpperCase()+l.slice(1)}u.locale("de");function T({walletJobs:l,emailJobs:g}){const{setHeaderTitle:m,setHeaderText:d}=M(),[o,b]=i.useState("wallet");i.useEffect(()=>{m("Background Jobs"),d("Track wallet sync and email sending jobs")},[]),i.useEffect(()=>{const e=setInterval(()=>{h.reload({only:["walletJobs","emailJobs"]})},1e4);return()=>clearInterval(e)},[]);const a=i.useMemo(()=>[{key:"id",label:"ID",sortable:!0},{key:"status",label:"Status",sortable:!0,render:e=>{let t="bg-gray-100 text-gray-700 border-gray-200";return e==="completed"?t="bg-green-100 text-green-700 border-green-200":e==="processing"?t="bg-blue-100 text-blue-700 border-blue-200":e==="failed"?t="bg-red-100 text-red-700 border-red-200":e==="pending"&&(t="bg-yellow-100 text-yellow-700 border-yellow-200"),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${t}`,children:_(e)})}},{key:"progress",label:"Progress",sortable:!1,render:(e,t)=>{const n=t.total_items||0,s=t.processed_items||0,x=n>0?Math.round(s/n*100):0;return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:"bg-blue-500 h-full transition-all",style:{width:`${x}%`}})}),r.jsxs("span",{className:"text-xs font-medium",children:[s,"/",n]})]})}},{key:"last_processed_at",label:"Last Processed",sortable:!0,render:e=>e?u(e).format("DD.MM.YYYY HH:mm"):"—"},{key:"reason",label:"Reason",sortable:!1,render:e=>e||"—"},{key:"created_at",label:"Created",sortable:!0,render:e=>u(e).format("DD.MM.YYYY HH:mm")}],[]),c=i.useMemo(()=>[{key:"id",label:"ID",sortable:!0},{key:"status",label:"Status",sortable:!0,render:e=>{let t="bg-gray-100 text-gray-700 border-gray-200";return e==="completed"?t="bg-green-100 text-green-700 border-green-200":e==="processing"?t="bg-blue-100 text-blue-700 border-blue-200":e==="failed"?t="bg-red-100 text-red-700 border-red-200":e==="pending"&&(t="bg-yellow-100 text-yellow-700 border-yellow-200"),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${t}`,children:_(e)})}},{key:"progress",label:"Progress",sortable:!1,render:(e,t)=>{const n=t.total_items||0,s=t.processed_items||0,x=n>0?Math.round(s/n*100):0;return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:"bg-green-500 h-full transition-all",style:{width:`${x}%`}})}),r.jsxs("span",{className:"text-xs font-medium",children:[s,"/",n]})]})}},{key:"last_processed_at",label:"Last Processed",sortable:!0,render:e=>e?u(e).format("DD.MM.YYYY HH:mm"):"—"},{key:"reason",label:"Reason",sortable:!1,render:e=>e||"—"},{key:"created_at",label:"Created",sortable:!0,render:e=>u(e).format("DD.MM.YYYY HH:mm")}],[]);return r.jsxs(D,{children:[r.jsx(Y,{title:"Background Jobs"}),r.jsx("div",{className:"py-4 md:px-6 px-4 flex flex-col gap-6",children:r.jsxs("div",{className:"bg-white rounded-[14px] p-4 md:p-6",children:[r.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[r.jsx("button",{onClick:()=>b("wallet"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${o==="wallet"?"border-[#698F6D] text-[#698F6D]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Wallet Sync Jobs"}),r.jsx("button",{onClick:()=>b("email"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${o==="email"?"border-[#698F6D] text-[#698F6D]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Email Sending Jobs"})]}),r.jsxs("div",{className:"overflow-auto",style:{maxHeight:"700px"},children:[o==="wallet"&&r.jsx(f,{columns:a,data:l,endpoint:route("background-jobs.index"),tableKey:"walletJobs",searchable:!0,paginated:!0,perPageOptions:[10,25,50],size:"sm"}),o==="email"&&r.jsx(f,{columns:c,data:g,endpoint:route("background-jobs.index"),tableKey:"emailJobs",searchable:!0,paginated:!0,perPageOptions:[10,25,50],size:"sm"})]})]})})]})}export{T as default};
