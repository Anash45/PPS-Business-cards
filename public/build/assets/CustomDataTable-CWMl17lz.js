import{c as x,r as l,d as Y,j as e,T as Z}from"./app-PKz9FedL.js";import{C as T}from"./chevron-down-Cy6s_dyY.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],K=x("chevron-left",F);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],se=x("chevron-right",ee);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],E=x("chevron-up",te);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],re=x("chevrons-left",ae);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],ce=x("chevrons-right",le);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ne=x("search",oe);function he({columns:u=[],data:n={data:[],total:0,per_page:10,current_page:1,last_page:1},endpoint:i,searchable:L=!0,showPerPageOptions:z=!0,paginated:R=!0,perPageOptions:S=[10,25,50,100],tableKey:g="default",additionalFilters:f={},onRowClick:y=null,emptyMessage:q="No records found",className:I="",size:J="lg"}){const[o,j]=l.useState(n),[M,N]=l.useState(!1),[v,U]=l.useState(""),[w,W]=l.useState(""),[t,_]=l.useState(n.current_page||1),[h,A]=l.useState(n.per_page||S[0]),[p,B]=l.useState(null),[m,k]=l.useState("asc");l.useEffect(()=>{const s=setTimeout(()=>{W(v),_(1)},500);return()=>clearTimeout(s)},[v]),l.useEffect(()=>{i&&G()},[w,t,h,p,m,JSON.stringify(f)]),l.useEffect(()=>{i?n&&n!==o&&j(n):j(n)},[n,i]);const G=l.useCallback(()=>{if(!i)return;N(!0);const s={page:t,per_page:h,search:w,sort_by:p,sort_direction:m,...f};Y.get(i,s,{preserveState:!0,preserveScroll:!0,only:[g],onSuccess:c=>{const a=c.props[g];a&&j(a),N(!1)},onError:()=>{N(!1)}})},[i,t,h,w,p,m,f,g]),H=s=>{s.sortable&&(p===s.key?k(m==="asc"?"desc":"asc"):(B(s.key),k("asc")))},b=s=>{s<1||s>o.last_page||_(s)},O=s=>{A(s),_(1)},Q=()=>{const c=[],a=[];let d;for(let r=1;r<=o.last_page;r++)(r===1||r===o.last_page||r>=t-2&&r<=t+2)&&c.push(r);return c.forEach(r=>{d&&(r-d===2?a.push(d+1):r-d!==1&&a.push("...")),a.push(r),d=r}),a},C=o.data||[],$=o.total||0,V=C.length>0?(t-1)*h+1:0,X=Math.min(t*h,$),D={sm:{header:"px-3 py-1.5",cell:"px-3 py-1.5"},md:{header:"px-4 py-2",cell:"px-4 py-2"},lg:{header:"px-6 py-3",cell:"px-6 py-3"}},P=D[J]||D.md;return e.jsxs("div",{className:`custom-datatable ${I}`,children:[e.jsxs("div",{className:"datatable-header flex flex-wrap items-center justify-between gap-4 mb-4",children:[z&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Show"}),e.jsx("select",{value:h,onChange:s=>O(Number(s.target.value)),className:"w-20 border border-gray-300 rounded px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-primary shadow-none focus:shadow-none",children:S.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("label",{className:"text-sm text-gray-600",children:"entries"})]}),L&&e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Z,{type:"text",placeholder:"Search...",value:v,onChange:s=>U(s.target.value),className:"pl-10"})]})]}),e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg cdt-table",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-primary",children:e.jsx("tr",{children:u.map((s,c)=>e.jsx("th",{onClick:()=>H(s),className:`${P.header} text-left text-xs font-medium text-white uppercase tracking-wider ${s.sortable?"cursor-pointer hover:bg-[#76a87b]":""} ${s.headerClassName||""}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.label}),s.sortable&&e.jsx("span",{className:"flex flex-col",children:p===s.key?m==="asc"?e.jsx(E,{className:"h-4 w-4"}):e.jsx(T,{className:"h-4 w-4"}):e.jsxs("div",{className:"flex flex-col opacity-30",children:[e.jsx(E,{className:"h-3 w-3 -mb-1"}),e.jsx(T,{className:"h-3 w-3"})]})})]})},`${s.key}-${c}`))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 cdt-table-body",children:M?e.jsx("tr",{children:e.jsx("td",{colSpan:u.length,className:"px-6 py-12 text-center text-gray-500",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500"}),e.jsx("span",{children:"Loading..."})]})})}):C.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:u.length,className:"px-6 py-12 text-center text-gray-500",children:q})}):C.map((s,c)=>e.jsx("tr",{onClick:()=>y&&y(s),className:`hover:bg-gray-50 ${y?"cursor-pointer":""}`,children:u.map((a,d)=>e.jsx("td",{className:`${P.cell} whitespace-nowrap text-sm text-gray-900 ${a.className||""}`,children:a.render?a.render(s[a.key],s,c):s[a.key]},`${a.key}-${d}`))},s.id||c))})]})}),e.jsxs("div",{className:"datatable-footer flex flex-wrap items-center justify-between gap-4 mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",V," to ",X," of ",$," entries"]}),R&&o.last_page>1&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>b(1),disabled:t===1,className:"p-2 rounded border border-primary hover:bg-[#76a87b] hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",title:"First page",children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>b(t-1),disabled:t===1,className:"p-2 rounded border border-primary hover:bg-[#76a87b] hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous page",children:e.jsx(K,{className:"h-4 w-4"})}),Q().map((s,c)=>e.jsx("button",{onClick:()=>typeof s=="number"&&b(s),disabled:s==="...",className:`px-3 py-1.5 rounded border text-sm ${s===t?"bg-primary text-white border-primary":"border-[#76a87b] hover:bg-[#76a87b] hover:text-white"} ${s==="..."?"cursor-default border-0":""}`,children:s},c)),e.jsx("button",{onClick:()=>b(t+1),disabled:t===o.last_page,className:"p-2 rounded border border-primary hover:bg-[#76a87b] hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",title:"Next page",children:e.jsx(se,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>b(o.last_page),disabled:t===o.last_page,className:"p-2 rounded border border-primary hover:bg-[#76a87b] hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",title:"Last page",children:e.jsx(ce,{className:"h-4 w-4"})})]})]})]})}export{he as C};
