import{b as h,r as x,u as w,j as a,I as n,T as t,a as i,S as N,B as b,z as d,f as _}from"./app-Sq9O7oKF.js";function S({user:l=null}){const{flash:C}=h().props,[g,c]=x.useState(!1),[m,p]=x.useState({}),{data:r,setData:u,post:k,put:E,processing:f,clearErrors:v}=w({company_name:l?.company?.name||"",name:l?.name||"",email:l?.email||"",password:"",password_confirmation:"",role:l?.role||"company"}),o=(e,s)=>{u(e,s),m[e]&&p(j=>({...j,[e]:null})),v(e)},y=async e=>{e.preventDefault(),c(!0),p({});try{let s;l?s=await axios.put(route("users.update",l.id),r):s=await axios.post(route("users.store"),r),s.data.success?(c(!1),d.success(s.data.message),l||(u({company_name:"",name:"",email:"",password:"",password_confirmation:"",role:"company"}),setTimeout(()=>{_.visit(route("users.index"))},2e3))):(c(!1),d.error(s.data.message||"Something went wrong"))}catch(s){c(!1),s.response?.status===422?(p(s.response.data.errors||{}),d.error("Please fix validation errors.")):d.error(s.response?.data?.message||"An error occurred.")}};return a.jsxs("form",{onSubmit:y,className:"space-y-5 bg-white p-6 rounded-lg shadow",children:[a.jsxs("div",{className:"grid md:grid-cols-2 grid-cols-1 gap-5",children:[a.jsx("div",{children:r.role==="company"&&a.jsxs("div",{className:"space-y-1",children:[a.jsx(n,{htmlFor:"company_name",value:"Company Name",className:"text-[#344054] font-medium"}),a.jsx(t,{id:"company_name",name:"company_name",value:r.company_name,onChange:e=>o("company_name",e.target.value),className:"block w-full"}),a.jsx(i,{message:m.company_name,className:"mt-1"})]})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx(n,{htmlFor:"name",value:"Name",className:"text-[#344054] font-medium"}),a.jsx(t,{id:"name",name:"name",value:r.name,onChange:e=>o("name",e.target.value),className:"block w-full"}),a.jsx(i,{message:m.name,className:"mt-1"})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 grid-cols-1 gap-5",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(n,{htmlFor:"email",value:"Email",className:"text-[#344054] font-medium"}),a.jsx(t,{id:"email",name:"email",type:"text",value:r.email,onChange:e=>o("email",e.target.value),className:"block w-full"}),a.jsx(i,{message:m.email,className:"mt-1"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx(n,{htmlFor:"role",value:"Role",className:"text-[#344054] font-medium"}),l?a.jsx(t,{id:"role",readOnly:!0,type:"role",defaultValue:r.role,className:"block w-full capitalize"}):a.jsx(N,{id:"role",name:"role",value:r.role,onChange:e=>{o("role",e.target.value),e.target.value!=="company"&&(o("company_name",""),clearErrors("company_name"))},className:"w-full block",options:[{value:"admin",label:"Admin"},{value:"company",label:"Company"}]}),a.jsx(i,{message:m.role,className:"mt-1"})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 grid-cols-1 gap-5",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(n,{htmlFor:"password",value:`Password${l?" (leave blank to keep current)":""}`,className:"text-[#344054] font-medium"}),a.jsx(t,{id:"password",name:"password",type:"password",value:r.password,onChange:e=>o("password",e.target.value),className:"block w-full"}),a.jsx(i,{message:m.password,className:"mt-1"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx(n,{htmlFor:"password_confirmation",value:"Confirm Password",className:"text-[#344054] font-medium"}),a.jsx(t,{id:"password_confirmation",name:"password_confirmation",type:"password",value:r.password_confirmation,onChange:e=>o("password_confirmation",e.target.value),className:"block w-full"})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(b,{variant:"primary",type:"submit",disabled:f,children:g?"Saving...":l?"Update User":"Create User"})})]})}export{S as default};
