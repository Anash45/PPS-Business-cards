import{r as o,j as a,u as H,a as $,H as b}from"./app-DTUrn2-E.js";import{m as E,C as L}from"./mapCompanyTemplateData-BuXvUD4q.js";import{C as R}from"./CardLayout-Dzpp374D.js";import{u as D}from"./AutoTranslateProvider-B9vz6bcb.js";import"./viteConfig-BIBuROsR.js";function v({text:s}){const r=D()?.lang||null,[h,y]=o.useState(s),[T,p]=o.useState(!1),t=o.useRef(s),c=o.useRef({});o.useEffect(()=>{t.current=s,r||y(s)},[s,r]);const m=async e=>{try{return(await(await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=en&dt=t&q=${encodeURIComponent(e)}`)).json())[2]||"en"}catch{return"en"}},f=async(e,n,x)=>{const l=`${n}->${x}:${e}`;if(c.current[l])return c.current[l];try{const i=(await(await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${n}&tl=${x}&dt=t&q=${encodeURIComponent(e)}`)).json())[0][0][0];return c.current[l]=i,i}catch{return e}},j=async(e,n)=>{if(!/<[^>]+>/.test(e)){const i=await m(e);return i===n?e:await f(e,i,n)}const l=/>([^<]+)</g,_=[...e.matchAll(l)];let g=e;for(let i of _){const d=i[1].trim();if(!d)continue;const C=await m(d);let w=d;C!==n&&(w=await f(d,C,n)),g=g.replace(d,w)}return g};return o.useEffect(()=>{if(!r)return;(async()=>{p(!0);const n=await j(t.current,r);y(n),p(!1)})()},[r,s]),a.jsx("span",{style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:T?"...":h}})}function B(){const{selectedCard:s,company:u,nfcCard:r,isSubscriptionActive:h,pageType:y="card"}=H().props,{setHeaderTitle:T,setHeaderText:p,cardFormData:t,setCardFormData:c,setIsCardReal:m}=$();return o.useEffect(()=>{T("Business Card"),p("")},[]),o.useEffect(()=>{if(u){const f=E(u,s);c(j=>({...j,...f}))}},[u,s]),o.useEffect(()=>{m(!0)}),console.log("Card F Data: ",t),a.jsxs(R,{children:[a.jsxs(b,{children:[a.jsx("title",{children:t?.title||t?.first_name||t?.last_name?[t?.title,t?.first_name,t?.last_name].filter(Boolean).join(" "):"Great Guy To Know"}),a.jsx("link",{rel:"icon",type:"image/png",href:t.profile_image_url?`${t.profile_image_url}`:t.banner_image_url?`${t.banner_image_url}`:"/assets/images/profile-placeholder.png"}),a.jsx("meta",{property:"description",content:t?.meta_description??t?.description??(t?.position||t?.department?[t?.position,t?.department].filter(Boolean).join(" - "):"Get in touch via my digital business card.")})]}),a.jsx("div",{className:"py-4 md:px-6 px-4 flex flex-col gap-6",children:h?r===null&&s?.status==="active"||r!==null&&r?.status==="active"&&s?.status==="active"?a.jsx(L,{isReal:!0}):a.jsx("div",{className:"p-4 text-center bg-orange-100 text-orange-700 rounded-md",children:a.jsx(v,{text:`This card is currently inactive. Please contact the
                        administrator for more information.`})}):a.jsx("div",{className:"p-4 text-center bg-red-100 text-red-700 rounded-md",children:a.jsx(v,{text:"You can only access this page with a valid subscription. Contact administrator for more information."})})})]})}export{B as default};
