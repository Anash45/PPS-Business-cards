import{g as h,j as r,c as i,r as f,n as y}from"./app-571qQf3A.js";import{g as j}from"./viteConfig-BIBuROsR.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],N=h("smile",v);function w({cardSocialsLinks:t}){return t?.length?r.jsx("div",{className:"flex items-center gap-2 flex-wrap justify-center",children:(t||[]).map((e,o)=>e.url&&e.icon!==""&&r.jsx("a",{href:e.url||"#",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-gray-700 transition",children:r.jsx("img",{src:`/assets/images/icons/${e.icon.replace(/^Fa/,"").toLowerCase()}.png`,alt:e.icon,className:"h-7"})},o))}):null}function $({cardPhones:t}){const{isCardReal:e}=i(),o=t?.filter(n=>!(n.is_hidden&&e));return o?.length>0?r.jsx("div",{className:"grid gap-2 grid-cols-1",children:o.map((n,a)=>r.jsxs("a",{target:"_blank",href:`tel:${n.phone_number}`,style:{color:n?.text_color,backgroundColor:n?.bg_color??"#87B88C",borderColor:n?.bg_color??"#87B88C"},className:"flex relative border text-sm leading-tight items-center gap-3 justify-content-start rounded-lg px-4 py-2.5 font-medium preview-btn w-full",children:[r.jsx("span",{className:"shrink-0 text-xl",children:"📞"}),r.jsxs("span",{children:[n.type," Phone: ",n.phone_number]}),n.is_hidden&&r.jsx("span",{className:"absolute -translate-y-1/2 translate-x-1 top-0 right-0 text-[10px] rounded bg-orange-500 py-0.5 px-2 italic text-white",children:"(Hidden)"})]},a))}):null}function k({cardEmails:t}){const{isCardReal:e}=i();return t?.length>0?r.jsx("div",{className:"grid gap-2 grid-cols-1",children:t.map((o,n)=>o.hidden&&e?null:r.jsxs("a",{target:"_blank",href:`mailto:${o.email}`,style:{color:o?.text_color,backgroundColor:o?.bg_color??"#87B88C",borderColor:o?.bg_color??"#87B88C"},className:"flex border text-sm leading-tight relative items-center gap-3 justify-content-start rounded-lg px-4 py-2.5 font-medium preview-btn",children:[r.jsx("span",{className:"shrink-0 text-xl",children:"✉️"}),r.jsxs("span",{children:[o.type," email: ",o.email]}),o.is_hidden?r.jsx("span",{className:"absolute -translate-y-1/2 translate-x-1 top-0 right-0 text-[10px] rounded bg-orange-500 py-0.5 px-2 italic text-white",children:"(Hidden)"}):null]},n))}):null}function C({cardAddresses:t}){const{isCardReal:e}=i();return t?.length>0?r.jsx("div",{className:"grid gap-2 grid-cols-1",children:t.map((o,n)=>o.is_hidden&&e?null:r.jsxs("a",{target:"_blank",href:`https://www.google.com/maps/search/?api=1&query=${o.address}`,style:{color:o?.text_color,backgroundColor:o?.bg_color??"#87B88C",borderColor:o?.bg_color??"#87B88C"},className:"flex border text-sm leading-tight relative items-center gap-3 justify-content-start rounded-lg px-4 py-2.5 font-medium preview-btn",children:[r.jsx("span",{className:"shrink-0 text-xl",children:"📍"}),r.jsxs("span",{children:[o.type," address: ",o.address]}),o.is_hidden?r.jsx("span",{className:"absolute -translate-y-1/2 translate-x-1 top-0 right-0 text-[10px] rounded bg-orange-500 py-0.5 px-2 italic text-white",children:"(Hidden)"}):null]},n))}):null}function E({cardButtons:t}){const{cardFormData:e}=i();return t?.length>0?r.jsx("div",{className:"grid gap-2 grid-cols-1",children:t.map((o,n)=>o.button_text&&r.jsxs("a",{target:"_blank",href:o.button_link,style:{color:e?.btn_text_color,backgroundColor:e?.btn_bg_color,borderColor:e?.btn_bg_color??"#87B88C"},className:"flex border text-sm leading-tight items-center gap-3 justify-content-start rounded-lg px-4 py-2.5 font-medium preview-btn",children:[r.jsx("span",{className:"shrink-0 text-xl",children:o.icon?o.icon:r.jsx(N,{className:"h-7 w-7"})}),r.jsx("span",{children:o.button_text})]},n))}):null}function P(){const{cardFormData:t}=i(),[e,o]=f.useState("https://app.ppsbusinesscards.de");f.useEffect(()=>{(async()=>{const a=await j();o(a)})()},[]);const n=()=>{if(!t)return;const a=t.first_name||"",m=t.last_name||"",p=t.company_name||"";let l=`BEGIN:VCARD
VERSION:3.0
N:${m};${a};;${t.title||""};
FN:${[t.salutation,a,m].filter(Boolean).join(" ")}
ORG:${p}
TITLE:${t.position||""}
ROLE:${t.department||""}
URL;TYPE=WORK:${e}/card/${t?.code??"XXXXXXX"}
`;t.profile_image_url&&(l+=`PHOTO;VALUE=URI:${e}${t.profile_image_url}
`),(t.card_phone_numbers||[]).forEach((s,d)=>{if(s.phone_number){const _=(s.type||"Work").toUpperCase();l+=`TEL;TYPE=${d===0?"PREF,":""}${_},VOICE:${s.phone_number}
`}}),(t.card_emails||[]).forEach((s,d)=>{if(s.email){const _=(s.type||"Work").toUpperCase();l+=`EMAIL;TYPE=${d===0?"PREF,":""}${_}:${s.email}
`}}),(t.card_addresses||[]).forEach((s,d)=>{if(s.address){const _=(s.type||"Work").toUpperCase();l+=`ADR;TYPE=${d===0?"PREF,":""}${_}:;;${s.address};;;;
`}}),l+="END:VCARD";const g=new Blob([l],{type:"text/vcard;charset=utf-8"}),x=URL.createObjectURL(g),c=document.createElement("a"),b=p.replace(/\s+/g,"_");c.download=`${a}_${m}_${b}.vcf`,c.href=x,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(x),y.success("vCard downloaded!")};return r.jsx("div",{className:"flex items-center justify-center",children:r.jsx("button",{onClick:n,style:{color:t?.btn_text_color||"#ffffff",backgroundColor:t?.btn_bg_color||"#87B88C",borderColor:t?.btn_bg_color||"#87B88C"},className:"px-4 py-2.5 rounded-[10px] text-sm font-medium leading-tight w-fit",children:t.contact_btn_text})})}function B({isReal:t=!1}){const{cardFormData:e,setCardFormData:o}=i();return r.jsx("div",{className:`border ${t?"border-transparent":"border-[#EAECF0]"} rounded-lg p-3 mx-auto w-[430px] max-w-full`,style:{backgroundColor:e?.card_bg_color??"#ffffff"},children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative border border-[#EAECF0] bg-gradient bg-gradient-to-b from-[#eaffec] to-transparent rounded-lg w-full h-[200px]",children:[e.banner_image_url?r.jsx("img",{src:e.banner_image_url,alt:"Banner",className:"w-full h-full object-cover rounded-lg"}):null,e.profile_image_url?r.jsx("img",{src:e.profile_image_url,alt:"Profile",className:"rounded-full border-2 bg-white border-white absolute bottom-0 left-1/2 transform translate-y-1/2 -translate-x-1/2 w-[140px] h-[140px] object-cover"}):r.jsx("img",{src:"/assets/images/profile-placeholder.svg",alt:"Profile",className:"rounded-full border-2 bg-white border-white absolute bottom-0 left-1/2 transform translate-y-1/2 -translate-x-1/2 w-[140px] h-[140px] object-cover"})]}),r.jsx("div",{children:r.jsxs("div",{className:"mt-20 space-y-2 text-center",children:[r.jsx("h2",{className:"text-xl text-center leading-tight font-black font-public-sans",style:{color:e?.name_text_color||"#000000"},children:e.salutation||e.first_name||e.last_name?`${e?.salutation} ${e?.title} ${e?.first_name} ${e?.last_name}`:"Mr. John Doe"}),e.degree?r.jsx("p",{className:"text-sm italic leading-tight font-bold",style:{color:e?.name_text_color||"#000000"},children:e.degree}):null,e.position||e.department||e.company_name?r.jsxs("div",{className:"space-y-1",style:{color:e?.company_text_color||"#000000"},children:[e.position||e.department?r.jsxs("p",{className:"text-sm font-medium flex items-center justify-center gap-1.5",children:[r.jsx("span",{children:e?.position})," ",r.jsx("span",{className:"inline-block h-1 w-1 rounded-full bg-gray-400"}),r.jsx("span",{children:e?.department})]}):null,e.company_name?r.jsx("p",{className:"text-base leading-tight font-bold",children:e.company_name}):null]}):null]})}),r.jsx(P,{}),r.jsx(w,{cardSocialsLinks:e?.card_social_links??[]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx($,{cardPhones:e?.card_phone_numbers??[]}),r.jsx(k,{cardEmails:e?.card_emails??[]}),r.jsx(C,{cardAddresses:e?.card_addresses??[]}),r.jsx(E,{cardButtons:e?.card_buttons??[]})]})]})})}function D(t,e,o={}){if(console.log("Mapping company template data for:",t,e),!t)return{};const n=t?.card_template;return{name_text_color:n?.name_text_color??"#000000",company_name:n?.company_name??t?.name??"",contact_btn_text:n?.contact_btn_text??"Save contact details",company_text_color:n?.company_text_color??"#000000",card_bg_color:n?.card_bg_color??"#ffffff",btn_bg_color:n?.btn_bg_color??"#87B88C",btn_text_color:n?.btn_text_color??"#ffffff",banner_image:null,banner_image_url:n?.banner_image?`/storage/${n.banner_image}`:null,...e?{code:e.code??"",salutation:e.salutation??"",title:e.title??"",first_name:e.first_name??"",last_name:e.last_name??"",degree:e.degree??"",position:e.position??"",department:e.department??"",profile_image_url:e?.profile_image?`/storage/${e.profile_image}`:"/assets/images/profile-placeholder.svg",profile_image:null}:{},card_social_links:Array.isArray(t?.card_social_links)?t.card_social_links.map(a=>({id:a.id||null,icon:a.icon||"",url:a.url||"",company_id:a.company_id||null,card_id:a.card_id||null})):[],card_phone_numbers:Array.isArray(t?.card_phone_numbers)?t.card_phone_numbers.map(a=>({id:a.id||null,phone_number:a.phone_number||"",is_hidden:a.is_hidden??!1,type:a.type??"Work",text_color:a.text_color||n?.btn_text_color||"#ffffff",bg_color:a.bg_color||n?.btn_bg_color||"#87B88C",company_id:a.company_id||null,card_id:a.card_id||null})):[],card_emails:Array.isArray(t?.card_emails)?t.card_emails.map(a=>({id:a.id||null,email:a.email||"",is_hidden:a.is_hidden??!1,type:a.type??"Work",text_color:a.text_color||n?.btn_text_color||"#ffffff",bg_color:a.bg_color||n?.btn_bg_color||"#87B88C",company_id:a.company_id||null,card_id:a.card_id||null})):[],card_addresses:Array.isArray(t?.card_addresses)?t.card_addresses.map(a=>({id:a.id||null,address:a.address||"",is_hidden:a.is_hidden??!1,type:a.type??"Work",text_color:a.text_color||n?.btn_text_color||"#ffffff",bg_color:a.bg_color||n?.btn_bg_color||"#87B88C",company_id:a.company_id||null,card_id:a.card_id||null})):[],card_buttons:Array.isArray(t?.card_buttons)?t.card_buttons.map(a=>({id:a.id||null,button_text:a.button_text||"",button_link:a.button_link||"",icon:a.icon||"",company_id:a.company_id||null,card_id:a.card_id||null})):[]}}export{B as C,N as S,D as m};
