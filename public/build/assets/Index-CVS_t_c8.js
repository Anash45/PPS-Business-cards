import{a as D,r as d,d as Y,j as a,H as w}from"./app-BiiKFIU8.js";import{A as S}from"./AuthenticatedLayout-mAPw1RZn.js";import{E as y,D as H}from"./dataTables.dataTables-rUi0_AmF.js";import{r as j,d as c}from"./dayjs.min-DTEVm47s.js";import"./ApplicationLogo-D46p7oAA.js";var x={exports:{}},J=x.exports,M;function L(){return M||(M=1,(function(n,_){(function(p,i){n.exports=i(j())})(J,(function(p){function i(s){return s&&typeof s=="object"&&"default"in s?s:{default:s}}var o=i(p),f={s:"ein paar Sekunden",m:["eine Minute","einer Minute"],mm:"%d Minuten",h:["eine Stunde","einer Stunde"],hh:"%d Stunden",d:["ein Tag","einem Tag"],dd:["%d Tage","%d Tagen"],M:["ein Monat","einem Monat"],MM:["%d Monate","%d Monaten"],y:["ein Jahr","einem Jahr"],yy:["%d Jahre","%d Jahren"]};function r(s,g,e){var t=f[e];return Array.isArray(t)&&(t=t[g?0:1]),t.replace("%d",s)}var b={name:"de",weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sept._Okt._Nov._Dez.".split("_"),ordinal:function(s){return s+"."},weekStart:1,yearStart:4,formats:{LTS:"HH:mm:ss",LT:"HH:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"vor %s",s:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r}};return o.default.locale(b,null,!0),b}))})(x)),x.exports}L();function h(n){return!n||typeof n!="string"?"":n.charAt(0).toUpperCase()+n.slice(1)}y.use(H);c.locale("de");function C({walletJobs:n,emailJobs:_}){const{setHeaderTitle:p,setHeaderText:i}=D(),[o,f]=d.useState("wallet"),[r,b]=d.useState(0);d.useEffect(()=>{p("Background Jobs"),i("Track wallet sync and email sending jobs")},[]),d.useEffect(()=>{const e=setInterval(()=>{Y.reload({only:["walletJobs","emailJobs"],onSuccess:()=>{b(t=>t+1)}})},1e4);return()=>clearInterval(e)},[]);const s=d.useMemo(()=>[{title:"ID",data:"id"},{title:"Status",data:"status",render:e=>{let t="bg-gray-100 text-gray-700 border-gray-200";return e==="completed"?t="bg-green-100 text-green-700 border-green-200":e==="processing"?t="bg-blue-100 text-blue-700 border-blue-200":e==="failed"?t="bg-red-100 text-red-700 border-red-200":e==="pending"&&(t="bg-yellow-100 text-yellow-700 border-yellow-200"),`<span class="px-2 py-1 text-xs font-medium rounded-full border ${t}">
                        ${h(e)}
                    </span>`}},{title:"Progress",data:null,render:(e,t,u)=>{const l=u.total_items||0,m=u.processed_items||0;return`
                        <div class="flex items-center gap-2">
                            <div class="flex-1 bg-gray-200 rounded-full h-2 overflow-hidden">
                                <div class="bg-blue-500 h-full" style="width: ${l>0?Math.round(m/l*100):0}%"></div>
                            </div>
                            <span class="text-xs font-medium">${m}/${l}</span>
                        </div>
                    `}},{title:"Last Processed",data:"last_processed_at",render:e=>e?c(e).format("DD.MM.YYYY HH:mm"):"—"},{title:"Reason",data:"reason",render:e=>e||"—"},{title:"Created",data:"created_at",render:e=>c(e).format("DD.MM.YYYY HH:mm")}],[]),g=d.useMemo(()=>[{title:"ID",data:"id"},{title:"Status",data:"status",render:e=>{let t="bg-gray-100 text-gray-700 border-gray-200";return e==="completed"?t="bg-green-100 text-green-700 border-green-200":e==="processing"?t="bg-blue-100 text-blue-700 border-blue-200":e==="failed"?t="bg-red-100 text-red-700 border-red-200":e==="pending"&&(t="bg-yellow-100 text-yellow-700 border-yellow-200"),`<span class="px-2 py-1 text-xs font-medium rounded-full border ${t}">
                        ${h(e)}
                    </span>`}},{title:"Progress",data:null,render:(e,t,u)=>{const l=u.total_items||0,m=u.processed_items||0;return`
                        <div class="flex items-center gap-2">
                            <div class="flex-1 bg-gray-200 rounded-full h-2 overflow-hidden">
                                <div class="bg-green-500 h-full" style="width: ${l>0?Math.round(m/l*100):0}%"></div>
                            </div>
                            <span class="text-xs font-medium">${m}/${l}</span>
                        </div>
                    `}},{title:"Last Processed",data:"last_processed_at",render:e=>e?c(e).format("DD.MM.YYYY HH:mm"):"—"},{title:"Reason",data:"reason",render:e=>e||"—"},{title:"Created",data:"created_at",render:e=>c(e).format("DD.MM.YYYY HH:mm")}],[]);return a.jsxs(S,{children:[a.jsx(w,{title:"Background Jobs"}),a.jsx("div",{className:"py-4 md:px-6 px-4 flex flex-col gap-6",children:a.jsxs("div",{className:"bg-white rounded-[14px] p-4 md:p-6",children:[a.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[a.jsx("button",{onClick:()=>f("wallet"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${o==="wallet"?"border-[#698F6D] text-[#698F6D]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Wallet Sync Jobs"}),a.jsx("button",{onClick:()=>f("email"),className:`px-6 py-3 font-medium text-sm border-b-2 transition-colors ${o==="email"?"border-[#698F6D] text-[#698F6D]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Email Sending Jobs"})]}),a.jsxs("div",{className:"overflow-auto",style:{maxHeight:"700px"},children:[o==="wallet"&&a.jsx(y,{data:n,columns:s,className:"display site-datatable text-sm",options:{pageLength:25,order:[[0,"desc"]],responsive:!0,scrollX:!0,dom:"<'flex justify-between items-center mb-3 sd-top'<'flex items-center gap-2'l><'flex items-center gap-2'f>>rt<'flex justify-center mt-3 sd-bottom'p>"}},`wallet-${r}`),o==="email"&&a.jsx(y,{data:_,columns:g,className:"display site-datatable text-sm",options:{pageLength:25,order:[[0,"desc"]],responsive:!0,scrollX:!0,dom:"<'flex justify-between items-center mb-3 sd-top'<'flex items-center gap-2'l><'flex items-center gap-2'f>>rt<'flex justify-center mt-3 sd-bottom'p>"}},`email-${r}`)]})]})})]})}export{C as default};
