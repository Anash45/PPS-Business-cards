import{c as ke,a as pe,j as e,g as Le,r as Y,z as q,C as fe,J as ye,F as Te,H as Me}from"./app-PKz9FedL.js";import{X as Ie,A as Pe}from"./AuthenticatedLayout-C-E0WFy8.js";import{u as $e,U as Ue}from"./index-Dk35ERZH.js";import{c as me}from"./csvFieldDefinitions-TqO1r_F2.js";import{r as be}from"./index-CEV4SB_A.js";import{C as Re}from"./chevron-down-Cy6s_dyY.js";import"./ApplicationLogo-B4j1u-Xs.js";import"./index-Bv1NvoP1.js";import"./tslib.es6-Bb5J6d_G.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Oe=ke("arrow-left",ze);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ne=ke("arrow-right",qe);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ve=ke("check",Be);function He(){const{csvImportProgress:p,progressSteps:v}=pe();return e.jsx("div",{className:"p-5 flex flex-col gap-4 font-public-sans bg-white border border-[#EAECF0] rounded-xl sticky top-4",children:v.map((m,u)=>{const E=m.number===p,D=m.number<p,k=u===v.length-1;return e.jsxs("div",{className:`flex gap-3 csv-progress-item transition-all cursor-pointer ${E?"cpi-active":""}`,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`h-6 w-6 relative rounded-full flex items-center justify-center 
                                    ${E||D?"bg-primary":"bg-[#F2F4F7]"} 
                                    cpi-circle transition-colors`,children:D?e.jsx(Ve,{className:"h-5 w-5 text-white"}):e.jsx("div",{className:"h-2 w-2 rounded-full bg-white"})}),!k&&e.jsx("div",{className:`cpi-line w-0.5 rounded-full h-9 my-1 transition-colors ${D||E?"bg-primary":"bg-[#F2F4F7]"}`})]}),e.jsxs("div",{className:"flex flex-col pt-1",children:[e.jsxs("p",{className:`text-xs leading-[18px] ${E||D?"text-primary":"text-[#667085]"}`,children:["Step ",m.number]}),e.jsx("p",{className:"font-semibold text-base text-black",children:m.label})]})]},m.number)})})}var je={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var We=je.exports,Fe;function Ke(){return Fe||(Fe=1,(function(p,v){((m,u)=>{p.exports=u()})(We,function m(){var u=typeof self<"u"?self:typeof window<"u"?window:u!==void 0?u:{},E,D=!u.document&&!!u.postMessage,k=u.IS_PAPA_WORKER||!1,f={},_=0,i={};function l(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(s){var r=re(s);r.chunkSize=parseInt(r.chunkSize),s.step||s.chunk||(r.chunkSize=null),this._handle=new c(r),(this._handle.streamer=this)._config=r}).call(this,t),this.parseChunk=function(s,r){var a=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<a){let y=this._config.newline;y||(n=this._config.quoteChar||'"',y=this._handle.guessLineEndings(s,n)),s=[...s.split(y).slice(a)].join(y)}this.isFirstChunk&&A(this._config.beforeFirstChunk)&&(n=this._config.beforeFirstChunk(s))!==void 0&&(s=n),this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+s,n=(this._partialLine="",this._handle.parse(a,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(s=n.meta.cursor,a=(this._finished||(this._partialLine=a.substring(s-this._baseIndex),this._baseIndex=s),n&&n.data&&(this._rowCount+=n.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),k)u.postMessage({results:n,workerId:i.WORKER_ID,finished:a});else if(A(this._config.chunk)&&!r){if(this._config.chunk(n,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=n=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),this._completed||!a||!A(this._config.complete)||n&&n.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),a||n&&n.meta.paused||this._nextChunk(),n}this._halted=!0},this._sendError=function(s){A(this._config.error)?this._config.error(s):k&&this._config.error&&u.postMessage({workerId:i.WORKER_ID,error:s,finished:!1})}}function I(t){var s;(t=t||{}).chunkSize||(t.chunkSize=i.RemoteChunkSize),l.call(this,t),this._nextChunk=D?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(s=new XMLHttpRequest,this._config.withCredentials&&(s.withCredentials=this._config.withCredentials),D||(s.onload=Q(this._chunkLoaded,this),s.onerror=Q(this._chunkError,this)),s.open(this._config.downloadRequestBody?"POST":"GET",this._input,!D),this._config.downloadRequestHeaders){var r,a=this._config.downloadRequestHeaders;for(r in a)s.setRequestHeader(r,a[r])}var n;this._config.chunkSize&&(n=this._start+this._config.chunkSize-1,s.setRequestHeader("Range","bytes="+this._start+"-"+n));try{s.send(this._config.downloadRequestBody)}catch(y){this._chunkError(y.message)}D&&s.status===0&&this._chunkError()}},this._chunkLoaded=function(){s.readyState===4&&(s.status<200||400<=s.status?this._chunkError():(this._start+=this._config.chunkSize||s.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(s),this.parseChunk(s.responseText)))},this._chunkError=function(r){r=s.statusText||r,this._sendError(new Error(r))}}function J(t){(t=t||{}).chunkSize||(t.chunkSize=i.LocalChunkSize),l.call(this,t);var s,r,a=typeof FileReader<"u";this.stream=function(n){this._input=n,r=n.slice||n.webkitSlice||n.mozSlice,a?((s=new FileReader).onload=Q(this._chunkLoaded,this),s.onerror=Q(this._chunkError,this)):s=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var n=this._input,y=(this._config.chunkSize&&(y=Math.min(this._start+this._config.chunkSize,this._input.size),n=r.call(n,this._start,y)),s.readAsText(n,this._config.encoding));a||this._chunkLoaded({target:{result:y}})},this._chunkLoaded=function(n){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(n.target.result)},this._chunkError=function(){this._sendError(s.error)}}function b(t){var s;l.call(this,t=t||{}),this.stream=function(r){return s=r,this._nextChunk()},this._nextChunk=function(){var r,a;if(!this._finished)return r=this._config.chunkSize,s=r?(a=s.substring(0,r),s.substring(r)):(a=s,""),this._finished=!s,this.parseChunk(a)}}function R(t){l.call(this,t=t||{});var s=[],r=!0,a=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(n){this._input=n,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){a&&s.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),s.length?this.parseChunk(s.shift()):r=!0},this._streamData=Q(function(n){try{s.push(typeof n=="string"?n:n.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(s.shift()))}catch(y){this._streamError(y)}},this),this._streamError=Q(function(n){this._streamCleanUp(),this._sendError(n)},this),this._streamEnd=Q(function(){this._streamCleanUp(),a=!0,this._streamData("")},this),this._streamCleanUp=Q(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function c(t){var s,r,a,n,y=Math.pow(2,53),V=-y,ie=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ne=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,w=this,$=0,d=0,G=!1,g=!1,j=[],o={data:[],errors:[],meta:{}};function H(N){return t.skipEmptyLines==="greedy"?N.join("").trim()==="":N.length===1&&N[0].length===0}function B(){if(o&&a&&(ae("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+i.DefaultDelimiter+"'"),a=!1),t.skipEmptyLines&&(o.data=o.data.filter(function(h){return!H(h)})),Z()){let h=function(z,W){A(t.transformHeader)&&(z=t.transformHeader(z,W)),j.push(z)};if(o)if(Array.isArray(o.data[0])){for(var N=0;Z()&&N<o.data.length;N++)o.data[N].forEach(h);o.data.splice(0,1)}else o.data.forEach(h)}function S(h,z){for(var W=t.header?{}:[],O=0;O<h.length;O++){var L=O,C=h[O],C=((oe,x)=>(P=>(t.dynamicTypingFunction&&t.dynamicTyping[P]===void 0&&(t.dynamicTyping[P]=t.dynamicTypingFunction(P)),(t.dynamicTyping[P]||t.dynamicTyping)===!0))(oe)?x==="true"||x==="TRUE"||x!=="false"&&x!=="FALSE"&&((P=>{if(ie.test(P)&&(P=parseFloat(P),V<P&&P<y))return 1})(x)?parseFloat(x):ne.test(x)?new Date(x):x===""?null:x):x)(L=t.header?O>=j.length?"__parsed_extra":j[O]:L,C=t.transform?t.transform(C,L):C);L==="__parsed_extra"?(W[L]=W[L]||[],W[L].push(C)):W[L]=C}return t.header&&(O>j.length?ae("FieldMismatch","TooManyFields","Too many fields: expected "+j.length+" fields but parsed "+O,d+z):O<j.length&&ae("FieldMismatch","TooFewFields","Too few fields: expected "+j.length+" fields but parsed "+O,d+z)),W}var U;o&&(t.header||t.dynamicTyping||t.transform)&&(U=1,!o.data.length||Array.isArray(o.data[0])?(o.data=o.data.map(S),U=o.data.length):o.data=S(o.data,0),t.header&&o.meta&&(o.meta.fields=j),d+=U)}function Z(){return t.header&&j.length===0}function ae(N,S,U,h){N={type:N,code:S,message:U},h!==void 0&&(N.row=h),o.errors.push(N)}A(t.step)&&(n=t.step,t.step=function(N){o=N,Z()?B():(B(),o.data.length!==0&&($+=N.data.length,t.preview&&$>t.preview?r.abort():(o.data=o.data[0],n(o,w))))}),this.parse=function(N,S,U){var h=t.quoteChar||'"',h=(t.newline||(t.newline=this.guessLineEndings(N,h)),a=!1,t.delimiter?A(t.delimiter)&&(t.delimiter=t.delimiter(N),o.meta.delimiter=t.delimiter):((h=((z,W,O,L,C)=>{var oe,x,P,ue;C=C||[",","	","|",";",i.RECORD_SEP,i.UNIT_SEP];for(var ge=0;ge<C.length;ge++){for(var le,ve=C[ge],X=0,ce=0,K=0,ee=(P=void 0,new T({comments:L,delimiter:ve,newline:W,preview:10}).parse(z)),he=0;he<ee.data.length;he++)O&&H(ee.data[he])?K++:(le=ee.data[he].length,ce+=le,P===void 0?P=le:0<le&&(X+=Math.abs(le-P),P=le));0<ee.data.length&&(ce/=ee.data.length-K),(x===void 0||X<=x)&&(ue===void 0||ue<ce)&&1.99<ce&&(x=X,oe=ve,ue=ce)}return{successful:!!(t.delimiter=oe),bestDelimiter:oe}})(N,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=h.bestDelimiter:(a=!0,t.delimiter=i.DefaultDelimiter),o.meta.delimiter=t.delimiter),re(t));return t.preview&&t.header&&h.preview++,s=N,r=new T(h),o=r.parse(s,S,U),B(),G?{meta:{paused:!0}}:o||{meta:{paused:!1}}},this.paused=function(){return G},this.pause=function(){G=!0,r.abort(),s=A(t.chunk)?"":s.substring(r.getCharIndex())},this.resume=function(){w.streamer._halted?(G=!1,w.streamer.parseChunk(s,!0)):setTimeout(w.resume,3)},this.aborted=function(){return g},this.abort=function(){g=!0,r.abort(),o.meta.aborted=!0,A(t.complete)&&t.complete(o),s=""},this.guessLineEndings=function(z,h){z=z.substring(0,1048576);var h=new RegExp(F(h)+"([^]*?)"+F(h),"gm"),U=(z=z.replace(h,"")).split("\r"),h=z.split(`
`),z=1<h.length&&h[0].length<U[0].length;if(U.length===1||z)return`
`;for(var W=0,O=0;O<U.length;O++)U[O][0]===`
`&&W++;return W>=U.length/2?`\r
`:"\r"}}function F(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function T(t){var s=(t=t||{}).delimiter,r=t.newline,a=t.comments,n=t.step,y=t.preview,V=t.fastMode,ie=null,ne=!1,w=t.quoteChar==null?'"':t.quoteChar,$=w;if(t.escapeChar!==void 0&&($=t.escapeChar),(typeof s!="string"||-1<i.BAD_DELIMITERS.indexOf(s))&&(s=","),a===s)throw new Error("Comment character same as delimiter");a===!0?a="#":(typeof a!="string"||-1<i.BAD_DELIMITERS.indexOf(a))&&(a=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var d=0,G=!1;this.parse=function(g,j,o){if(typeof g!="string")throw new Error("Input must be a string");var H=g.length,B=s.length,Z=r.length,ae=a.length,N=A(n),S=[],U=[],h=[],z=d=0;if(!g)return X();if(V||V!==!1&&g.indexOf(w)===-1){for(var W=g.split(r),O=0;O<W.length;O++){if(h=W[O],d+=h.length,O!==W.length-1)d+=r.length;else if(o)return X();if(!a||h.substring(0,ae)!==a){if(N){if(S=[],ue(h.split(s)),ce(),G)return X()}else ue(h.split(s));if(y&&y<=O)return S=S.slice(0,y),X(!0)}}return X()}for(var L=g.indexOf(s,d),C=g.indexOf(r,d),oe=new RegExp(F($)+F(w),"g"),x=g.indexOf(w,d);;)if(g[d]===w)for(x=d,d++;;){if((x=g.indexOf(w,x+1))===-1)return o||U.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:S.length,index:d}),le();if(x===H-1)return le(g.substring(d,x).replace(oe,w));if(w===$&&g[x+1]===$)x++;else if(w===$||x===0||g[x-1]!==$){L!==-1&&L<x+1&&(L=g.indexOf(s,x+1));var P=ge((C=C!==-1&&C<x+1?g.indexOf(r,x+1):C)===-1?L:Math.min(L,C));if(g.substr(x+1+P,B)===s){h.push(g.substring(d,x).replace(oe,w)),g[d=x+1+P+B]!==w&&(x=g.indexOf(w,d)),L=g.indexOf(s,d),C=g.indexOf(r,d);break}if(P=ge(C),g.substring(x+1+P,x+1+P+Z)===r){if(h.push(g.substring(d,x).replace(oe,w)),ve(x+1+P+Z),L=g.indexOf(s,d),x=g.indexOf(w,d),N&&(ce(),G))return X();if(y&&S.length>=y)return X(!0);break}U.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:S.length,index:d}),x++}}else if(a&&h.length===0&&g.substring(d,d+ae)===a){if(C===-1)return X();d=C+Z,C=g.indexOf(r,d),L=g.indexOf(s,d)}else if(L!==-1&&(L<C||C===-1))h.push(g.substring(d,L)),d=L+B,L=g.indexOf(s,d);else{if(C===-1)break;if(h.push(g.substring(d,C)),ve(C+Z),N&&(ce(),G))return X();if(y&&S.length>=y)return X(!0)}return le();function ue(K){S.push(K),z=d}function ge(K){var ee=0;return ee=K!==-1&&(K=g.substring(x+1,K))&&K.trim()===""?K.length:ee}function le(K){return o||(K===void 0&&(K=g.substring(d)),h.push(K),d=H,ue(h),N&&ce()),X()}function ve(K){d=K,ue(h),h=[],C=g.indexOf(r,d)}function X(K){if(t.header&&!j&&S.length&&!ne){var ee=S[0],he=Object.create(null),Ce=new Set(ee);let Ee=!1;for(let xe=0;xe<ee.length;xe++){let de=ee[xe];if(he[de=A(t.transformHeader)?t.transformHeader(de,xe):de]){let _e,Se=he[de];for(;_e=de+"_"+Se,Se++,Ce.has(_e););Ce.add(_e),ee[xe]=_e,he[de]++,Ee=!0,(ie=ie===null?{}:ie)[_e]=de}else he[de]=1,ee[xe]=de;Ce.add(de)}Ee&&console.warn("Duplicate headers found and renamed."),ne=!0}return{data:S,errors:U,meta:{delimiter:s,linebreak:r,aborted:G,truncated:!!K,cursor:z+(j||0),renamedHeaders:ie}}}function ce(){n(X()),S=[],U=[]}},this.abort=function(){G=!0},this.getCharIndex=function(){return d}}function te(t){var s=t.data,r=f[s.workerId],a=!1;if(s.error)r.userError(s.error,s.file);else if(s.results&&s.results.data){var n={abort:function(){a=!0,M(s.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:se,resume:se};if(A(r.userStep)){for(var y=0;y<s.results.data.length&&(r.userStep({data:s.results.data[y],errors:s.results.errors,meta:s.results.meta},n),!a);y++);delete s.results}else A(r.userChunk)&&(r.userChunk(s.results,n,s.file),delete s.results)}s.finished&&!a&&M(s.workerId,s.results)}function M(t,s){var r=f[t];A(r.userComplete)&&r.userComplete(s),r.terminate(),delete f[t]}function se(){throw new Error("Not implemented.")}function re(t){if(typeof t!="object"||t===null)return t;var s,r=Array.isArray(t)?[]:{};for(s in t)r[s]=re(t[s]);return r}function Q(t,s){return function(){t.apply(s,arguments)}}function A(t){return typeof t=="function"}return i.parse=function(t,s){var r=(s=s||{}).dynamicTyping||!1;if(A(r)&&(s.dynamicTypingFunction=r,r={}),s.dynamicTyping=r,s.transform=!!A(s.transform)&&s.transform,!s.worker||!i.WORKERS_SUPPORTED)return r=null,i.NODE_STREAM_INPUT,typeof t=="string"?(t=(a=>a.charCodeAt(0)!==65279?a:a.slice(1))(t),r=new(s.download?I:b)(s)):t.readable===!0&&A(t.read)&&A(t.on)?r=new R(s):(u.File&&t instanceof File||t instanceof Object)&&(r=new J(s)),r.stream(t);(r=(()=>{var a;return!!i.WORKERS_SUPPORTED&&(a=(()=>{var n=u.URL||u.webkitURL||null,y=m.toString();return i.BLOB_URL||(i.BLOB_URL=n.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",y,")();"],{type:"text/javascript"})))})(),(a=new u.Worker(a)).onmessage=te,a.id=_++,f[a.id]=a)})()).userStep=s.step,r.userChunk=s.chunk,r.userComplete=s.complete,r.userError=s.error,s.step=A(s.step),s.chunk=A(s.chunk),s.complete=A(s.complete),s.error=A(s.error),delete s.worker,r.postMessage({input:t,config:s,workerId:r.id})},i.unparse=function(t,s){var r=!1,a=!0,n=",",y=`\r
`,V='"',ie=V+V,ne=!1,w=null,$=!1,d=((()=>{if(typeof s=="object"){if(typeof s.delimiter!="string"||i.BAD_DELIMITERS.filter(function(j){return s.delimiter.indexOf(j)!==-1}).length||(n=s.delimiter),typeof s.quotes!="boolean"&&typeof s.quotes!="function"&&!Array.isArray(s.quotes)||(r=s.quotes),typeof s.skipEmptyLines!="boolean"&&typeof s.skipEmptyLines!="string"||(ne=s.skipEmptyLines),typeof s.newline=="string"&&(y=s.newline),typeof s.quoteChar=="string"&&(V=s.quoteChar),typeof s.header=="boolean"&&(a=s.header),Array.isArray(s.columns)){if(s.columns.length===0)throw new Error("Option columns is empty");w=s.columns}s.escapeChar!==void 0&&(ie=s.escapeChar+V),s.escapeFormulae instanceof RegExp?$=s.escapeFormulae:typeof s.escapeFormulae=="boolean"&&s.escapeFormulae&&($=/^[=+\-@\t\r].*$/)}})(),new RegExp(F(V),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return G(null,t,ne);if(typeof t[0]=="object")return G(w||Object.keys(t[0]),t,ne)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||w),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),G(t.fields||[],t.data||[],ne);throw new Error("Unable to serialize unrecognized input");function G(j,o,H){var B="",Z=(typeof j=="string"&&(j=JSON.parse(j)),typeof o=="string"&&(o=JSON.parse(o)),Array.isArray(j)&&0<j.length),ae=!Array.isArray(o[0]);if(Z&&a){for(var N=0;N<j.length;N++)0<N&&(B+=n),B+=g(j[N],N);0<o.length&&(B+=y)}for(var S=0;S<o.length;S++){var U=(Z?j:o[S]).length,h=!1,z=Z?Object.keys(o[S]).length===0:o[S].length===0;if(H&&!Z&&(h=H==="greedy"?o[S].join("").trim()==="":o[S].length===1&&o[S][0].length===0),H==="greedy"&&Z){for(var W=[],O=0;O<U;O++){var L=ae?j[O]:O;W.push(o[S][L])}h=W.join("").trim()===""}if(!h){for(var C=0;C<U;C++){0<C&&!z&&(B+=n);var oe=Z&&ae?j[C]:C;B+=g(o[S][oe],C)}S<o.length-1&&(!H||0<U&&!z)&&(B+=y)}}return B}function g(j,o){var H,B;return j==null?"":j.constructor===Date?JSON.stringify(j).slice(1,25):(B=!1,$&&typeof j=="string"&&$.test(j)&&(j="'"+j,B=!0),H=j.toString().replace(d,ie),(B=B||r===!0||typeof r=="function"&&r(j,o)||Array.isArray(r)&&r[o]||((Z,ae)=>{for(var N=0;N<ae.length;N++)if(-1<Z.indexOf(ae[N]))return!0;return!1})(H,i.BAD_DELIMITERS)||-1<H.indexOf(n)||H.charAt(0)===" "||H.charAt(H.length-1)===" ")?V+H+V:H)}},i.RECORD_SEP="",i.UNIT_SEP="",i.BYTE_ORDER_MARK="\uFEFF",i.BAD_DELIMITERS=["\r",`
`,'"',i.BYTE_ORDER_MARK],i.WORKERS_SUPPORTED=!D&&!!u.Worker,i.NODE_STREAM_INPUT=1,i.LocalChunkSize=10485760,i.RemoteChunkSize=5242880,i.DefaultDelimiter=",",i.Parser=T,i.ParserHandle=c,i.NetworkStreamer=I,i.FileStreamer=J,i.StringStreamer=b,i.ReadableStreamStreamer=R,u.jQuery&&((E=u.jQuery).fn.parse=function(t){var s=t.config||{},r=[];return this.each(function(y){if(!(E(this).prop("tagName").toUpperCase()==="INPUT"&&E(this).attr("type").toLowerCase()==="file"&&u.FileReader)||!this.files||this.files.length===0)return!0;for(var V=0;V<this.files.length;V++)r.push({file:this.files[V],inputElem:this,instanceConfig:E.extend({},s)})}),a(),this;function a(){if(r.length===0)A(t.complete)&&t.complete();else{var y,V,ie,ne,w=r[0];if(A(t.before)){var $=t.before(w.file,w.inputElem);if(typeof $=="object"){if($.action==="abort")return y="AbortError",V=w.file,ie=w.inputElem,ne=$.reason,void(A(t.error)&&t.error({name:y},V,ie,ne));if($.action==="skip")return void n();typeof $.config=="object"&&(w.instanceConfig=E.extend(w.instanceConfig,$.config))}else if($==="skip")return void n()}var d=w.instanceConfig.complete;w.instanceConfig.complete=function(G){A(d)&&d(G,w.file,w.inputElem),n()},i.parse(w.file,w.instanceConfig)}}function n(){r.splice(0,1),a()}}),k&&(u.onmessage=function(t){t=t.data,i.WORKER_ID===void 0&&t&&(i.WORKER_ID=t.workerId),typeof t.input=="string"?u.postMessage({workerId:i.WORKER_ID,results:i.parse(t.input,t.config),finished:!0}):(u.File&&t.input instanceof File||t.input instanceof Object)&&(t=i.parse(t.input,t.config))&&u.postMessage({workerId:i.WORKER_ID,results:t,finished:!0})}),(I.prototype=Object.create(l.prototype)).constructor=I,(J.prototype=Object.create(l.prototype)).constructor=J,(b.prototype=Object.create(b.prototype)).constructor=b,(R.prototype=Object.create(l.prototype)).constructor=R,i})})(je)),je.exports}var Je=Ke();const Ae=Le(Je);function De({type:p="csv",files:v=[],setFiles:m,title:u="Upload Files",subtitle:E="Drag and drop or click to upload"}){const D=Y.useCallback(i=>{if(!Array.isArray(i)||i.length===0){q.error("No valid file uploaded.");return}if(p==="csv"){const l=i[0];if(!(!!l&&(l.type==="text/csv"||l.name?.toLowerCase().endsWith(".csv")))){q.error("Please upload a valid CSV file."),m([]);return}l.key=`${l.name}-${l.lastModified}-${Math.random()}`,m([l]),q.success("CSV file uploaded successfully!")}else{const l=i.filter(c=>{if(c.size>5242880)return q.error(`${c.name} exceeds 5 MB limit.`),!1;const F=[".jpg",".jpeg",".png",".webp"],T=c.name.toLowerCase(),te=T.split(".").pop();if(!F.some(re=>T.endsWith(re)))return q.error(`${c.name} has unsupported format (.${te}). Please use JPG, PNG, or WEBP.`),!1;const se=["image/jpeg","image/jpg","image/png","image/webp"];return c.type&&!se.includes(c.type)?(q.error(`${c.name} has unsupported file type: ${c.type}`),!1):!0});if(l.length===0){q.error("No valid images uploaded.");return}const I=new Set(v.map(c=>c.name.toLowerCase())),J=l.filter(c=>I.has(c.name.toLowerCase()));J.length>0&&q.error(`${J.length} duplicate image${J.length>1?"s":""} skipped: ${J.map(c=>c.name).join(", ")}`);const b=l.filter(c=>!I.has(c.name.toLowerCase()));if(b.length===0)return;b.forEach(c=>{c.key=`${c.name}-${c.lastModified}-${Math.random()}`});const R=[...v,...b];m(R),q.success(`${b.length} image(s) added!`)}},[p,v,m]),{getRootProps:k,getInputProps:f,isDragActive:_}=$e({onDrop:D,multiple:p==="images",accept:p==="csv"?{"text/csv":[".csv"]}:{"image/*":[".jpg",".jpeg",".png",".webp"]}});return e.jsx("div",{className:"flex flex-col gap-3 w-full",children:e.jsxs("div",{...k(),className:`border-2 border-dashed rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all
                    ${_?"border-primary bg-[#F9FAFB]":"border-[#D0D5DD]"}
                    w-full h-48 text-center p-3
                `,children:[e.jsx("input",{...f()}),e.jsxs("div",{className:"flex flex-col gap-1 items-center justify-center font-public-sans max-w-[420px]",children:[e.jsx(Ue,{className:"h-5 w-5 text-[#27272A]"}),e.jsx("p",{className:"text-sm font-semibold text-black",children:u}),e.jsx("p",{className:"text-sm text-[#667085]",children:E})]})]})})}function we({title:p="",description:v=""}){return e.jsxs("div",{className:"space-y-2 font-jakarta-sans",children:[p&&e.jsx("h2",{className:"text-xl font-semibold text-black leading-[120%]",children:p}),v&&e.jsx("p",{className:"text-base text-[#667085] leading-[22px]",children:v})]})}function Qe(){const{setCsvFile:p,setCsvData:v}=pe(),[m,u]=Y.useState([]),[E,D]=Y.useState(null),k=me.filter(l=>l.required).map(l=>l.name);console.log("Required CSV Fields:",k);const f=Y.useCallback(()=>{u([]),p(null),v([])},[p,v]),_=Y.useCallback(l=>{const I=k.filter(J=>!l.includes(J));return console.log("CSV Headers:",l,k,I),I.length>0?(D(`Missing required fields: ${I.join(", ")}`),q.error("Some required fields are missing in the CSV."),!1):(D(null),!0)},[k]),i=Y.useCallback(l=>{if(!l||l.length===0){f();return}const I=l[0];if(!(I&&(I.type==="text/csv"||I.name?.toLowerCase().endsWith(".csv")))){q.error("Please upload a valid CSV file."),f();return}u([I]),p(I),Ae.parse(I,{header:!0,skipEmptyLines:!0,preview:2,complete:b=>{const R=b.meta.fields||[];if(!_(R)){f();return}Ae.parse(I,{header:!0,skipEmptyLines:!0,complete:c=>{const F=c.data||[];if(F.length===0){q.error("The CSV file appears to be empty."),v([]);return}v(F),console.log("Parsed CSV Data:",F.length)},error:c=>{console.error("CSV Parse Error:",c),q.error("Error parsing CSV file.")}})},error:b=>{console.error("CSV Header Parse Error:",b),q.error("Unable to read CSV headers.")}})},[f,p,v,_]);return e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-xl border border-[#EAECF0]",children:[E&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm px-4 py-2 rounded-md",children:E}),e.jsx(we,{title:"Import Employee Data",description:"Follow these steps to import employee data via CSV file"}),e.jsx(De,{title:"Drag CSV here or click to select a file.",subtitle:"UTF-8, with header. Example: salutation, title, first_name, last_name, position, department, profile_image_name etc",type:"csv",files:m,setFiles:i}),m.length>0&&e.jsxs("div",{className:"border border-[#EAECF0] bg-white rounded-md p-3 text-sm text-[#101828] flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Uploaded file:"})," ",e.jsx("span",{className:"text-[#475467]",children:m[0].name})]}),e.jsx(Ie,{onClick:f,className:"h-4 w-4 text-[#98A2B3] cursor-pointer hover:text-red-500 transition-colors"})]})]})}function Ze(){const{setCsvImages:p,csvData:v}=pe(),[m,u]=Y.useState([]),[E,D]=Y.useState(0);Y.useEffect(()=>{p(m)},[m,p]),Y.useEffect(()=>{if(!v?.length||!m.length){D(0);return}const f=v.map(l=>(l.profile_image_name||"").trim().toLowerCase()).filter(Boolean),i=m.map(l=>l.name.trim().toLowerCase()).filter(l=>f.includes(l));D(i.length)},[v,m]);const k=Y.useCallback(f=>{u(_=>{const i=_.filter(l=>l.key!==f);return q.success("Image removed"),i})},[u]);return console.log("ðŸ“ Current CSV Images:",m),console.log("ðŸ“Š CSV Data:",v),console.log("âœ… Matched Count:",E),e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-xl border border-[#EAECF0]",children:[v?.length>0&&e.jsxs("div",{className:"text-sm font-medium text-green-600",children:["Matched Images: ",E," / ",v.length," ",e.jsx("span",{className:"text-[10px] italic text-gray-500",children:"(Unmatched images will be ignored)"})]}),e.jsx(we,{title:"Upload Photos",description:'Upload multiple images matching the names listed in your CSV under the "profile_image_name" column.'}),e.jsx(De,{title:"Drag and drop images here or click to select.",subtitle:"Max size 5 MB each. Accepted formats: jpg, jpeg, png, webp, svg.",type:"images",files:m,setFiles:u}),m.length>0&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 mt-3",children:m.map(f=>{const _=f.name.trim().toLowerCase(),l=(v?.map(I=>(I.profile_image_name||"").trim().toLowerCase()).filter(Boolean)||[]).includes(_);return e.jsxs("div",{className:`relative border rounded-lg overflow-hidden group transition
                        ${l?"bg-green-50 border-green-400":"bg-white border-gray-200"}`,children:[e.jsx("img",{src:URL.createObjectURL(f),alt:f.name,className:"object-cover w-full h-32"}),e.jsx("button",{type:"button",onClick:()=>k(f.key),className:"absolute top-1 right-1 bg-white/80 hover:bg-red-500 hover:text-white rounded-full p-1 transition",children:e.jsx(Ie,{className:"w-4 h-4"})}),e.jsx("p",{className:`text-xs text-center truncate px-1 py-1 border-t transition
                            ${l?"bg-green-100 text-green-700 border-green-300":"bg-gray-50 text-gray-600 border-gray-200"}`,children:f.name})]},f.key)})})]})}function Ge(){const{setCsvImportProgress:p,csvData:v}=pe();return e.jsxs("div",{className:"flex flex-col lg:gap-6 gap-5",children:[e.jsx(Qe,{}),e.jsx(Ze,{}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs(fe,{variant:"light",disabled:v.length===0,onClick:()=>p(2),children:["Next ",e.jsx(Ne,{className:"inline-block w-4 h-4 ml-1"})]})})]})}function Xe(){const{csvData:p,setCsvImportProgress:v,mapping:m,setMapping:u}=pe(),E=p?.length>0?Object.keys(p[0]):[];Y.useEffect(()=>{!p?.length||!me?.length||u(k=>{if(Object.keys(k).length>0)return k;const f={};return Object.keys(p[0]).forEach(_=>{const i=me.find(l=>l.name.toLowerCase()===_.toLowerCase());f[_]=i?i.name:""}),f})},[p,me]);const D=(k,f)=>{u(_=>({..._,[k]:f}))};return p?.length?e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-xl border border-[#EAECF0]",children:[e.jsx(we,{title:"Mapping Employee Data",description:"Map your CSV columns to the appropriate fields in our system."}),e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg overflow-hidden text-sm bg-gray-50",children:[e.jsx("thead",{className:"bg-primary border-b border-primary",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-medium  text-white w-1/4",children:"CSV Column"}),e.jsx("th",{className:"text-left p-3 font-medium  text-white w-1/3",children:"Map To"}),e.jsx("th",{className:"text-left p-3 font-medium  text-white",children:"Sample Data"})]})}),e.jsx("tbody",{children:E.map(k=>{const f=Array.from({length:5},(_,i)=>p[i]?.[k]||"");return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-green-50 transition-colors",children:[e.jsx("td",{className:"p-3 font-medium text-gray-800",children:ye(k)}),e.jsx("td",{className:"p-3",children:e.jsxs("select",{value:m[k]||"",onChange:_=>D(k,_.target.value),className:"border border-gray-300 rounded-md p-2 text-sm w-full focus:ring-2 focus:ring-primary focus:outline-none",children:[e.jsx("option",{value:"",children:"-- Select Field --"}),me.map(_=>e.jsxs("option",{value:_.name,children:[ye(_.name),_.required?" *":""]},_.name))]})}),e.jsx("td",{className:"p-3 text-gray-600 text-xs",children:e.jsx("div",{className:"flex flex-col gap-0.5",children:f.map((_,i)=>e.jsx("div",{className:"truncate max-w-[250px]",children:_?.toString().trim()?_:"-"},i))})})]},k)})})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(fe,{onClick:()=>{const k=Object.values(m).filter(Boolean),f=k.filter((i,l)=>k.indexOf(i)!==l);if(f.length>0){q.error(`Duplicate mapping detected: "${[...new Set(f)].join('", "')}" are assigned to multiple CSV columns.`),console.log("âŒ Duplicate mappings:",f);return}const _=me.filter(i=>i.required).filter(i=>!k.includes(i.name));if(_.length>0){q.error(`Required fields missing: ${_.map(i=>ye(i.name)).join(", ")}`),console.log("âŒ Missing required fields:",_);return}v(3),console.log("âœ… Final Mapping:",m)},variant:"light",children:["Next ",e.jsx(Ne,{className:"inline-block w-4 h-4 ml-1"})]})})]}):e.jsx("div",{className:"text-center text-gray-500 p-5",children:"âš ï¸ Please upload a CSV file first."})}function Ye(){const[p,v]=Y.useState(1),m=b=>v(p===b?0:b),{openModal:u}=Te(),{csvData:E,mapping:D,loadingImport:k,warnings:f,setWarnings:_,errors:i,setErrors:l,setCsvImportProgress:I}=pe();Y.useEffect(()=>{if(!E||E.length===0){_([]),l([]);return}const b=[],R=[];E.forEach((c,F)=>{me.forEach(T=>{const te=D[T.name],M=te?c[te]:"";T.required&&(M===void 0||M==="")&&b.push({row:F+1,name:`${c.first_name||""} ${c.last_name||""}`,field:T.name,issue:"Missing value",value:M||""}),M&&(T.validate==="nonEmpty"&&M.trim()===""&&R.push({row:F+1,name:`${c.first_name||""} ${c.last_name||""}`,field:T.name,issue:"Value required",value:M}),T.validate==="email"&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(M)||R.push({row:F+1,name:`${c.first_name||""} ${c.last_name||""}`,field:T.name,issue:"Invalid email",value:M})),T.validate==="phone"&&(/^\+?[0-9\s\-()]{6,20}$/.test(M)||R.push({row:F+1,name:`${c.first_name||""} ${c.last_name||""}`,field:T.name,issue:"Invalid phone",value:M})),T.validate==="url"&&(/^(https?:\/\/)[^\s/$.?#].[^\s]*$/i.test(M)||R.push({row:F+1,name:`${c.first_name||""} ${c.last_name||""}`,field:T.name,issue:"Invalid URL",value:M})))})}),_(b),l(R)},[E,D]);function J(b){if(!E||E.length===0)return null;const R=b-1;if(R<0||R>=E.length)return null;const c=E[R];return{rowNumber:R+1,data:c}}return e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-xl border border-[#EAECF0]",children:[e.jsx(we,{title:"Validation Employee Data",description:"Validating the fields in your CSV file to ensure data integrity before import."}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs(be.Accordion,{className:"border-0 rounded-0",open:p===1,icon:e.jsx(Re,{className:`${p===1?"rotate-180":""} transition text-[#71717A]`}),children:[e.jsx(be.AccordionHeader,{className:"rounded-lg p-3 border border-[#F2F4F7] bg-white transition duration-500",onClick:()=>m(1),children:e.jsx("div",{className:"flex flex-col gap-1.5 font-public-sans",children:e.jsxs("h5",{className:"font-semibold text-sm text-[#3F3F46] flex items-center",children:[e.jsx("img",{src:"/assets/images/warning-icon.svg",alt:"Icon",className:"h-6 w-6 mr-2"}),e.jsxs("span",{children:[f.length," record",f.length>1?"s":""," with warnings"]})]})})}),e.jsx(be.AccordionBody,{className:"overflow-visible p-0",children:e.jsx("div",{className:"py-5",children:e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg overflow-hidden text-sm bg-gray-50",children:[e.jsx("thead",{className:"bg-primary border-b border-primary",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Row#"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Employee"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Field"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Issue"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Action"})]})}),e.jsx("tbody",{children:f.length>0?f.map((b,R)=>e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"p-3",children:b.row}),e.jsx("td",{className:"p-3",children:b.name||"-"}),e.jsx("td",{className:"p-3",children:ye(b.field)}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"py-1 px-2 w-fit font-medium rounded-md bg-orange-100 text-orange-800",children:b.issue}),e.jsx("div",{className:"text-sm text-gray-500",children:b.value})]}),e.jsx("td",{className:"p-3",children:e.jsx(fe,{variant:"primary",onClick:()=>{const c=J(b.row);console.log("CSV Row Data:",c),u("UpdateCsvRecordModal",{rowNumber:c?.rowNumber??null,rowData:c?.data??{}})},children:"Update"})})]},R)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-3 text-gray-400 italic text-center",children:"No warnings"})})})]})})})})]}),e.jsxs(be.Accordion,{className:"border-0 rounded-0",open:p===2,icon:e.jsx(Re,{className:`${p===2?"rotate-180":""} transition text-[#71717A]`}),children:[e.jsx(be.AccordionHeader,{className:"rounded-lg p-3 border border-[#F2F4F7] bg-white transition duration-500",onClick:()=>m(2),children:e.jsx("div",{className:"flex flex-col gap-1.5 font-public-sans",children:e.jsxs("h5",{className:"font-semibold text-sm text-[#3F3F46] flex items-center",children:[e.jsx("img",{src:"/assets/images/danger-icon.svg",alt:"Icon",className:"h-6 w-6 mr-2"}),e.jsxs("span",{children:[i.length," record",i.length>1?"s":""," with errors"]})]})})}),e.jsx(be.AccordionBody,{className:"overflow-visible p-0",children:e.jsx("div",{className:"py-5",children:e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-gray-200 rounded-lg overflow-hidden text-sm bg-gray-50",children:[e.jsx("thead",{className:"bg-primary border-b border-primary",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Row#"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Employee"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Field"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Issue"}),e.jsx("th",{className:"text-left p-3 font-medium text-white",children:"Action"})]})}),e.jsx("tbody",{children:i.length>0?i.map((b,R)=>e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("td",{className:"p-3",children:b.row}),e.jsx("td",{className:"p-3",children:b.name||"-"}),e.jsx("td",{className:"p-3",children:ye(b.field)}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"py-1 px-2 w-fit font-medium rounded-md bg-red-100 text-red-800",children:b.issue}),e.jsx("div",{className:"text-sm text-gray-500",children:b.value})]}),e.jsx("td",{className:"p-3",children:e.jsx(fe,{variant:"primary",onClick:()=>{const c=J(b.row);console.log("CSV Row Data:",c),u("UpdateCsvRecordModal",{rowNumber:c?.rowNumber??null,rowData:c?.data??{}})},children:"Update"})})]},R)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-3 text-gray-400 italic text-center",children:"No errors"})})})]})})})})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(fe,{onClick:()=>{I(2)},variant:"light",children:[e.jsx(Oe,{className:"inline-block w-4 h-4 mr-1"}),"Previous"]}),e.jsxs(fe,{onClick:()=>{I(4)},variant:"light",children:["Next ",e.jsx(Ne,{className:"inline-block w-4 h-4 ml-1"})]})]})]})}function et(){const{csvData:p,csvImages:v,mapping:m,warnings:u,errors:E,setCsvImportProgress:D}=pe(),[k,f]=Y.useState(!1),_=E.map(F=>F.row),i=u.map(F=>F.row),I=(p?.length||0)-new Set([..._,...i]).size,J=u.length,b=E.length,R=p.map((F,T)=>{const te=T+1;if(_.includes(te))return null;const M={};Object.entries(m||{}).forEach(([re,Q])=>{M[re]=F[Q]??""});const se=M.profile_image_name;if(se&&v&&v.length>0){const re=v.find(Q=>Q.name===se);re&&(M.profile_image_file=re)}return M}).filter(Boolean);console.log("âœ… Records ready to send to backend:",R,v);const c=async()=>{if(!R||R.length===0){q.error("No data to submit.");return}f(!0);try{const F=await Promise.all(R.map(async te=>{let M=null;return te.profile_image_file instanceof File&&(M=await new Promise((se,re)=>{const Q=new FileReader;Q.readAsDataURL(te.profile_image_file),Q.onload=()=>se(Q.result),Q.onerror=A=>re(A)})),{...te,profile_image_base64:M}}));console.log("ðŸ“¤ Data to send to backend:",F);const T=await axios.post("/cards/bulk-update",{cards:F});console.log("ðŸ“¦ Backend Response:",T.data),T.data.success?(q.success(T.data.message||"Cards updated successfully!"),D(1)):q.error(T.data.message||"Something went wrong.")}catch(F){console.error("âŒ Axios Error:",F),q.error("Failed to submit card updates.")}finally{f(!1)}};return e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-xl border border-[#EAECF0]",children:[e.jsx(we,{title:"Confirm Employee Data",description:"Once confirmed the validated records will be inserted in the database."}),e.jsxs("div",{className:"flex flex-col gap-5 mb-1",children:[e.jsx("div",{className:"rounded-lg p-3 bg-[#F9FAFB]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/assets/images/success-icon.svg",alt:"Success",className:"h-6 w-6"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h4",{className:"font-semibold text-sm text-[#3F3F46]",children:[I," records validated successfully"]}),e.jsx("p",{className:"text-sm text-[#667085]",children:"These records are ready for import"})]})]})}),e.jsx("div",{className:"rounded-lg p-3 bg-[#F9FAFB]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/assets/images/warning-icon.svg",alt:"Warning",className:"h-6 w-6"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h4",{className:"font-semibold text-sm text-[#3F3F46]",children:[J," records with warnings"]}),e.jsx("p",{className:"text-sm text-[#667085]",children:"These records have issues but can still be imported."})]})]})}),e.jsx("div",{className:"rounded-lg p-3 bg-[#F9FAFB]",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/assets/images/danger-icon.svg",alt:"danger",className:"h-6 w-6"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h4",{className:"font-semibold text-sm text-[#3F3F46]",children:[b," records with errors"]}),e.jsx("p",{className:"text-sm text-[#667085]",children:"These records will be ignored while importing."})]})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(fe,{onClick:()=>D(3),variant:"light",children:[e.jsx(Oe,{className:"inline-block w-4 h-4 mr-1"}),"Previous"]}),e.jsxs(fe,{onClick:c,variant:"primary",disabled:k,children:[k?"Submitting...":"Complete Import",e.jsx(Ne,{className:"inline-block w-4 h-4 ml-1"})]})]})]})}function dt(){const{setHeaderTitle:p,setHeaderText:v,csvImportProgress:m,progressSteps:u}=pe();return Y.useEffect(()=>{p("Bulk Import"),v("")},[]),e.jsxs(Pe,{children:[e.jsx(Me,{title:"Bulk Import"}),e.jsx("div",{className:"py-4 md:px-6 px-4 flex flex-col gap-6",children:e.jsx("div",{className:"md:p-6 p-4 rounded-xl bg-white border border-[#EAECF0]",children:e.jsxs("div",{className:"flex xl:flex-row flex-col md:gap-6 gap-4",children:[e.jsx("div",{className:"xl:w-[236px] w-full shrink-0",children:e.jsx(He,{})}),e.jsx("div",{className:"grow",children:m===1?e.jsx(Ge,{}):m===2?e.jsx(Xe,{}):m===3?e.jsx(Ye,{}):m===4?e.jsx(et,{}):e.jsx("div",{children:"Refresh Page"})})]})})})]})}export{dt as default};
