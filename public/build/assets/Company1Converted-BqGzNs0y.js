import{c as o,u as j,a as v,r as n,j as e,H as k}from"./app-RSRAvUro.js";import{A as E}from"./AuthenticatedLayout-DjKfZlTD.js";import{C as S}from"./CustomDataTable-BGrgTAeF.js";import{W as w}from"./WalletStatusPill-QUyqpAF-.js";import{S as C,W as _}from"./SyncingWarning-AhtXyBwO.js";import{g as D}from"./viteConfig-gEqUb4HH.js";import{u as W,a as A,E as M}from"./useJobMonitor-CRrqVl6y.js";import{E as P}from"./eye-BAShKVT2.js";import{S as T}from"./square-pen-C8Kx-iox.js";import{T as $}from"./trash-2-nrWdjf_3.js";import"./ApplicationLogo-rP68lrG-.js";import"./chevron-down-BTS8Ob3E.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],L=o("mail",H);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],R=o("wallet",q);function Y(){const{cards:i,isSubscriptionActive:d,hasRunningJob:l,hasRunningEmailJob:r}=j().props,{setHeaderTitle:c,setHeaderText:m}=v(),[x,u]=n.useState("https://app.ppsbusinesscards.de");W(l),A(r),n.useEffect(()=>{(async()=>{const a=await D();u(a)})()},[]),n.useEffect(()=>{c("Employees Management"),m("")},[]);const h=[{key:"id",label:"ID",sortable:!0,className:"font-semibold",render:a=>`#${a}`},{key:"code",label:"Code",sortable:!0,render:(a,s)=>e.jsx("a",{href:`${x}/card/${a}`,target:"_blank",rel:"noopener noreferrer",className:"text-[#50bd5b] underline hover:text-[#3da147]",children:a})},{key:"first_name",label:"User",sortable:!0,render:(a,s)=>{const N=[s.salutation,s.title,s.first_name,s.last_name].filter(Boolean).join(" ")||"N/A";return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-900",children:N}),s.position&&e.jsx("span",{className:"text-xs text-gray-500",children:s.position})]})}},{key:"email",label:"Email",sortable:!0,render:(a,s)=>{const t=a||s.primary_email||"N/A";return t!=="N/A"?e.jsx("a",{href:`mailto:${t}`,className:"text-blue-600 hover:underline",children:t}):e.jsx("span",{className:"text-gray-400",children:"N/A"})}},{key:"department",label:"Department",sortable:!0,render:a=>a||e.jsx("span",{className:"text-gray-400",children:"N/A"})},{key:"wallet_status",label:"Wallet Status",sortable:!0,render:(a,s)=>e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(w,{status:a}),e.jsx(M,{card:s})]})},{key:"wallet_eligibility",label:"Eligibility",sortable:!0,render:a=>e.jsx(_,{status:a})},{key:"status",label:"Status",sortable:!0,render:a=>e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${a==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a})},{key:"created_at",label:"Created",sortable:!0,render:a=>new Date(a).toLocaleDateString()},{key:"actions",label:"Actions",sortable:!1,className:"text-right",headerClassName:"text-right",render:(a,s)=>e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>p(s.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"View Card",children:e.jsx(P,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>b(s.id),className:"p-2 text-gray-600 hover:bg-gray-50 rounded transition-colors",title:"Edit Card",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>g(s.id),className:"p-2 text-purple-600 hover:bg-purple-50 rounded transition-colors",title:"Send Wallet",disabled:s.wallet_status==="added",children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>y(s.id),className:"p-2 text-green-600 hover:bg-green-50 rounded transition-colors",title:"Send Email",children:e.jsx(L,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>f(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete Card",children:e.jsx($,{className:"h-4 w-4"})})]})}],p=a=>{console.log("View card:",a)},b=a=>{console.log("Edit card:",a)},g=a=>{console.log("Send wallet:",a)},y=a=>{console.log("Send email:",a)},f=a=>{confirm("Are you sure you want to delete this card?")&&console.log("Delete card:",a)};return e.jsxs(E,{children:[e.jsx(k,{title:"Employee Cards - Fast DataTable"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:[(l||r)&&e.jsx("div",{className:"mb-6",children:e.jsx(C,{hasWalletSync:l,hasEmailSync:r})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Employee Cards"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your company's employee business cards with fast server-side processing"})]}),!d&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg px-4 py-2",children:e.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:"‚ö†Ô∏è Subscription inactive"})})]}),e.jsx(S,{columns:h,data:i,endpoint:route("company.cards.index"),tableKey:"cards",searchable:!0,paginated:!0,perPageOptions:[10,25,50,100],onRowClick:null,emptyMessage:"No employee cards found. Create your first card to get started.",className:"shadow-sm"})]})}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"üí° Performance Tip"}),e.jsxs("p",{className:"text-sm text-blue-800",children:["This table uses server-side processing. Only ",i.per_page," records are loaded at a time, making it blazing fast even with thousands of cards!"]})]})]})})]})}export{Y as default};
