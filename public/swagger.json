{
    "openapi": "3.0.0",
    "info": {
        "title": "PPS Business Cards API",
        "description": "API documentation for PPS Business Cards",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://127.0.0.1:8000",
            "description": "Local server"
        },
        {
            "url": "https://test.ppsbusinesscards.de/",
            "description": "Test server"
        },
        {
            "url": "https://app.ppsbusinesscards.de/",
            "description": "Production server"
        }
    ],
    "paths": {
        "/api/authenticate": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Authenticate company by API key and create a company API token",
                "operationId": "9076b2f08b57227d057da88e9a73cdba",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "api_key"
                                ],
                                "properties": {
                                    "api_key": {
                                        "description": "Company API key",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful authentication",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "company_id": {
                                            "type": "integer",
                                            "example": 1
                                        },
                                        "company_name": {
                                            "type": "string",
                                            "example": "Example Co"
                                        },
                                        "token": {
                                            "type": "string",
                                            "example": "pps_api_xxx"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Invalid API key"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                }
            }
        },
        "/api/v1/employees": {
            "get": {
                "tags": [
                    "Employees"
                ],
                "summary": "Get all employees for a company",
                "description": "Fetch employees with optional related entities and wallet/sync info.",
                "operationId": "bee848114eca59a5e4f8826227e68674",
                "parameters": [
                    {
                        "name": "include_wallet_status",
                        "in": "query",
                        "description": "Include wallet status for each employee",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": false
                        }
                    },
                    {
                        "name": "include_sync_eligibility",
                        "in": "query",
                        "description": "Include sync eligibility for each employee",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": false
                        }
                    },
                    {
                        "name": "include_all",
                        "in": "query",
                        "description": "Include all relations (websites, phones, emails, addresses, buttons, social links)",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": false
                        }
                    },
                    {
                        "name": "include_websites",
                        "in": "query",
                        "description": "Include employee websites relation",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": false
                        }
                    },
                    {
                        "name": "include_phone_numbers",
                        "in": "query",
                        "description": "Include employee phone numbers relation",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": false
                        }
                    },
                    {
                        "name": "include_emails",
                        "in": "query",
                        "description": "Include employee emails relation",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": false
                        }
                    },
                    {
                        "name": "include_addresses",
                        "in": "query",
                        "description": "Include employee addresses relation",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": false
                        }
                    },
                    {
                        "name": "include_social_links",
                        "in": "query",
                        "description": "Include employee social links relation",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": false
                        }
                    },
                    {
                        "name": "include_buttons",
                        "in": "query",
                        "description": "Include employee buttons relation",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": false
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Employees fetched successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Employees fetched successfully."
                                        },
                                        "employees": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "card": {
                                                        "type": "object"
                                                    },
                                                    "additional": {
                                                        "type": "object"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Company not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Company not found."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Error fetching employees",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Error fetching employees."
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Employees"
                ],
                "summary": "Create or update multiple employees",
                "description": "Stores or updates multiple employees in a single request. All employees must belong to the company associated with the API token.",
                "operationId": "7122580ee4b6be73288c012aca31acfe",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "employees"
                                ],
                                "properties": {
                                    "employees": {
                                        "description": "Array of employee objects to create or update",
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "id",
                                                "salutation",
                                                "first_name",
                                                "last_name",
                                                "primary_email",
                                                "position",
                                                "department",
                                                "status"
                                            ],
                                            "properties": {
                                                "id": {
                                                    "description": "Existing employee ID to update",
                                                    "type": "integer",
                                                    "example": 25
                                                },
                                                "salutation": {
                                                    "description": "Employee salutation",
                                                    "type": "string",
                                                    "example": "Mr."
                                                },
                                                "title": {
                                                    "description": "Optional title",
                                                    "type": "string",
                                                    "example": "Team Lead"
                                                },
                                                "first_name": {
                                                    "type": "string",
                                                    "example": "John"
                                                },
                                                "last_name": {
                                                    "type": "string",
                                                    "example": "Doe"
                                                },
                                                "primary_email": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "john.doe@example.com"
                                                },
                                                "position": {
                                                    "type": "string",
                                                    "example": "Developer"
                                                },
                                                "degree": {
                                                    "type": "string",
                                                    "example": "BSc Computer Science"
                                                },
                                                "department": {
                                                    "type": "string",
                                                    "example": "Engineering"
                                                },
                                                "position_de": {
                                                    "type": "string",
                                                    "example": "Entwickler"
                                                },
                                                "degree_de": {
                                                    "type": "string",
                                                    "example": "B.Sc. Informatik"
                                                },
                                                "department_de": {
                                                    "type": "string",
                                                    "example": "Entwicklung"
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "active",
                                                        "inactive"
                                                    ],
                                                    "example": "active"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Employees created or updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Employees updated successfully."
                                        },
                                        "data": {
                                            "properties": {
                                                "updated": {
                                                    "description": "Array of full employee data after update",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation errors occurred"
                    },
                    "500": {
                        "description": "Failed to update one or more employees"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/employees/{employeeId}": {
            "get": {
                "tags": [
                    "Employees"
                ],
                "summary": "Get a single employee",
                "description": "Fetch a single employee (card) by ID for the authenticated company. Optional query params control included relations.",
                "operationId": "209d061c54afe0753f2a7b54ab477ca3",
                "parameters": [
                    {
                        "name": "employeeId",
                        "in": "path",
                        "description": "ID of the employee (card)",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 100001
                        }
                    },
                    {
                        "name": "include_wallet_status",
                        "in": "query",
                        "description": "Include wallet status if true (1 or true)",
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "include_sync_eligibility",
                        "in": "query",
                        "description": "Include sync eligibility if true (1 or true)",
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    },
                    {
                        "name": "include_all",
                        "in": "query",
                        "description": "Include all relations if true (1 or true)",
                        "schema": {
                            "type": "boolean",
                            "example": false
                        }
                    },
                    {
                        "name": "include_social_links",
                        "in": "query",
                        "description": "Include social links if true (1 or true)",
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "include_phone_numbers",
                        "in": "query",
                        "description": "Include phone numbers if true (1 or true)",
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "include_emails",
                        "in": "query",
                        "description": "Include emails if true (1 or true)",
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "include_addresses",
                        "in": "query",
                        "description": "Include addresses if true (1 or true)",
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "include_websites",
                        "in": "query",
                        "description": "Include websites if true (1 or true)",
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    },
                    {
                        "name": "include_buttons",
                        "in": "query",
                        "description": "Include buttons if true (1 or true)",
                        "schema": {
                            "type": "boolean",
                            "example": true
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful fetch of a single employee",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "card": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 100001
                                                },
                                                "code": {
                                                    "type": "string",
                                                    "example": "3W3CSJJE"
                                                },
                                                "salutation": {
                                                    "type": "string",
                                                    "example": "Mr."
                                                },
                                                "title": {
                                                    "type": "string",
                                                    "example": "dr."
                                                },
                                                "first_name": {
                                                    "type": "string",
                                                    "example": "Anas"
                                                },
                                                "last_name": {
                                                    "type": "string",
                                                    "example": "Syed"
                                                },
                                                "profile_image": {
                                                    "type": "string",
                                                    "example": "http://127.0.0.1:8000/storage/card_profiles/qh2LydV0RJpjJDUJWGU8lBryq3TeABekGuqFxxYt.png"
                                                },
                                                "position": {
                                                    "type": "string",
                                                    "example": "Web developer"
                                                },
                                                "degree": {
                                                    "type": "string",
                                                    "example": "BS Bioinformatics"
                                                },
                                                "department": {
                                                    "type": "string",
                                                    "example": "Technical"
                                                },
                                                "position_de": {
                                                    "type": "string",
                                                    "example": "Webentwickler"
                                                },
                                                "degree_de": {
                                                    "type": "string",
                                                    "example": "BS Bioinformatik"
                                                },
                                                "department_de": {
                                                    "type": "string",
                                                    "example": "Technisch"
                                                },
                                                "cards_group_id": {
                                                    "type": "integer",
                                                    "example": 13
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "example": "active"
                                                },
                                                "downloads": {
                                                    "type": "integer",
                                                    "example": 8
                                                },
                                                "created_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-10-20T12:42:27.000000Z"
                                                },
                                                "updated_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-11-14T05:00:11.000000Z"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "additional": {
                                            "properties": {
                                                "wallet_status": {
                                                    "type": "string",
                                                    "example": "active"
                                                },
                                                "is_eligible_for_sync": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "social_links": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "phone_numbers": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "emails": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "addresses": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "websites": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                },
                                                "buttons": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Employee not found"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/employees/{id}/clear": {
            "put": {
                "tags": [
                    "Employees"
                ],
                "summary": "Clear a single employee's details and generate a new code",
                "description": "Clears all employee card fields, related records, and generates a new code. Employee must belong to the company associated with the API token.",
                "operationId": "be7a247fcdd46a2296f64b1992331c07",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Employee ID to clear",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 25
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Employee cleared successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Employee cleared and new code generated successfully."
                                        },
                                        "data": {
                                            "properties": {
                                                "employee_id": {
                                                    "type": "integer",
                                                    "example": 25
                                                },
                                                "new_code": {
                                                    "type": "string",
                                                    "example": "ABCD1234"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Employee not found or does not belong to company"
                    },
                    "500": {
                        "description": "Failed to clear employee"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/employees/bulk-clear": {
            "put": {
                "tags": [
                    "Employees"
                ],
                "summary": "Clear multiple employees' details and generate new codes",
                "description": "Clears all fields and related data for multiple employees and generates new codes. All employees must belong to the company associated with the API token.",
                "operationId": "dc05c16d11958952c12a4cb1f9810cd3",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "ids"
                                ],
                                "properties": {
                                    "ids": {
                                        "description": "Array of employee IDs to clear",
                                        "type": "array",
                                        "items": {
                                            "type": "integer",
                                            "example": 25
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Employees cleared successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "3 employee(s) cleared and new codes generated successfully."
                                        },
                                        "data": {
                                            "properties": {
                                                "cleared": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "employee_id": {
                                                                "type": "integer",
                                                                "example": 25
                                                            },
                                                            "new_code": {
                                                                "type": "string",
                                                                "example": "ABCD1234"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No employees found or do not belong to company"
                    },
                    "422": {
                        "description": "Invalid payload"
                    },
                    "500": {
                        "description": "Failed to clear one or more employees"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/nfc/multi-assign": {
            "post": {
                "tags": [
                    "NFC Cards"
                ],
                "summary": "Assign multiple NFC cards to multiple employees",
                "description": "Assigns NFC cards to employees. All IDs must belong to the company from the API token.",
                "operationId": "ddfaa7d09bc1fb3cd00a510f71af798c",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "assignments": {
                                        "description": "Array of assignments",
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "employee",
                                                "nfc_ids"
                                            ],
                                            "properties": {
                                                "employee": {
                                                    "description": "Employee ID to assign NFC cards to",
                                                    "type": "integer",
                                                    "example": 25
                                                },
                                                "nfc_ids": {
                                                    "description": "Array of NFC card IDs to assign",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "integer",
                                                        "example": 101
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful assignment",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "2 assignment(s) completed successfully."
                                        },
                                        "data": {
                                            "properties": {
                                                "assignments": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "employee_id": {
                                                                "type": "integer",
                                                                "example": 25
                                                            },
                                                            "assigned_nfc_ids": {
                                                                "type": "array",
                                                                "items": {
                                                                    "type": "integer",
                                                                    "example": 101
                                                                }
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Unauthorized / Invalid company ownership"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/v1/nfc/multi-unassign": {
            "post": {
                "tags": [
                    "NFC Cards"
                ],
                "summary": "Unassign multiple NFC cards from employees",
                "description": "Unassigns NFC cards. All IDs must belong to the company from the API token.",
                "operationId": "ea9755059211eb073654c506a50f69a6",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "nfc_ids"
                                ],
                                "properties": {
                                    "nfc_ids": {
                                        "description": "Array of NFC card IDs to unassign",
                                        "type": "array",
                                        "items": {
                                            "type": "integer",
                                            "example": 101
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful unassignment",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "5 NFC card(s) unassigned successfully."
                                        },
                                        "data": {
                                            "properties": {
                                                "unassigned_nfc_ids": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "integer",
                                                        "example": 101
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Unauthorized / Invalid company ownership"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        }
    },
    "components": {
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "description": "Enter your bearer token in the format **Bearer &lt;token>**",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Auth",
            "description": "Auth"
        },
        {
            "name": "Employees",
            "description": "Employees"
        },
        {
            "name": "NFC Cards",
            "description": "NFC Cards"
        }
    ]
}